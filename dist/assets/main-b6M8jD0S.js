var gn=Object.defineProperty;var Dn=(s,n,t)=>n in s?gn(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t;var O=(s,n,t)=>Dn(s,typeof n!="symbol"?n+"":n,t);import{d as St,c as En,h as qs,a as Ys,b as Qs,B as vn,r as p,u as Zs,e as kn,f as ce,g as Ps,R as W,j as e,M as Tn,C as Un,L as Pn,i as jn,k as Ft,l as At,m as Cn,n as Vn,o as In,p as Sn,q as et,t as Fn,s as Y,v as Mt,w as ve,A as Ot,I as ts,U as Ee,G as Je,x as qe,y as as,z as ss,T as hs,D as Ws,P as we,E as De,F as An,H as Mn,J as On,K as Rn,X as Ue,N as dt,O as Fs,Q as Ln,S as Bn,V as $n,W as _n,Y as Ds,Z as zn,_ as Kn,$ as qn,a0 as Rt,a1 as Wn,a2 as Lt,a3 as Gn,a4 as Jn,a5 as Hn,a6 as Fe,a7 as He,a8 as Xe,a9 as Ye,aa as os,ab as ct,ac as Xn,ad as Yn,ae as Qn,af as Zn,ag as ns,ah as er,ai as sr,aj as mt,ak as Es,al as Bt,am as tr,an as ft,ao as nr,ap as rr,aq as ar,ar as or,as as ir,at as $t,au as _t,av as zt,aw as Kt,ax as qt,ay as Wt,az as pt,aA as is,aB as Gt,aC as lr,aD as bt,aE as ur,aF as dr,aG as Jt,aH as Ht,aI as cr,aJ as mr,aK as fr,aL as pr,aM as br,aN as hr,aO as wr,aP as xr,aQ as Nr,aR as yr,aS as gr,aT as Dr,aU as Er,aV as vr,aW as Xt,aX as kr,aY as Yt,aZ as Qt,a_ as Tr,a$ as Ur,b0 as me,b1 as Pr,b2 as jr,b3 as Cr,b4 as Vr,b5 as Ir,b6 as Sr,b7 as Fr}from"./vendor-CKfMCIBT.js";import".prisma/client/index-browser";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const Ar=20143,Mr=1264453517,z=St({id:Ar,name:"Monad Devnet",network:"monad-devnet",nativeCurrency:{decimals:18,name:"DMON",symbol:"DMON"},rpcUrls:{default:{http:["https://testnet-rpc2.monad.xyz/52227f026fa8fac9e2014c58fbf5643369b3bfc6"]},public:{http:["https://testnet-rpc.monad.xyz"]}},blockExplorers:{default:{name:"MonadExplorer",url:"https://explorer-devnet.monadinfra.com"}},testnet:!0}),ee=St({id:Mr,name:"Flash Testnet",network:"fuse-ember",nativeCurrency:{decimals:18,name:"Fuse",symbol:"FUSE"},rpcUrls:{default:{http:["/fuse-rpc"]},public:{http:["/fuse-rpc"]}},blockExplorers:{default:{name:"FuseExplorer",url:"https://explorer.flash.fuse.io"}},testnet:!0}),be=[z,ee];z.name,z.nativeCurrency,z.rpcUrls.default.http[0],z.blockExplorers.default.url;ee.name,ee.nativeCurrency,ee.rpcUrls.default.http[0],ee.blockExplorers.default.url;const Ve=async()=>{if(typeof window>"u"||!window.ethereum)return console.warn("No ethereum provider found"),null;try{return await window.ethereum.request({method:"eth_chainId"}),window.ethereum}catch(s){return console.error("Error initializing ethereum provider:",s),null}},Or=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"owner",type:"address"}],name:"ERC721IncorrectOwner",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721InsufficientApproval",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC721InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC721InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"ERC721InvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC721InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC721InvalidSender",type:"error"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721NonexistentToken",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_fromTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_toTokenId",type:"uint256"}],name:"BatchMetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"MetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"string",name:"username",type:"string"}],name:"ProfileCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"newMetadataURI",type:"string"}],name:"ProfileMetadataUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"username",type:"string"},{internalType:"string",name:"metadataURI",type:"string"}],name:"createProfile",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getProfileByTokenId",outputs:[{internalType:"string",name:"username",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"owner",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"username",type:"string"}],name:"getTokenIdByUsername",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"newMetadataURI",type:"string"}],name:"updateProfileMetadata",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"username",type:"string"}],name:"usernameExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Rr=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"codeHash",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"maxUses",type:"uint256"},{indexed:!1,internalType:"uint256",name:"expiryTime",type:"uint256"}],name:"InviteCodeCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"codeHash",type:"bytes32"}],name:"InviteCodeRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"member",type:"address"}],name:"MemberJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"member",type:"address"},{indexed:!1,internalType:"enum ITribeController.MemberStatus",name:"status",type:"uint8"}],name:"MembershipUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"requestId",type:"uint256"}],name:"MergeApproved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"requestId",type:"uint256"}],name:"MergeCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"requestId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"sourceTribeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"targetTribeId",type:"uint256"}],name:"MergeExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"requestId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"sourceTribeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"targetTribeId",type:"uint256"}],name:"MergeRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!1,internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"},{indexed:!1,internalType:"uint256",name:"entryFee",type:"uint256"}],name:"TribeConfigUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"tribeName",type:"string"},{indexed:!1,internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"}],name:"TribeCreated",type:"event"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"member",type:"address"}],name:"approveMember",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"mergeRequestId",type:"uint256"}],name:"approveMerge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"member",type:"address"}],name:"banMember",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"mergeRequestId",type:"uint256"}],name:"cancelMerge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"code",type:"string"},{internalType:"uint256",name:"maxUses",type:"uint256"},{internalType:"uint256",name:"expiryTime",type:"uint256"}],name:"createInviteCode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadata",type:"string"},{internalType:"address[]",name:"admins",type:"address[]"},{internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"},{internalType:"uint256",name:"entryFee",type:"uint256"},{components:[{internalType:"address",name:"nftContract",type:"address"},{internalType:"enum ITribeController.NFTType",name:"nftType",type:"uint8"},{internalType:"bool",name:"isMandatory",type:"bool"},{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],internalType:"struct ITribeController.NFTRequirement[]",name:"nftRequirements",type:"tuple[]"}],name:"createTribe",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"mergeRequestId",type:"uint256"}],name:"executeMerge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"code",type:"string"}],name:"getInviteCodeStatus",outputs:[{internalType:"bool",name:"valid",type:"bool"},{internalType:"uint256",name:"remainingUses",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"getMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"member",type:"address"}],name:"getMemberStatus",outputs:[{internalType:"enum ITribeController.MemberStatus",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"requestId",type:"uint256"}],name:"getMergeRequest",outputs:[{components:[{internalType:"uint256",name:"sourceTribeId",type:"uint256"},{internalType:"uint256",name:"targetTribeId",type:"uint256"},{internalType:"uint256",name:"requestTime",type:"uint256"},{internalType:"bool",name:"approved",type:"bool"}],internalType:"struct ITribeController.MergeRequest",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"getTribeAdmin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"getTribeConfigView",outputs:[{components:[{internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"},{internalType:"uint256",name:"entryFee",type:"uint256"},{components:[{internalType:"address",name:"nftContract",type:"address"},{internalType:"enum ITribeController.NFTType",name:"nftType",type:"uint8"},{internalType:"bool",name:"isMandatory",type:"bool"},{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],internalType:"struct ITribeController.NFTRequirement[]",name:"nftRequirements",type:"tuple[]"},{internalType:"bool",name:"canMerge",type:"bool"}],internalType:"struct ITribeController.TribeConfigView",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"getTribeWhitelist",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserTribes",outputs:[{internalType:"uint256[]",name:"tribeIds",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"}],name:"inviteCodes",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"isAddressWhitelisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"isMember",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"joinTribe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"bytes32",name:"inviteCode",type:"bytes32"}],name:"joinTribeWithCode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"nextMergeRequestId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTribeId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"member",type:"address"}],name:"rejectMember",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"sourceTribeId",type:"uint256"},{internalType:"uint256",name:"targetTribeId",type:"uint256"}],name:"requestMerge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"requestToJoinTribe",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"code",type:"string"}],name:"revokeInviteCode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract IRoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"newMetadata",type:"string"},{internalType:"address[]",name:"updatedWhitelist",type:"address[]"}],name:"updateTribe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"},{internalType:"uint256",name:"entryFee",type:"uint256"},{components:[{internalType:"address",name:"nftContract",type:"address"},{internalType:"enum ITribeController.NFTType",name:"nftType",type:"uint8"},{internalType:"bool",name:"isMandatory",type:"bool"},{internalType:"uint256",name:"minAmount",type:"uint256"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],internalType:"struct ITribeController.NFTRequirement[]",name:"nftRequirements",type:"tuple[]"}],name:"updateTribeConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"getTribeDetails",outputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadata",type:"string"},{internalType:"address",name:"admin",type:"address"},{internalType:"enum ITribeController.JoinType",name:"joinType",type:"uint8"},{internalType:"uint256",name:"entryFee",type:"uint256"},{internalType:"uint256",name:"memberCount",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"bool",name:"canMerge",type:"bool"}],internalType:"struct ITribeController.TribeDetails",name:"",type:"tuple"}],stateMutability:"view",type:"function"}],Lr=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_tribeController",type:"address"},{internalType:"address",name:"_pointSystem",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"collectibleId",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"}],name:"CollectibleClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"collectibleId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"uint256",name:"maxSupply",type:"uint256"}],name:"CollectibleCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"CollectibleDeactivated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"claimCollectible",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"collectibleCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"collectibleTribe",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"collectibles",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"pointsRequired",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"pointsRequired",type:"uint256"}],name:"createCollectible",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"deactivateCollectible",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"getCollectible",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"pointsRequired",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],internalType:"struct CollectibleController.Collectible",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pointSystem",outputs:[{internalType:"contract IPointSystem",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract IRoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pointSystem",type:"address"}],name:"setPointSystem",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"tribeController",outputs:[{internalType:"contract ITribeController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],Br=[{inputs:[{internalType:"string",name:"metadataURI",type:"string"},{internalType:"uint256",name:"maxTickets",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],name:"createEvent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"eventId",type:"uint256"}],name:"events",outputs:[{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"organizer",type:"address"},{internalType:"uint256",name:"maxTickets",type:"uint256"},{internalType:"uint256",name:"ticketsSold",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"eventId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"purchaseTickets",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"eventId",type:"uint256"}],name:"cancelEvent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],$r=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_verifier",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ECDSAInvalidSignature",type:"error"},{inputs:[{internalType:"uint256",name:"length",type:"uint256"}],name:"ECDSAInvalidSignatureLength",type:"error"},{inputs:[{internalType:"bytes32",name:"s",type:"bytes32"}],name:"ECDSAInvalidSignatureS",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"points",type:"uint256"},{indexed:!1,internalType:"uint256",name:"collectibleType",type:"uint256"}],name:"PointsRedeemed",type:"event"},{inputs:[{internalType:"uint256",name:"points",type:"uint256"},{internalType:"uint256",name:"collectibleType",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"redeemPoints",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newVerifier",type:"address"}],name:"setVerifier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"usedSignatures",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"verifier",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],_r=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"proposalDetails",type:"string"}],name:"ProposalCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!0,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"bool",name:"voteChoice",type:"bool"}],name:"VoteCasted",type:"event"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"proposalDetails",type:"string"}],name:"createProposal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"nextProposalId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"proposals",outputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"details",type:"string"},{internalType:"uint256",name:"voteCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"bool",name:"voteChoice",type:"bool"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"}],zr=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"assigner",type:"address"}],name:"FanAssignerAuthorized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"}],name:"RoleAssigned",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"ARTIST_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"BRAND_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"FAN_ASSIGNER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"FAN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MODERATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ORGANIZER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"assignFanRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"bytes32",name:"role",type:"bytes32"}],name:"assignRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"assigner",type:"address"}],name:"authorizeFanAssigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserRoles",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"bytes32[]",name:"roles",type:"bytes32[]"}],name:"hasAllRoles",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"bytes32[]",name:"roles",type:"bytes32[]"}],name:"hasAnyRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"bytes32",name:"role",type:"bytes32"}],name:"removeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Kr=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_tribeController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"superCommunityId",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!0,internalType:"address",name:"admin",type:"address"}],name:"SuperCommunityCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"superCommunityId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"}],name:"TribeJoinedSuperCommunity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"superCommunityId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"}],name:"TribeLeftSuperCommunity",type:"event"},{inputs:[{internalType:"uint256",name:"superCommunityId",type:"uint256"},{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"addTribeToSuperCommunity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadata",type:"string"},{internalType:"uint256[]",name:"initialTribeIds",type:"uint256[]"}],name:"createSuperCommunity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"superCommunityId",type:"uint256"}],name:"getSuperCommunityTribes",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"superCommunityId",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"isSuperCommunityMember",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextSuperCommunityId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"superCommunityId",type:"uint256"},{internalType:"uint256",name:"tribeId",type:"uint256"}],name:"removeTribeFromSuperCommunity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"superCommunities",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadata",type:"string"},{internalType:"address",name:"admin",type:"address"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"tribeController",outputs:[{internalType:"contract TribeController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tribeInSuperCommunity",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tribeSuperCommunity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"superCommunityId",type:"uint256"},{internalType:"string",name:"newName",type:"string"},{internalType:"string",name:"newMetadata",type:"string"}],name:"updateSuperCommunityMetadata",outputs:[],stateMutability:"nonpayable",type:"function"}],qr=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_tribeController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!1,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"uint256",name:"optionIndex",type:"uint256"}],name:"PollVoteSubmitted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!1,internalType:"address",name:"author",type:"address"},{indexed:!1,internalType:"enum ContentManager.PostType",name:"postType",type:"uint8"}],name:"PostCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"}],name:"PostDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!1,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"score",type:"uint256"}],name:"QuizAnswerSubmitted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"contentURI",type:"string"},{internalType:"string[]",name:"options",type:"string[]"},{internalType:"uint256",name:"duration",type:"uint256"}],name:"createPoll",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"contentURI",type:"string"},{internalType:"enum ContentManager.PostType",name:"postType",type:"uint8"}],name:"createPost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"contentURI",type:"string"},{internalType:"string[]",name:"questions",type:"string[]"},{internalType:"bytes32[]",name:"answerHashes",type:"bytes32[]"},{internalType:"uint256",name:"pointsPerQuestion",type:"uint256"},{internalType:"uint256",name:"duration",type:"uint256"}],name:"createQuiz",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"postId",type:"uint256"}],name:"deletePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"getPollOptions",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"uint256",name:"optionIndex",type:"uint256"}],name:"getPollVotes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"postId",type:"uint256"}],name:"getPost",outputs:[{components:[{internalType:"address",name:"author",type:"address"},{internalType:"string",name:"contentURI",type:"string"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"enum ContentManager.PostType",name:"postType",type:"uint8"}],internalType:"struct ContentManager.Post",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"getQuizQuestions",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"polls",outputs:[{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"postCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"posts",outputs:[{internalType:"address",name:"author",type:"address"},{internalType:"string",name:"contentURI",type:"string"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"enum ContentManager.PostType",name:"postType",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"quizzes",outputs:[{internalType:"uint256",name:"pointsPerQuestion",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract IRoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"uint256",name:"optionIndex",type:"uint256"}],name:"submitPollVote",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"string[]",name:"answers",type:"string[]"}],name:"submitQuizAnswers",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"tribeController",outputs:[{internalType:"contract ITribeController",name:"",type:"address"}],stateMutability:"view",type:"function"}],Wr=[{inputs:[{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_tribeController",type:"address"},{internalType:"address",name:"_collectibleController",type:"address"},{internalType:"address",name:"_feedManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[],name:"AlreadyInteracted",type:"error"},{inputs:[],name:"AlreadyReported",type:"error"},{inputs:[],name:"CannotInteractWithOwnPost",type:"error"},{inputs:[],name:"CooldownActive",type:"error"},{inputs:[{internalType:"string",name:"field",type:"string"}],name:"EmptyField",type:"error"},{inputs:[],name:"EmptyMetadata",type:"error"},{inputs:[],name:"EnforcedPause",type:"error"},{inputs:[],name:"ExpectedPause",type:"error"},{inputs:[],name:"InsufficientAccess",type:"error"},{inputs:[],name:"InvalidCollectible",type:"error"},{inputs:[],name:"InvalidCollectibleContract",type:"error"},{inputs:[],name:"InvalidEncryptionKey",type:"error"},{inputs:[],name:"InvalidJsonFormat",type:"error"},{inputs:[],name:"InvalidParentPost",type:"error"},{inputs:[],name:"InvalidPostType",type:"error"},{inputs:[],name:"InvalidSigner",type:"error"},{inputs:[],name:"MissingContentField",type:"error"},{inputs:[],name:"MissingTitleField",type:"error"},{inputs:[],name:"NotPostCreator",type:"error"},{inputs:[],name:"NotTribeAdmin",type:"error"},{inputs:[],name:"NotTribeMember",type:"error"},{inputs:[],name:"PostDeleted",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"uint256[]",name:"postIds",type:"uint256[]"}],name:"BatchPostsCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"metadata",type:"string"},{indexed:!1,internalType:"bytes32",name:"encryptionKeyHash",type:"bytes32"},{indexed:!1,internalType:"address",name:"accessSigner",type:"address"}],name:"EncryptedPostCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"metadata",type:"string"}],name:"PostCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"deleter",type:"address"}],name:"PostDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"enum IPostMinter.InteractionType",name:"interactionType",type:"uint8"}],name:"PostInteraction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"reporter",type:"address"},{indexed:!1,internalType:"string",name:"reason",type:"string"}],name:"PostReported",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"},{indexed:!1,internalType:"uint256",name:"cooldown",type:"uint256"}],name:"PostTypeCooldownUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"updater",type:"address"},{indexed:!1,internalType:"string",name:"metadata",type:"string"}],name:"PostUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"metadata",type:"string"},{indexed:!1,internalType:"bytes32",name:"encryptionKeyHash",type:"bytes32"},{indexed:!1,internalType:"address",name:"accessSigner",type:"address"},{indexed:!1,internalType:"address",name:"collectibleContract",type:"address"},{indexed:!1,internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"SignatureGatedPostCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tribeId",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"keyHash",type:"bytes32"}],name:"TribeKeyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"viewer",type:"address"}],name:"ViewerAuthorized",type:"event"},{inputs:[],name:"BATCH_POST_COOLDOWN",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_BATCH_POSTS",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"PROJECT_CREATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"RATE_LIMIT_MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"REPORT_THRESHOLD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"address",name:"viewer",type:"address"}],name:"authorizeViewer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"address",name:"viewer",type:"address"}],name:"canViewPost",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"collectibleController",outputs:[{internalType:"contract ICollectibleController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{components:[{internalType:"string",name:"metadata",type:"string"},{internalType:"bool",name:"isGated",type:"bool"},{internalType:"address",name:"collectibleContract",type:"address"},{internalType:"uint256",name:"collectibleId",type:"uint256"},{internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"}],internalType:"struct IPostMinter.BatchPostData[]",name:"posts",type:"tuple[]"}],name:"createBatchPosts",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"},{internalType:"bytes32",name:"encryptionKeyHash",type:"bytes32"},{internalType:"address",name:"accessSigner",type:"address"}],name:"createEncryptedPost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"},{internalType:"bool",name:"isGated",type:"bool"},{internalType:"address",name:"collectibleContract",type:"address"},{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"createPost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"parentPostId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"},{internalType:"bool",name:"isGated",type:"bool"},{internalType:"address",name:"collectibleContract",type:"address"},{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"createReply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"},{internalType:"bytes32",name:"encryptionKeyHash",type:"bytes32"},{internalType:"address",name:"accessSigner",type:"address"},{internalType:"address",name:"collectibleContract",type:"address"},{internalType:"uint256",name:"collectibleId",type:"uint256"}],name:"createSignatureGatedPost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"deletePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"member",type:"address"}],name:"deriveSharedKey",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"feedManager",outputs:[{internalType:"contract PostFeedManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"generatePostKey",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBatchPostingLimits",outputs:[{internalType:"uint256",name:"maxBatchSize",type:"uint256"},{internalType:"uint256",name:"batchCooldown",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"offset",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"}],name:"getFeedForUser",outputs:[{internalType:"uint256[]",name:"postIds",type:"uint256[]"},{internalType:"uint256",name:"total",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"enum IPostMinter.InteractionType",name:"interactionType",type:"uint8"}],name:"getInteractionCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"getPost",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"},{internalType:"bool",name:"isGated",type:"bool"},{internalType:"address",name:"collectibleContract",type:"address"},{internalType:"uint256",name:"collectibleId",type:"uint256"},{internalType:"bool",name:"isEncrypted",type:"bool"},{internalType:"address",name:"accessSigner",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"address",name:"viewer",type:"address"}],name:"getPostDecryptionKey",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"getPostReplies",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"}],name:"getPostTypeCooldown",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"uint256",name:"offset",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"}],name:"getPostsByTribe",outputs:[{internalType:"uint256[]",name:"postIds",type:"uint256[]"},{internalType:"uint256",name:"total",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"offset",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"}],name:"getPostsByTribeAndUser",outputs:[{internalType:"uint256[]",name:"postIds",type:"uint256[]"},{internalType:"uint256",name:"total",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"offset",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"}],name:"getPostsByUser",outputs:[{internalType:"uint256[]",name:"postIds",type:"uint256[]"},{internalType:"uint256",name:"total",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"}],name:"getRemainingCooldown",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"enum IPostMinter.InteractionType",name:"interactionType",type:"uint8"}],name:"interactWithPost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastBatchTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"enum IPostMinter.PostType",name:"",type:"uint8"}],name:"lastPostTimeByType",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextPostId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum IPostMinter.PostType",name:"",type:"uint8"}],name:"postTypeCooldowns",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"reportCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"string",name:"reason",type:"string"}],name:"reportPost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract IRoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"},{internalType:"uint256",name:"cooldown",type:"uint256"}],name:"setPostTypeCooldown",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tribeId",type:"uint256"},{internalType:"bytes32",name:"encryptionKey",type:"bytes32"}],name:"setTribeEncryptionKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"tribeController",outputs:[{internalType:"contract ITribeController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tribeEncryptionKeys",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"string",name:"metadata",type:"string"}],name:"updatePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"metadata",type:"string"},{internalType:"enum IPostMinter.PostType",name:"postType",type:"uint8"}],name:"validateMetadata",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"address",name:"viewer",type:"address"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"verifyPostAccess",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],ye={ProfileNFTMinter:Or,TribeController:Rr,CollectibleController:Lr,EventController:Br,CommunityPoints:$r,Voting:_r,RoleManager:zr,SuperCommunityController:Kr,ContentManager:qr,PostMinter:Wr},ht={[z.id]:{ROLE_MANAGER:"0x153777B9Cb7323a911E5D3E3132B3f1158bd71BE",PROFILE_NFT_MINTER:"0xFF65e7c1dD05df41e74a5b04c9958BbD661E1B0c",TRIBE_CONTROLLER:"0x16C4F870B59E55bB80A620547987Bd9302FC567d",COLLECTIBLE_CONTROLLER:"0x5dC8e5A38dC1edDC51aFae4FA27b7E32147D9895",EVENT_CONTROLLER:"0x77B123A5dA78c9C33E28ed20aC984dF41693a024",SUPER_COMMUNITY_CONTROLLER:"0x85083329E71b77430f9b7Cf7F4d17b5f9ff81290",COMMUNITY_POINTS:"0x3F1F0811E2d83003e085Ba812eC7a331795032dE",VOTING:"0xC27B7754950fa8554Cb588A7Aa04d406Ad639094",CONTENT_MANAGER:"0x4c1B99D32A3671a35c3229cb3647d080CFb94380",POST_MINTER:"0x5053a6C1c144Db7F876F7b898943b831cf3Fd817"},[ee.id]:{ROLE_MANAGER:"0x661C2B7f1C3EC1ACEeA2c02818459061D40823bD",PROFILE_NFT_MINTER:"0x6fB6B1DDD4EA6640e04D70979C57E9C01c7b974a",TRIBE_CONTROLLER:"0x54812005171F747f5E69afA08989F41Cf06eeE48",COLLECTIBLE_CONTROLLER:"0xFD4E7c9AbEab99C9d23605519A883F1a3814595b",EVENT_CONTROLLER:"0xF4515E673EF9ED006dbFAF702A87Cd579b128f37",SUPER_COMMUNITY_CONTROLLER:"0x214653d9Cc9bbd148B0A1Fc833867c2cE8A0e609",COMMUNITY_POINTS:"0xdcF66412c2F2E76938Ed4F991f350Eb4CEA0c377",VOTING:"0xFCF9C955fB3A4B137E9526E1De979c67c9a7b45B",CONTENT_MANAGER:"0x8fa7A72aAB8595E0EA48bDd0A26e7c1b7F72B362",POST_MINTER:"0x58a1F6A010Eb711f5e564C073fC24bDa4AFA2392"}},Gr=s=>{const n=ht[s];return n||(console.warn(`No contract addresses found for chain ${s}, falling back to Monad Devnet`),ht[z.id])},vs=s=>{const n=be.find(t=>t.id===s);return n||(console.warn(`Chain ${s} not supported, falling back to Monad Devnet`),z)};function Jr(s=z.id){return Gr(s)}function se(s=z.id){const n=vs(s);return En({chain:n,transport:qs()})}async function st(s=z.id){const n=window.ethereum;if(!n)throw new Error("No provider available");const t=vs(s),[r]=await n.request({method:"eth_requestAccounts"});return Ys({account:r,chain:t,transport:Qs(n)})}function K(s=z.id){const n=Jr(s);return{profileNFTMinter:{address:n.PROFILE_NFT_MINTER,abi:ye.ProfileNFTMinter},tribesContract:{address:n.TRIBE_CONTROLLER,abi:ye.TribeController},tribeController:{address:n.TRIBE_CONTROLLER,abi:ye.TribeController},collectibleController:{address:n.COLLECTIBLE_CONTROLLER,abi:ye.CollectibleController},eventController:{address:n.EVENT_CONTROLLER,abi:ye.EventController},communityPoints:{address:n.COMMUNITY_POINTS,abi:ye.CommunityPoints},voting:{address:n.VOTING,abi:ye.Voting},roleManager:{address:n.ROLE_MANAGER,abi:ye.RoleManager},superCommunityController:{address:n.SUPER_COMMUNITY_CONTROLLER,abi:ye.SuperCommunityController},contentManager:{address:n.CONTENT_MANAGER,abi:ye.ContentManager},postMinter:{address:n.POST_MINTER,abi:ye.PostMinter}}}const de=se,pe=K,le=async()=>{try{const s=await Ve();if(!s)return console.warn("No provider available, using Monad Devnet"),z.id;try{const n=await s.request({method:"eth_chainId"});if(n){const t=parseInt(n,16);return be.some(a=>a.id===t)?t:(console.warn(`Chain ID ${t} not supported, using Monad Devnet`),z.id)}}catch(n){console.warn("Failed to get chainId via request method:",n)}return s.chainId?typeof s.chainId=="string"?parseInt(s.chainId,16):Number(s.chainId):(console.warn("Could not determine chain ID, using Monad Devnet"),z.id)}catch(s){return console.error("Error getting current chain ID:",s),z.id}},ws=s=>{const n=be.find(t=>t.id===s);if(!n)throw new Error(`Chain ID ${s} is not supported`);return n},Hr=async(s,n,t)=>{try{const{tribeController:r}=pe(s),a=await t.getLogs({address:r.address,event:{type:"event",name:"TribeCreated",inputs:[{type:"uint256",name:"tribeId",indexed:!0},{type:"address",name:"creator",indexed:!0},{type:"string",name:"name"},{type:"string",name:"metadata"}]},args:{tribeId:BigInt(n)},fromBlock:"earliest",toBlock:"latest"});return a&&a.length>0&&a[0].args.metadata||"{}"}catch(r){return console.error("Error extracting metadata from transaction:",r),"{}"}},As=async(s,n)=>await de(n).waitForTransactionReceipt({hash:s}),he={connect:async()=>{try{const s=await Ve();if(!s)throw new Error("No provider available");return await s.request({method:"eth_requestAccounts"}),!0}catch(s){throw console.error("Error connecting to blockchain:",s),s}},getAddress:async()=>{try{const s=await Ve();if(!s||!s.selectedAddress)throw new Error("No wallet connected");return s.selectedAddress}catch(s){throw console.error("Error getting wallet address:",s),s}},getCurrentChainId:le,getChainId:le,getProvider:async()=>Ve(),getSigner:async()=>{const s=await Ve();if(!s)throw new Error("No provider available");return{address:s.selectedAddress,signMessage:async n=>await s.request({method:"personal_sign",params:[n,s.selectedAddress]})}},createTribePost:async s=>{try{const n=await le(),t=pe(n),r=de(n);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(n){throw console.error("Error creating tribe post:",n),n}},getTribePost:async(s,n)=>{try{console.log(`Getting post ${n} from tribe ${s}`);const t=await le(),r=pe(t),a=de(t);return{id:n,content:"Sample post content",title:"Sample Post",author:"0x0000000000000000000000000000000000000000",timestamp:Math.floor(Date.now()/1e3),likes:0,comments:[],metadata:"{}"}}catch(t){return console.error("Error getting tribe post:",t),null}},voteOnPoll:async(s,n,t)=>{try{console.log(`Voting on poll ${n} in tribe ${s}, option ${t}`);const r=await le(),a=pe(r),i=de(r);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(r){throw console.error("Error voting on poll:",r),r}},rsvpToEvent:async(s,n,t)=>{try{console.log(`RSVP to event ${n} in tribe ${s}, attending: ${t}`);const r=await le(),a=pe(r),i=de(r);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(r){throw console.error("Error RSVPing to event:",r),r}},likePost:async(s,n)=>{try{console.log(`Liking post ${n} in tribe ${s}`);const t=await le(),r=pe(t),a=de(t);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(t){throw console.error("Error liking post:",t),t}},commentOnPost:async(s,n,t)=>{try{console.log(`Commenting on post ${n} in tribe ${s}`);const r=await le(),a=pe(r),i=de(r);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(r){throw console.error("Error commenting on post:",r),r}},updatePostMetadata:async(s,n,t)=>{try{console.log(`Updating metadata for post ${n} in tribe ${s}`);const r=await le(),a=pe(r),i=de(r);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(r){throw console.error("Error updating post metadata:",r),r}},getProfileByTokenId:async s=>{try{console.log(`Getting profile for token ID ${s}`);const n=await le(),t=pe(n),r=de(n);return{tokenId:s,username:`user_${s}`,metadata:"{}",owner:"0x0000000000000000000000000000000000000000",profile:[`user_${s}`,"{}"]}}catch(n){return console.error("Error getting profile by token ID:",n),null}},mintProfile:async({username:s,metadataURI:n})=>{try{console.log(`Minting profile for username ${s}`);const t=await le(),r=pe(t),a=de(t);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(t){throw console.error("Error minting profile:",t),t}},updateProfile:async({tokenId:s,metadata:n})=>{try{console.log(`Updating profile for token ID ${s}`);const t=await le(),r=pe(t),a=de(t);return`0x${Math.random().toString(16).substring(2).padStart(64,"0")}`}catch(t){throw console.error("Error updating profile:",t),t}},usernameExists:async s=>{try{console.log(`Checking if username ${s} exists`);const n=await le(),t=pe(n),r=de(n);return!1}catch(n){throw console.error("Error checking if username exists:",n),n}},getProfileIdByUsername:async s=>{try{return console.log(`Getting profile ID for username ${s}`),0}catch(n){throw console.error("Error getting profile ID by username:",n),n}},getProfileByAddress:async s=>{try{console.log(`Getting profile for address ${s}`);const n=await le(),t=pe(n),r=de(n);return{tokenId:1,username:"user",metadata:"{}",owner:s,profile:["user","{}"]}}catch(n){return console.error("Error getting profile by address:",n),null}}};let es=null;async function Ms(){if(!window.ethereum)throw new Error("MetaMask is not installed");return es||(es=new vn(window.ethereum)),await es.send("eth_requestAccounts",[]),es}function wt(){es=null}typeof window<"u"&&window.ethereum&&(window.ethereum.on("chainChanged",()=>{wt()}),window.ethereum.on("accountsChanged",()=>{wt()}));const je="tribes_auth_state",Xr=24*60*60*1e3,Os=s=>!!s&&typeof s.address=="string"&&s.address.startsWith("0x")&&typeof s.chainId=="number"&&s.chainId>0&&typeof s.timestamp=="number"&&Date.now()-s.timestamp<=Xr;function js(){const[s,n]=p.useState(()=>{try{const c=localStorage.getItem(je);if(c){const x=JSON.parse(c);if(Os(x))return x.address;localStorage.removeItem(je)}}catch(c){console.error("Error loading auth state:",c),localStorage.removeItem(je)}return null}),[t,r]=p.useState(()=>{try{const c=localStorage.getItem(je);if(c){const x=JSON.parse(c);if(Os(x))return x.chainId}}catch(c){console.error("Error loading chain ID:",c)}return null}),[a,i]=p.useState(()=>!!s&&!!t),[o,l]=p.useState(()=>{var c,x;try{const k=localStorage.getItem(je);if(k){const v=JSON.parse(k);if(Os(v)&&v.profile){const N={avatar:((c=v.profile.metadata)==null?void 0:c.uri)||"",bio:"",createdAt:Date.now()};return{tokenId:BigInt(v.profile.tokenId||"0"),username:v.profile.username,metadata:N,nftUri:((x=v.profile.metadata)==null?void 0:x.uri)||"",owner:v.address}}}}catch(k){console.error("Error loading profile:",k)}return null}),[u,h]=p.useState(!1),d=p.useRef(!1),b=p.useRef(!1);p.useEffect(()=>{if(typeof window<"u"&&window.ethereum){const c=x=>{r(parseInt(x,16))};return window.ethereum.on("chainChanged",c),()=>{window.ethereum.removeListener("chainChanged",c)}}},[]),p.useEffect(()=>{if(typeof window<"u"&&window.ethereum){const c=x=>{x.length===0?w():x[0]!==s&&(n(x[0]),g(x[0]))};return window.ethereum.on("accountsChanged",c),()=>{window.ethereum.removeListener("accountsChanged",c)}}},[s]),p.useEffect(()=>{let c=!0;return(async()=>{if(!(d.current||u))try{h(!0),d.current=!0;const k=await Ve();if(!k||!c)return;try{const v=await k.request({method:"eth_chainId"}),N=parseInt(v,16);r(N)}catch(v){console.error("Error getting chain ID:",v);return}k.selectedAddress&&(typeof window<"u"&&window.ethereum&&!b.current&&(await Ms(),b.current=!0),n(k.selectedAddress),i(!0),!o&&c&&await g(k.selectedAddress))}catch(k){console.error("Error in initialization:",k)}finally{c&&h(!1)}})(),()=>{c=!1,d.current=!1}},[]),p.useEffect(()=>{if(!u&&s&&t){const c={address:s,chainId:t};o&&(c.profile={tokenId:o.tokenId.toString(),username:o.username,metadata:{uri:o.nftUri||""}}),f(c)}},[s,t,o,u]);const f=c=>{try{const x=localStorage.getItem(je),k=x?JSON.parse(x):null,v={address:c.address||(k==null?void 0:k.address)||"",chainId:c.chainId||(k==null?void 0:k.chainId)||0,profile:c.profile||(k==null?void 0:k.profile),timestamp:Date.now()};v.address&&(localStorage.setItem(je,JSON.stringify(v)),localStorage.setItem("tribes_auth",JSON.stringify({isConnected:!0,address:v.address,chainId:v.chainId})),v.profile&&localStorage.setItem("tribes_profile",JSON.stringify(v.profile)))}catch(x){console.error("Failed to save auth state:",x)}},m=async()=>{try{if(u)return;h(!0),typeof window<"u"&&window.ethereum&&await Ms();const c=await Ve();if(!c)throw new Error("No provider found");await c.request({method:"eth_requestAccounts"});const x=c.selectedAddress;if(!x)throw new Error("No address found");n(x),i(!0),await g(x)}catch(c){throw console.error("Error connecting wallet:",c),c}finally{h(!1)}},w=()=>{n(null),i(!1),l(null),localStorage.removeItem(je),localStorage.removeItem("tribes_auth"),localStorage.removeItem("tribes_profile"),localStorage.removeItem("redirect_attempts")},g=async c=>{try{typeof window<"u"&&window.ethereum&&await Ms();const x=await he.getProfileByAddress(c);if(!x)return null;if(x.profile){const[k,v]=x.profile;let N;try{N=JSON.parse(v)}catch{N={avatar:"",bio:"",createdAt:Date.now()}}const C={tokenId:BigInt(0),username:k,metadata:N,nftUri:N.avatar||"",owner:c};return l(C),C}return null}catch(x){return console.error("Error fetching profile:",x),null}};return{address:s,isConnected:a,profile:o,connect:m,disconnect:w,fetchProfile:g,chainId:t}}const Pe=()=>{const{chain:s}=Zs(),{chains:n}=kn(),t=i=>i?be.some(o=>o.id===i):!1,r=t(s==null?void 0:s.id),a=async i=>{var o;if(!window.ethereum)throw new Error("No ethereum provider found");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${i.toString(16)}`}]})}catch(l){if(l.code===4902){const u=be.find(h=>h.id===i);if(!u)throw new Error(`Chain ID ${i} is not supported`);await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${i.toString(16)}`,chainName:u.name,nativeCurrency:u.nativeCurrency,rpcUrls:u.rpcUrls.default.http,blockExplorerUrls:[(o=u.blockExplorers)==null?void 0:o.default.url]}]})}else throw l}};return{chainId:s==null?void 0:s.id,isSupported:t,isCorrectNetwork:r,switchNetwork:a}};function tt({onMenuClick:s}){const n=ce(),t=Ps(),{disconnect:r}=js(),{chainId:a,switchNetwork:i}=Pe(),[o,l]=W.useState(!1);if(["/connect"].includes(t.pathname))return null;const u=()=>{r(),n("/connect"),l(!1)},h=()=>{n("/dashboard")},d=()=>a===z.id?"Monad Devnet":a===ee.id?"Flash Testnet":"Unsupported Chain",b=()=>a===z.id?"/monad-white.svg":a===ee.id?"/fuse-white.svg":"/monad-white.svg",f=()=>a===z.id?"Monad Logo":a===ee.id?"Fuse Logo":"Chain Logo",w=a===z.id?"monad-purple":a===ee.id?"fuse-orange":"monad-purple";return e.jsxDEV("nav",{className:"sticky top-0 z-50 shadow-sm",style:{backgroundColor:"var(--chain-bg)"},children:e.jsxDEV("div",{className:"flex items-center justify-between p-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("button",{onClick:s,className:"md:hidden text-text-primary",children:e.jsxDEV(Tn,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:83,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:82,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:h,"aria-label":"Go to Dashboard",children:[e.jsxDEV("img",{src:b(),alt:f(),className:"w-8 h-8"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:90,columnNumber:13},this),e.jsxDEV("span",{className:"text-lg font-bold font-['Inter'] text-text-primary",children:"Tribes"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:95,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:85,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:81,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("button",{onClick:()=>l(!o),className:"flex items-center space-x-2 px-3 py-1.5 rounded-full bg-black/20 hover:bg-theme-primary/5 text-text-primary",children:[e.jsxDEV("div",{className:"w-5 h-5 rounded-full bg-theme-primary flex items-center justify-center text-text-primary text-xs font-bold",children:a===z.id?"M":"F"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:105,columnNumber:15},this),e.jsxDEV("span",{children:d()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:108,columnNumber:15},this),e.jsxDEV(Un,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:109,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:101,columnNumber:13},this),o&&e.jsxDEV("div",{className:"absolute top-full mt-2 right-0 w-48 backdrop-blur-sm rounded-xl shadow-lg",style:{backgroundColor:"var(--chain-bg)",opacity:.9},children:[e.jsxDEV("button",{onClick:()=>{i(z.id),l(!1)},className:`w-full flex items-center space-x-2 px-4 py-3 hover:bg-theme-primary/5 text-text-primary text-left ${a===z.id?"bg-theme-primary/10":""}`,children:[e.jsxDEV("div",{className:"w-5 h-5 rounded-full bg-theme-primary flex items-center justify-center text-xs font-bold",children:"M"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:124,columnNumber:19},this),e.jsxDEV("span",{children:"Switch to Monad"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:127,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:117,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>{i(ee.id),l(!1)},className:`w-full flex items-center space-x-2 px-4 py-3 hover:bg-theme-primary/5 text-text-primary text-left ${a===ee.id?"bg-theme-primary/10":""}`,children:[e.jsxDEV("div",{className:"w-5 h-5 rounded-full bg-theme-primary flex items-center justify-center text-xs font-bold",children:"F"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:136,columnNumber:19},this),e.jsxDEV("span",{children:"Switch to Flash"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:139,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:129,columnNumber:17},this),e.jsxDEV("button",{onClick:u,className:"w-full flex items-center space-x-2 px-4 py-3 text-error-main hover:bg-black/20",children:[e.jsxDEV(Pn,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:145,columnNumber:19},this),e.jsxDEV("span",{children:"Disconnect"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:146,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:141,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:113,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:100,columnNumber:11},this),e.jsxDEV("button",{className:`w-8 h-8 flex items-center justify-center text-text-primary hover:text-${w}`,children:e.jsxDEV(jn,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:152,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:151,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:99,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:80,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Navigation.tsx",lineNumber:79,columnNumber:5},this)}var S=(s=>(s[s.TEXT=0]="TEXT",s[s.IMAGE=1]="IMAGE",s[s.VIDEO=2]="VIDEO",s[s.LINK=3]="LINK",s[s.EVENT=4]="EVENT",s[s.POLL=5]="POLL",s))(S||{});const xt=async s=>{try{const n=JSON.stringify(Yr(s)),t=parseInt(s.tribeId),r=await he.createTribePost({tribeId:t,metadata:n,postType:s.type,content:s.content}),a=`post-${Date.now()}`;return{hash:r,postId:a}}catch(n){throw console.error("Error creating blockchain post:",n),n}},Yr=s=>{var t,r,a;const n={title:s.title||"",content:s.content,type:s.type,tags:s.tags||[],createdAt:new Date().toISOString()};switch(s.type){case"EVENT":return{...n,eventDetails:s.eventDetails,event:{title:s.title||"",startDate:(t=s.eventDetails)==null?void 0:t.startDate,endDate:(r=s.eventDetails)==null?void 0:r.endDate,location:(a=s.eventDetails)==null?void 0:a.location}};case"POLL":return{...n,pollDetails:s.pollDetails};case"PROJECT":return{...n,projectDetails:s.projectDetails};case"RESOURCE":return{...n,resourceDetails:s.resourceDetails};case"RICH_MEDIA":return{...n,mediaContent:s.mediaContent};case"COMMUNITY_UPDATE":return{...n,isPremium:s.isPremium||!1};default:return n}},Rs={loading:!1,creatingPost:!1,error:null,posts:[],draft:{type:"TEXT",content:"",tribeId:"",title:"",description:"",tags:[],mediaContent:[]},pendingPosts:[]},Qr=s=>{var n,t,r;if(!((n=s.content)!=null&&n.trim()))return{valid:!1,error:"Content is required"};switch(s.type){case"EVENT":if(s.eventDetails&&!s.eventDetails.startDate)return{valid:!1,error:"Event start date is required"};break;case"POLL":if(!((r=(t=s.pollDetails)==null?void 0:t.options)!=null&&r.length))return{valid:!1,error:"Poll options are required"};break}return{valid:!0}},Zr=s=>{var t;return{type:typeof s.type=="string"?s.type==="TEXT"?S.TEXT:s.type==="IMAGE"?S.IMAGE:s.type==="VIDEO"?S.VIDEO:s.type==="LINK"?S.LINK:s.type==="EVENT"?S.EVENT:s.type==="POLL"?S.POLL:S.TEXT:S.TEXT,content:s.content,title:s.title||"",description:s.description||"",tags:s.tags||[],media:((t=s.mediaContent)==null?void 0:t.map(r=>({url:r.url,type:r.type,width:r.width,height:r.height})))||[],event:s.type==="EVENT"&&s.eventDetails?{title:s.eventDetails.title||s.title||"",startDate:s.eventDetails.startDate,endDate:s.eventDetails.endDate,location:s.eventDetails.location}:void 0,poll:s.type==="POLL"&&s.pollDetails?{question:s.title||"Poll",options:Array.isArray(s.pollDetails.options)?typeof s.pollDetails.options[0]=="string"?s.pollDetails.options:s.pollDetails.options.map(r=>r.text||r.toString()):[],endDate:s.pollDetails.endDate}:void 0,createdAt:new Date().toISOString()}},gs=Ft("posts/create",async(s,{rejectWithValue:n})=>{try{const t=Qr(s);if(!t.valid)return n(t.error||"Invalid post data");let r="0x0000000000000000000000000000000000000000000000000000000000000000";try{if(s.type==="EVENT"&&s.eventDetails){console.log("Creating event post with details:",s.eventDetails);const i=await xt(s);r=i.hash,console.log("Created event post:",i)}else r=(await xt(s)).hash}catch(i){return console.error("Error creating blockchain post:",i),n("Failed to create post on blockchain")}return{id:`temp-${Date.now()}`,content:s.content,author:"0x0000000000000000000000000000000000000000",tribeId:parseInt(s.tribeId||"0"),type:typeof s.type=="string"?s.type==="TEXT"?S.TEXT:s.type==="IMAGE"?S.IMAGE:s.type==="VIDEO"?S.VIDEO:s.type==="LINK"?S.LINK:s.type==="EVENT"?S.EVENT:s.type==="POLL"?S.POLL:S.TEXT:S.TEXT,createdAt:Date.now(),metadata:Zr(s),stats:{viewCount:0,shareCount:0,saveCount:0,commentCount:0,likeCount:0}}}catch(t){return console.error("Error in createPost thunk:",t),n("An unexpected error occurred while creating the post")}}),Ls=Ft("posts/fetchByTribe",async(s,{rejectWithValue:n})=>{try{await new Promise(r=>setTimeout(r,500));const t=[];for(let r=0;r<5;r++){const a=["TEXT","EVENT","POLL","IMAGE","VIDEO"][r%5],i=a==="TEXT"?S.TEXT:a==="IMAGE"?S.IMAGE:a==="VIDEO"?S.VIDEO:a==="LINK"?S.LINK:a==="EVENT"?S.EVENT:a==="POLL"?S.POLL:S.TEXT,o={id:`post-${r}-${Date.now()}`,content:`This is post #${r} content with some text content.`,author:"0x0000000000000000000000000000000000000000",createdAt:Date.now()-r*864e5,type:i,tribeId:parseInt(s),metadata:{type:i,content:`This is post #${r} content with some text content.`,title:`Post #${r}`,description:`This is a ${a} post #${r}`,tags:[],createdAt:new Date(Date.now()-r*864e5).toISOString(),event:a==="EVENT"?{title:`Event #${r}`,startDate:new Date(Date.now()+864e5).toISOString(),endDate:new Date(Date.now()+9e7).toISOString(),location:"Virtual"}:void 0,poll:a==="POLL"?{question:`Poll Question #${r}`,options:["Option 1","Option 2"],endDate:new Date(Date.now()+864e5).toISOString()}:void 0},stats:{viewCount:Math.floor(Math.random()*500),shareCount:Math.floor(Math.random()*10),saveCount:Math.floor(Math.random()*5),commentCount:Math.floor(Math.random()*20),likeCount:Math.floor(Math.random()*50)}};t.push(o)}return t}catch{return n("Failed to fetch posts")}}),Zt=At({name:"posts",initialState:Rs,reducers:{setCreatingPost:(s,n)=>{s.creatingPost=n.payload},setPostType:(s,n)=>{s.draft.type=typeof n.payload=="string"?n.payload:S[n.payload]},updateDraft:(s,n)=>{s.draft={...s.draft,...n.payload}},resetDraft:s=>{s.draft=Rs.draft},updatePostStatus:(s,n)=>{const{txHash:t,confirmed:r,postId:a}=n.payload,i=s.posts.find(o=>{if(o.metadata){const l=o.metadata.blockchainData;return(l==null?void 0:l.txHash)===t}return!1});if(i&&i.metadata){const o=i.metadata.blockchainData;o?o.confirmed=r:i.metadata.blockchainData={txHash:t,confirmed:r},a&&(i.id=a)}r&&(s.pendingPosts=s.pendingPosts.filter(o=>o!==t))}},extraReducers:s=>{s.addCase(gs.pending,n=>{n.loading=!0,n.error=null}).addCase(gs.fulfilled,(n,t)=>{n.loading=!1,n.posts.unshift(t.payload),n.creatingPost=!1,n.draft=Rs.draft}).addCase(gs.rejected,(n,t)=>{n.loading=!1,n.error=t.payload}).addCase(Ls.pending,n=>{n.loading=!0,n.error=null}).addCase(Ls.fulfilled,(n,t)=>{n.loading=!1,n.posts=t.payload}).addCase(Ls.rejected,(n,t)=>{n.loading=!1,n.error=t.payload})}}),{setCreatingPost:rs,setPostType:ea,updateDraft:Ce,resetDraft:Nt,updatePostStatus:ui}=Zt.actions,en=s=>s.posts.draft,sn=s=>s.posts.creatingPost,sa=s=>s.posts.error,ta=Zt.reducer,ls=()=>{const{address:s,isConnected:n}=Zs(),{chainId:t}=Pe(),{connectAsync:r}=Cn(),{disconnectAsync:a}=Vn(),[i,o]=p.useState(null);p.useEffect(()=>{(async()=>{if(n&&window.ethereum)try{console.log("[useWallet] Initializing wallet client with ethereum provider");const d=Ys({transport:Qs(window.ethereum)});console.log("[useWallet] Wallet client created:",{hasClient:!!d,hasAccount:!!d.account,address:s}),o(d)}catch(d){console.error("[useWallet] Failed to initialize wallet client:",d)}else n||o(null)})()},[n,s]);const l=p.useCallback(async()=>{try{if(!window.ethereum)throw new Error("No ethereum provider found");await r({connector:In()})}catch(h){console.error("Failed to connect wallet:",h)}},[r]),u=p.useCallback(async()=>{try{await a(),o(null)}catch(h){console.error("Failed to disconnect wallet:",h)}},[a]);return{address:s,isConnected:n,chainId:t,walletClient:i,connectWallet:l,disconnectWallet:u}},yt=(s,n)=>{try{return!s||s==="{}"?n:JSON.parse(s)}catch(t){return console.error("Error parsing metadata:",t),n}},Gs={},na=5*60*1e3,ra=s=>{const n=Gs[s];if(n){if(Date.now()-n.timestamp>na){delete Gs[s];return}return n}},aa=(s,n,t)=>{Gs[s]={data:n,metadata:t,timestamp:Date.now()}};var ue=(s=>(s.CONNECTION_ERROR="CONNECTION_ERROR",s.VALIDATION_ERROR="VALIDATION_ERROR",s.CONTRACT_ERROR="CONTRACT_ERROR",s.BLOCKCHAIN_ERROR="BLOCKCHAIN_ERROR",s.ALREADY_EXISTS="ALREADY_EXISTS",s.NOT_FOUND="NOT_FOUND",s.UNAUTHORIZED="UNAUTHORIZED",s.UNKNOWN="UNKNOWN",s))(ue||{});function oa(s,n){var f,m,w;console.log("Original tribeData before mapping:",JSON.stringify({...s,entryFee:((f=s.entryFee)==null?void 0:f.toString())||"0"}));let t={};if(typeof s.metadata=="string"&&s.metadata)try{t=JSON.parse(s.metadata),console.log("Successfully parsed metadata string for tribe",s.id,":",t)}catch(g){console.error(`Failed to parse tribe ${s.id} metadata:`,g)}else typeof s.metadata=="object"&&s.metadata!==null&&(t=s.metadata,console.log("Using metadata object directly for tribe",s.id,":",t));const r=s.name||"",a=(t==null?void 0:t.name)||(t==null?void 0:t.displayName)||"",i=s.id.toString();console.log(`Tribe ${i} name sources:`,{contractName:r,metadataName:a,rawMetadataString:typeof s.metadata=="string"?s.metadata.length>100?`${s.metadata.substring(0,100)}...`:s.metadata:"Not a string"});let o;const l=!r||r===`Tribe ${i}`||r.trim()==="",u=a&&a.trim()!=="";l?u?(o=a.trim(),console.log(`Using metadata name for tribe ${i}: "${o}"`)):(o=`Tribe #${i}`,console.log(`Using default name for tribe ${i}: "${o}"`)):(o=r.trim(),console.log(`Using contract name for tribe ${i}: "${o}"`));let h;if(t!=null&&t.createdAt)try{typeof t.createdAt=="string"?h=Math.floor(new Date(t.createdAt).getTime()/1e3):h=Number(t.createdAt)}catch{h=s.createdAt||Math.floor(Date.now()/1e3)}else h=s.createdAt||Math.floor(Date.now()/1e3);(m=s.userMembershipStatus)!=null&&m.isMember,(w=s.userMembershipStatus)!=null&&w.isAdmin;const d=s.nftRequirements||[];let b;try{typeof s.entryFee=="bigint"?b=s.entryFee:typeof s.entryFee=="string"||typeof s.entryFee=="number"?b=BigInt(s.entryFee):b=BigInt(0)}catch(g){console.error("Error converting entryFee to bigint:",g),b=BigInt(0)}return{id:i,name:o,metadata:typeof s.metadata=="string"?s.metadata:JSON.stringify(t),owner:s.owner,admins:s.admins||[],memberCount:s.memberCount,createdAt:h,joinType:s.joinType,entryFee:b,nftRequirements:d}}const Be=class Be{constructor(n){O(this,"chainId");O(this,"walletClient");O(this,"publicClient");O(this,"userAddress");this.chainId=n,this.initializeClients()}async initializeClients(){try{this.publicClient=se(this.chainId);const n=await Ve();if(n){const[t]=await n.request({method:"eth_requestAccounts"});t&&(this.userAddress=t,this.walletClient=Ys({account:t,chain:ws(this.chainId),transport:Qs(n)}))}}catch(n){console.error("Failed to initialize clients:",n)}}handleError(n,t,r){console.error(`${n}: ${t}`,r);const a=new Error(t);return a.type=n,a.originalError=r,a}async connect(n,t){this.walletClient=n,this.userAddress=t}async createTribe(n,t,r=[],a=0,i=0n,o=[]){if(!this.walletClient||!this.userAddress)throw this.handleError(ue.CONNECTION_ERROR,"Wallet not connected");try{const{tribeController:l}=K(this.chainId),u=ws(this.chainId);r.includes(this.userAddress)||(r=[...r,this.userAddress]);const h=n.trim();if(!h)throw this.handleError(ue.VALIDATION_ERROR,"Tribe name cannot be empty");let d;try{d=JSON.parse(t),(!d.name||d.name.trim()==="")&&(d.name=h,t=JSON.stringify(d))}catch(g){console.error("Couldn't parse metadata JSON:",g),t=JSON.stringify({name:h})}console.log("Creating tribe with:",{name:h,metadataPreview:typeof d=="object"?{...d,fullString:t.length>100?`${t.substring(0,100)}...`:t}:{error:"Invalid metadata",metadata:t},admins:r,joinType:a,entryFee:i.toString()});const b=await this.walletClient.writeContract({address:l.address,abi:l.abi,functionName:"createTribe",args:[h,t,r,BigInt(a),i,o],account:this.userAddress,chain:u}),m=(await As(b,this.chainId)).logs.find(g=>g.address.toLowerCase()===l.address.toLowerCase());if(!m||!m.topics[1])throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get tribe ID from transaction");return parseInt(m.topics[1],16)}catch(l){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to create tribe",l)}}async getTribeConfig(n){var t;try{const{tribeController:r}=K(this.chainId),a=se(this.chainId);let i,o={success:!0};try{if(i=await a.readContract({address:r.address,abi:r.abi,functionName:"getTribeConfigView",args:[BigInt(n)]}),Array.isArray(i))console.log(`Tribe ${n} raw config (array):`,i),o={success:!0,name:i[0]||`Tribe ${n}`,metadata:i[1]||"{}",admins:i[2]||[],joinType:Number(i[3]||0),entryFee:(i[4]||0).toString(),nftRequirements:i[5]||[]};else if(typeof i=="object"&&i!==null){const l=i;console.log(`Tribe ${n} raw config (object):`,l),o={success:!0,name:l.name||`Tribe ${n}`,metadata:l.metadata||"{}",admins:Array.isArray(l.admins)?l.admins:[],joinType:typeof l.joinType=="number"?l.joinType:0,entryFee:((t=l.entryFee)==null?void 0:t.toString())||"0",nftRequirements:Array.isArray(l.nftRequirements)?l.nftRequirements:[]}}else throw new Error("Invalid config format")}catch(l){console.error("Error getting tribe config from contract:",l),o={success:!1,error:"Failed to get tribe config"}}if(o.success&&o.metadata){let l;try{console.log(`Tribe ${n} raw metadata string:`,o.metadata),l=yt(o.metadata,{description:"",createdAt:new Date().toISOString()}),console.log(`Tribe ${n} parsed metadata:`,l)}catch(h){console.error(`Error parsing metadata for tribe ${n}:`,h),l={description:"",createdAt:new Date().toISOString()}}let u=o.name||`Tribe ${n}`;return l.name&&l.name.trim()!==""&&(!u||u===`Tribe ${n}`||u.trim()===""?(u=l.name.trim(),console.log(`Using metadata name for tribe ${n}: "${u}"`)):console.log(`Keeping contract name for tribe ${n}: "${u}" (metadata name was: "${l.name}")`)),{name:u,description:l.description||"",coverImage:l.coverImage,avatar:l.avatar,isPrivate:l.isPrivate||!1,entryFee:o.entryFee||"0",nftRequirements:o.nftRequirements||[],metadata:l,admins:o.admins||[],joinType:o.joinType||0}}try{const l=await Hr(this.chainId,n,a),u=yt(l,{description:"",createdAt:new Date().toISOString()});return{name:o.name||`Tribe ${n}`,description:u.description||"",coverImage:u.coverImage,avatar:u.avatar,isPrivate:u.isPrivate||!1,entryFee:o.entryFee||"0",nftRequirements:o.nftRequirements||[],metadata:u,admins:o.admins||[],joinType:o.joinType||0}}catch(l){console.error("Error extracting metadata from transaction:",l)}return{name:o.name||`Tribe ${n}`,description:"",isPrivate:!1,entryFee:"0",nftRequirements:[],metadata:{description:"",createdAt:new Date().toISOString()},admins:o.admins||[],joinType:o.joinType||0}}catch(r){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get tribe config",r)}}async getTribeData(n){var t;try{if(Be.INVALID_TRIBE_IDS.has(n))throw new Error("Invalid tribe ID");const r=`tribe_${this.chainId}_${n}`,a=ra(r);if(a&&Date.now()-a.timestamp<Be.CACHE_DURATION)return a.data;const{tribeController:i}=K(this.chainId);try{const o=await this.publicClient.readContract({address:i.address,abi:i.abi,functionName:"getTribeDetails",args:[BigInt(n)]});let l={description:"",createdAt:new Date().toISOString(),isPrivate:!1,avatar:"",coverImage:"",topics:[]};try{const f=JSON.parse(o.metadata||"{}");l={...l,...f}}catch(f){console.error(`Error parsing metadata for tribe ${n}:`,f)}const u={id:n.toString(),name:o.name||`Tribe #${n}`,metadata:o.metadata||"{}",owner:o.admin,admins:[],memberCount:Number(o.memberCount),createdAt:Math.floor(Date.now()/1e3),joinType:Number(o.joinType),entryFee:o.entryFee,nftRequirements:[],isPrivate:!!l.isPrivate,isActive:o.isActive,canMerge:o.canMerge,members:[]},[h,d,b]=await Promise.all([this.getNFTRequirements(n),this.getTribeAdmins(n),this.userAddress?this.getMemberStatus(n,this.userAddress):Promise.resolve(null)]);return u.nftRequirements=(h==null?void 0:h.nftRequirements)||[],u.admins=d,u.members=d.map(f=>({id:f,username:f,avatar:`https://api.dicebear.com/7.x/shapes/svg?seed=${f}`,role:"admin"})),b!==null&&(u.userMembershipStatus={isMember:b===1,isAdmin:b===2,isPending:b===3,status:b}),aa(r,{data:u,timestamp:Date.now()}),u}catch(o){throw(t=o==null?void 0:o.message)!=null&&t.includes("Invalid tribe ID")&&Be.INVALID_TRIBE_IDS.add(n),o}}catch(r){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get tribe data",r)}}async getNFTRequirements(n){try{const{tribeController:t}=K(this.chainId);return await this.publicClient.readContract({address:t.address,abi:t.abi,functionName:"getTribeConfigView",args:[BigInt(n)]})}catch(t){return console.error(`Error fetching NFT requirements for tribe ${n}:`,t),null}}async getTribeAdmins(n){try{const{tribeController:t}=K(this.chainId);return await this.publicClient.readContract({address:t.address,abi:t.abi,functionName:"getTribeWhitelist",args:[BigInt(n)]})}catch(t){return console.error(`Error fetching admins for tribe ${n}:`,t),[]}}async joinTribe(n){if(!this.walletClient||!this.userAddress)throw this.handleError(ue.CONNECTION_ERROR,"Wallet not connected");try{const{tribeController:t}=K(this.chainId),r=ws(this.chainId),a=await this.walletClient.writeContract({address:t.address,abi:t.abi,functionName:"joinTribe",args:[BigInt(n)],account:this.userAddress,chain:r});await As(a,this.chainId)}catch(t){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to join tribe",t)}}async requestToJoinTribe(n,t){if(!this.walletClient||!this.userAddress)throw this.handleError(ue.CONNECTION_ERROR,"Wallet not connected");try{const{tribeController:r}=K(this.chainId),a=ws(this.chainId),i=await this.walletClient.writeContract({address:r.address,abi:r.abi,functionName:"requestToJoinTribe",args:[BigInt(n)],value:t,account:this.userAddress,chain:a});await As(i,this.chainId)}catch(r){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to request to join tribe",r)}}async getMemberStatus(n,t){try{const{tribeController:r}=K(this.chainId),a=await this.publicClient.readContract({address:r.address,abi:r.abi,functionName:"getMemberStatus",args:[BigInt(n),t]});return Number(a)}catch(r){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get member status",r)}}async getTribesCount(){try{const{tribeController:n}=K(this.chainId),t=await this.publicClient.readContract({address:n.address,abi:n.abi,functionName:"nextTribeId",args:[]});return console.log(`Got tribes count from nextTribeId: ${t}`),Number(t)}catch(n){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get tribes count",n)}}async getUserTribes(n){try{const{tribeController:t}=K(this.chainId);return(await this.publicClient.readContract({address:t.address,abi:t.abi,functionName:"getUserTribes",args:[n]})).map(Number)}catch(t){throw this.handleError(ue.BLOCKCHAIN_ERROR,"Failed to get user tribes",t)}}mapTribeDataToUIFormat(n,t){return oa(n)}};O(Be,"CACHE_DURATION",5*60*1e3),O(Be,"INVALID_TRIBE_IDS",new Set);let ks=Be;class ia{constructor(n){O(this,"chainId");O(this,"walletClient",null);O(this,"userAddress",null);this.chainId=n}async connect(n,t){this.walletClient=n,this.userAddress=t}isWalletConnected(){return!!this.walletClient&&!!this.userAddress}async getProfileById(n){const t=se(this.chainId),{profileNFTMinter:r}=K(this.chainId),a=await t.readContract({address:r.address,abi:r.abi,functionName:"getProfileByTokenId",args:[BigInt(n)]}),[i,o]=a,l=this.parseMetadata(o);return{tokenId:n.toString(),username:i,metadata:l,nftUri:l.avatar,owner:this.userAddress||""}}async getProfileByUsername(n){const t=se(this.chainId),{profileNFTMinter:r}=K(this.chainId),a=await t.readContract({address:r.address,abi:r.abi,functionName:"getProfileIdByUsername",args:[n]});return this.getProfileById(Number(a))}async getProfileByAddress(n){console.log(`[ProfileService] Getting profile for address: ${n}`);try{const t=se(this.chainId),{profileNFTMinter:r}=K(this.chainId),a=await t.readContract({address:r.address,abi:r.abi,functionName:"balanceOf",args:[n]});if(console.log(`[ProfileService] Profile NFT balance for ${n}: ${a}`),!a||a===0n)return console.log(`[ProfileService] No profile found for address ${n}`),null;let i=null;for(let d=0;d<10;d++)try{if((await t.readContract({address:r.address,abi:r.abi,functionName:"ownerOf",args:[BigInt(d)]})).toLowerCase()===n.toLowerCase()){i=BigInt(d);break}}catch{continue}if(i===null)return console.log(`[ProfileService] Could not find token ID for address ${n}`),null;const o=await t.readContract({address:r.address,abi:r.abi,functionName:"getProfileByTokenId",args:[i]}),[l,u]=o,h=this.parseMetadata(u);return console.log(`[ProfileService] Found profile for ${n}: ${l}`),{tokenId:i.toString(),username:l,metadata:h,nftUri:h.avatar,owner:n}}catch(t){return console.error(`[ProfileService] Error getting profile for ${n}:`,t),null}}async createProfile(n,t){if(!this.walletClient)throw new Error("Wallet not connected: walletClient is missing");if(!this.userAddress)throw new Error("Wallet not connected: userAddress is missing");const{profileNFTMinter:r}=K(this.chainId),a=JSON.stringify(t),i=vs(this.chainId);try{const o=await this.walletClient.writeContract({chain:i,address:r.address,abi:r.abi,functionName:"createProfile",args:[n,a],account:this.userAddress});console.log(`Profile creation transaction submitted: ${o}`);const h=(await se(this.chainId).waitForTransactionReceipt({hash:o})).logs.find(b=>b.address.toLowerCase()===r.address.toLowerCase());if(!h||!h.topics||h.topics.length<4)throw new Error("Failed to find profile creation event");return parseInt(h.topics[3]||"0",16)}catch(o){throw console.error("[ProfileService] Error creating profile:",o),o}}async updateProfileMetadata(n,t){if(!this.walletClient||!this.userAddress)throw new Error("Wallet not connected");const{profileNFTMinter:r}=K(this.chainId),a=JSON.stringify(t),i=vs(this.chainId),o=await this.walletClient.writeContract({chain:i,address:r.address,abi:r.abi,functionName:"updateProfileMetadata",args:[BigInt(n),a],account:this.userAddress});await se(this.chainId).waitForTransactionReceipt({hash:o})}async checkUsernameAvailability(n){const t=se(this.chainId),{profileNFTMinter:r}=K(this.chainId);return!await t.readContract({address:r.address,abi:r.abi,functionName:"usernameExists",args:[n]})}async findUsernameByAddress(n){const t=await this.checkProfileOwnership(n);return t?t.username:null}async skipProfileCreation(n){try{return localStorage.setItem("profile_creation_skipped",JSON.stringify({address:n,timestamp:Date.now()})),!0}catch{return!1}}async hasSkippedProfileCreation(n){try{const t=localStorage.getItem("profile_creation_skipped");if(!t)return!1;const{address:r}=JSON.parse(t);return r.toLowerCase()===n.toLowerCase()}catch{return!1}}async checkProfileOwnership(n){return this.getProfileByAddress(n)}parseMetadata(n){try{const t=JSON.parse(n);return{avatar:t.avatar||"",bio:t.bio||"",createdAt:t.createdAt||Date.now()}}catch{return{avatar:"",bio:"",createdAt:Date.now()}}}}class Ts{constructor(n){O(this,"chainId");O(this,"cache");O(this,"CACHE_TTL",5*60*1e3);O(this,"lastConnectedAddress",null);O(this,"cacheUpdateCallbacks",[]);console.log(`[IndexerService] Initializing with chainId: ${n}`),this.chainId=n,this.cache={posts:{byId:{},byUser:{},byTribe:{},lastUpdate:0},tribes:{byId:{},byUser:{},lastUpdate:0},profiles:{byAddress:{},lastUpdate:0}}}hasErrorMessage(n,t){return n instanceof Error&&typeof n.message=="string"&&n.message.includes(t)}logError(n,t){t instanceof Error?console.error(`[IndexerService] ${n}:`,t.message):console.error(`[IndexerService] ${n}:`,t)}onCacheUpdate(n){return this.cacheUpdateCallbacks.push(n),()=>{this.cacheUpdateCallbacks=this.cacheUpdateCallbacks.filter(t=>t!==n)}}notifyCacheUpdate(n,t){this.cacheUpdateCallbacks.forEach(r=>r(n,t))}normalizeAddress(n){try{return Sn(n.toLowerCase())}catch{throw new Error(`Invalid address format: ${n}`)}}async getPostsSince(n){return await this.ensureCacheValid("posts"),Object.values(this.cache.posts.byId).filter(t=>Number(t.createdAt)>=n)}async getPostsByUser(n){return await this.ensureCacheValid("posts"),(this.cache.posts.byUser[this.normalizeAddress(n)]||[]).map(r=>this.cache.posts.byId[r]).filter(Boolean)}async getPostsByTribe(n){return await this.ensureCacheValid("posts"),(this.cache.posts.byTribe[n]||[]).map(r=>this.cache.posts.byId[r]).filter(Boolean)}async getTribesSince(n){return await this.ensureCacheValid("tribes"),Object.values(this.cache.tribes.byId).filter(t=>Number(t.createdAt)>=n)}async getTribesByUser(n){return await this.ensureCacheValid("tribes"),(this.cache.tribes.byUser[this.normalizeAddress(n)]||[]).map(r=>this.cache.tribes.byId[r]).filter(Boolean)}async getProfilesByAddresses(n){return await this.ensureCacheValid("profiles"),n.map(t=>this.cache.profiles.byAddress[this.normalizeAddress(t)]).filter(Boolean)}async updateUserMetadata(n,t){const r=se(this.chainId),{profileNFTMinter:a}=K(this.chainId),i=await r.readContract({address:a.address,abi:a.abi,functionName:"balanceOf",args:[this.normalizeAddress(n)]});if(!i||i===0n)throw new Error("No profile found for address");for(let o=0n;o<100n;o++)try{if((await r.readContract({address:a.address,abi:a.abi,functionName:"ownerOf",args:[o]})).toLowerCase()===this.normalizeAddress(n).toLowerCase()){const u=await r.readContract({address:a.address,abi:a.abi,functionName:"getProfileByTokenId",args:[o]}),[h,,d]=u,b=JSON.parse(t);this.cache.profiles.byAddress[this.normalizeAddress(n)]={tokenId:o.toString(),username:h,metadata:{avatar:b.avatar||"",bio:b.bio||"",createdAt:b.createdAt||Date.now()},nftUri:b.avatar||"",owner:d};break}}catch{continue}}clearCache(){this.cache={posts:{byId:{},byUser:{},byTribe:{},lastUpdate:0},tribes:{byId:{},byUser:{},lastUpdate:0},profiles:{byAddress:{},lastUpdate:0}}}async refreshCache(){await Promise.all([this.updatePostsCache(),this.updateTribesCache(),this.updateProfilesCache()])}async ensureCacheValid(n){if(Date.now()-this.cache[n].lastUpdate>this.CACHE_TTL)switch(n){case"posts":await this.updatePostsCache();break;case"tribes":await this.updateTribesCache();break;case"profiles":await this.updateProfilesCache();break}}async updatePostsCache(){const n=se(this.chainId),{postMinter:t}=K(this.chainId);try{const r=await n.readContract({address:t.address,abi:t.abi,functionName:"nextPostId",args:[]});if(r===void 0)throw new Error("Failed to get post count from contract");const a=50n,i=r,o=Math.ceil(Number(i)/Number(a));for(let l=0;l<o;l++){const u=BigInt(l)*a,h=u+a>i?i:u+a;for(let d=u;d<h;d++)try{const b=await n.readContract({address:t.address,abi:t.abi,functionName:"getPost",args:[d]}),[f,m,w,g,c,x,k,v,N]=b;let C;try{C=JSON.parse(g)}catch(j){console.error(`Error parsing metadata for post ${d}:`,j);continue}const P={id:d.toString(),content:C.content||"",author:m,tribeId:Number(w),createdAt:C.createdAt||Date.now(),type:C.type||"text"};this.cache.posts.byId[P.id]=P;const y=this.cache.posts.byUser[m]||[];y.includes(P.id)||(y.push(P.id),this.cache.posts.byUser[m]=y);const T=this.cache.posts.byTribe[P.tribeId]||[];T.includes(P.id)||(T.push(P.id),this.cache.posts.byTribe[P.tribeId]=T)}catch(b){console.error(`Error fetching post ${d}:`,b)}}this.cache.posts.lastUpdate=Date.now()}catch(r){console.error("Error updating posts cache:",r)}}async updateTribesCache(){const n=se(this.chainId),{tribeController:t}=K(this.chainId);try{const r=await n.readContract({address:t.address,abi:t.abi,functionName:"nextTribeId",args:[]});if(r===void 0)throw new Error("Failed to get tribe count from contract");for(let a=1n;a<r;a++)try{const i=await n.readContract({address:t.address,abi:t.abi,functionName:"getTribeConfigView",args:[a]}),o=await n.readContract({address:t.address,abi:t.abi,functionName:"getTribeAdmin",args:[a]}),l=await n.readContract({address:t.address,abi:t.abi,functionName:"getMemberCount",args:[a]});let u=`Tribe ${a}`,h="";try{const f=await n.readContract({address:t.address,abi:t.abi,functionName:"getTribeConfigView",args:[BigInt(a)]});if(Array.isArray(f))u=f[0]||`Tribe ${a}`,h=f[1]||"{}";else if(typeof f=="object"&&f!==null){const m=f;u=m.name||`Tribe ${a}`,h=m.metadata||"{}"}}catch(f){console.warn(`Failed to get name for tribe ${a}, using default name:`,f)}const d={id:a.toString(),name:u,metadata:h,owner:o,admins:[o],memberCount:Number(l),createdAt:Date.now(),joinType:i.joinType,entryFee:i.entryFee,nftRequirements:i.nftRequirements||[]};this.cache.tribes.byId[d.id]=d;const b=this.cache.tribes.byUser[o]||[];b.includes(d.id)||(b.push(d.id),this.cache.tribes.byUser[o]=b)}catch(i){console.error(`Error fetching tribe ${a}:`,i)}this.cache.tribes.lastUpdate=Date.now()}catch(r){console.error("Error updating tribes cache:",r)}}async updateProfilesCache(){console.log("[IndexerService] Starting profile cache update");const n=se(this.chainId),{profileNFTMinter:t}=K(this.chainId);if(!(t!=null&&t.address)){console.error("[IndexerService] Profile NFT contract address not found");return}try{try{const u=await n.getBytecode({address:t.address});if(!u||u==="0x"){console.error("[IndexerService] Profile NFT contract not found at address:",t.address);return}}catch(u){console.error("[IndexerService] Error verifying Profile NFT contract:",u);return}let r=0;const a=5,i=5n;let o=0n,l=0;for(;r<a;){try{const u=await n.readContract({address:t.address,abi:t.abi,functionName:"ownerOf",args:[o]}),h=await n.readContract({address:t.address,abi:t.abi,functionName:"getProfileByTokenId",args:[o]}),[d,b]=h,f=this.normalizeAddress(u);console.log(`[IndexerService] Found profile for tokenId ${o}: ${d} (${f})`);let m;try{m=JSON.parse(b)}catch(g){console.log(`[IndexerService] Failed to parse metadata for ${d}: ${g.message}`),m={avatar:"",bio:"",createdAt:Date.now()}}const w={tokenId:o.toString(),username:d,metadata:{avatar:m.avatar||"",bio:m.bio||"",createdAt:m.createdAt||Date.now()},nftUri:m.avatar||"",owner:f};this.cache.profiles.byAddress[f]=w,this.notifyCacheUpdate("profile",{address:f,profile:w,hasProfile:!0}),l++,r=0}catch(u){if(u instanceof Error&&u.message.includes("ERC721NonexistentToken")){if(console.log(`[IndexerService] Token ${o} not minted yet, trying next token...`),l>0&&r>2){console.log(`[IndexerService] Found ${l} profiles and hit several gaps, assuming end of minted tokens`);break}r++}else console.error(`[IndexerService] Error fetching profile for tokenId ${o}:`,u),r++}o+=1n,o%i===0n&&await new Promise(u=>setTimeout(u,100))}console.log(`[IndexerService] Profile cache update complete. Found ${l} profiles.`),this.cache.profiles.lastUpdate=Date.now()}catch(r){console.error("[IndexerService] Error updating profiles cache:",r)}}getUsernameByAddress(n){const t=this.cache.posts.byUser[this.normalizeAddress(n)]||[];if(t.length>0){const r=this.cache.posts.byId[t[0]];return(r==null?void 0:r.author)||null}return null}getAddressByUsername(n){for(const t of Object.values(this.cache.posts.byId))if(t.author.toLowerCase()===n.toLowerCase())return t.author;return null}getUserMetadata(n){return this.cache.profiles.byAddress[this.normalizeAddress(n)]||null}async forceRefreshContent(n,t){switch(n){case"post":await this.refreshPost(t);break;case"tribe":await this.refreshTribe(t);break;case"profile":await this.refreshProfile(t);break}}async refreshPost(n){try{const t=se(this.chainId),{contentManager:r}=K(this.chainId),a=await t.readContract({address:r.address,abi:r.abi,functionName:"getPost",args:[BigInt(n)]}),[i,o,l,u,h]=a,d={id:n,content:i,author:o,tribeId:Number(l),createdAt:Number(u)*1e3,type:h};this.cache.posts.byId[d.id]=d;const b=this.cache.posts.byUser[this.normalizeAddress(o)]||[];b.includes(d.id)||(b.push(d.id),this.cache.posts.byUser[this.normalizeAddress(o)]=b);const f=this.cache.posts.byTribe[d.tribeId]||[];f.includes(d.id)||(f.push(d.id),this.cache.posts.byTribe[d.tribeId]=f)}catch(t){console.error(`Error refreshing post ${n}:`,t)}}async refreshTribe(n){try{const t=se(this.chainId),{tribeController:r}=K(this.chainId),a=await t.readContract({address:r.address,abi:r.abi,functionName:"getTribe",args:[BigInt(n)]}),[i,o,l,u,h,d,b,f,m]=a,w={id:n,name:i,metadata:o,owner:l,admins:u,memberCount:Number(h),createdAt:Number(d)*1e3,joinType:b,entryFee:f,nftRequirements:m};this.cache.tribes.byId[w.id]=w;const g=this.cache.tribes.byUser[this.normalizeAddress(l)]||[];g.includes(w.id)||(g.push(w.id),this.cache.tribes.byUser[this.normalizeAddress(l)]=g)}catch(t){console.error(`Error refreshing tribe ${n}:`,t)}}async refreshProfile(n){const t=this.normalizeAddress(n);try{const r=se(this.chainId),{profileNFTMinter:a}=K(this.chainId);if(!(a!=null&&a.address))throw new Error("Profile NFT contract address not found");const i=await r.readContract({address:a.address,abi:a.abi,functionName:"balanceOf",args:[t]});if(!i||i===0n){const l={tokenId:"0",username:`User-${t.substring(2,6)}`,metadata:{avatar:"",bio:"",createdAt:Date.now()},nftUri:"",owner:t};this.cache.profiles.byAddress[t]=l,this.notifyCacheUpdate("profile",{address:t,profile:l,hasProfile:!1});return}let o=!1;for(let l=0n;l<100n&&!o;l++)try{const u=await r.readContract({address:a.address,abi:a.abi,functionName:"ownerOf",args:[l]});if(this.normalizeAddress(u)===t){const[d,b]=await r.readContract({address:a.address,abi:a.abi,functionName:"getProfileByTokenId",args:[l]}),f=this.parseMetadata(b),m={tokenId:l.toString(),username:d,metadata:{avatar:f.avatar||"",bio:f.bio||"",createdAt:f.createdAt||Date.now()},nftUri:f.avatar||"",owner:t};this.cache.profiles.byAddress[t]=m,this.notifyCacheUpdate("profile",{address:t,profile:m,hasProfile:!0}),o=!0}}catch(u){if(u instanceof Error&&u.message.includes("ERC721NonexistentToken"))continue;throw u}if(!o&&i>0n)throw new Error(`Profile NFT found for ${t} but unable to locate token ID`)}catch(r){throw this.logError(`Error refreshing profile for ${t}`,r),r}}parseMetadata(n){try{return JSON.parse(n)}catch(t){return console.error(`[IndexerService] Failed to parse metadata: ${n.substring(0,50)}...`,t),{avatar:"",bio:"",createdAt:Date.now()}}}setConnectedUser(n){try{const t=this.normalizeAddress(n);if(this.lastConnectedAddress!==t){this.lastConnectedAddress=t,this.cache.posts.byUser[t]||(this.cache.posts.byUser[t]=[]);const r=this.cache.profiles.byAddress[t],a=se(this.chainId),{profileNFTMinter:i}=K(this.chainId);a.readContract({address:i.address,abi:i.abi,functionName:"balanceOf",args:[t]}).then(o=>{if(o>0n)r?this.notifyCacheUpdate("profile",{address:t,profile:r,hasProfile:!0}):this.refreshProfile(t);else{const h={tokenId:"0",username:`User-${t.substring(2,6)}`,metadata:{avatar:"",bio:"",createdAt:Date.now()},nftUri:"",owner:t};this.cache.profiles.byAddress[t]=h,this.notifyCacheUpdate("profile",{address:t,profile:h,hasProfile:!1})}}).catch(o=>{this.logError("Error checking profile balance in setConnectedUser",o),r&&this.notifyCacheUpdate("profile",{address:t,profile:r,hasProfile:!1})})}}catch(t){throw this.logError("Error in setConnectedUser",t),t}}updateChainId(n){this.chainId!==n&&(console.log(`[IndexerService] Updating chain ID from ${this.chainId} to ${n}`),this.chainId=n,this.cache={posts:{byId:{},byUser:{},byTribe:{},lastUpdate:0},tribes:{byId:{},byUser:{},lastUpdate:0},profiles:{byAddress:{},lastUpdate:0}})}}class Qe{constructor(n){O(this,"tribeService");O(this,"postService",null);O(this,"profileService",null);O(this,"indexerService");O(this,"chainId");O(this,"isInitialized",!1);this.chainId=n||0,this.tribeService=new ks(this.chainId),this.indexerService=new Ts(this.chainId)}async initialize(n){try{if(n)console.log(`[TribesSDK] Initializing with provided chainId: ${n}`),this.chainId=n;else if(!this.chainId)try{this.chainId=await le(),console.log(`[TribesSDK] Auto-detected chainId: ${this.chainId}`)}catch{console.warn(`[TribesSDK] Failed to auto-detect chainId, using default: ${this.chainId||20143}`),this.chainId=this.chainId||20143}console.log(`[TribesSDK] Initializing services with chainId: ${this.chainId}`),this.tribeService=new ks(this.chainId),this.profileService=new ia(this.chainId),this.indexerService=new Ts(this.chainId),console.log("[TribesSDK] Starting cache initialization (non-blocking)"),this.initializeCache().catch(t=>{console.warn("[TribesSDK] Background cache initialization failed:",t)}),this.isInitialized=!0,console.log("[TribesSDK] Core initialization complete")}catch(t){throw console.error("[TribesSDK] Initialization failed:",t),this.isInitialized=!0,t}}async initializeCache(){try{await this.indexerService.refreshCache(),console.log("[TribesSDK] Cache successfully initialized")}catch(n){console.warn("[TribesSDK] Cache initialization failed, will retry later:",n),setTimeout(()=>{console.log("[TribesSDK] Retrying cache initialization"),this.indexerService.refreshCache().catch(t=>console.error("[TribesSDK] Cache retry failed:",t))},5e3)}}async connect(n,t){console.log("[TribesSDK] Connecting to wallet",{walletClientType:typeof n,hasWalletClient:!!n,address:t});try{this.tribeService&&await this.tribeService.connect(n,t),this.profileService&&await this.profileService.connect(n,t),this.indexerService.setConnectedUser(t),console.log("[TribesSDK] Successfully connected to wallet")}catch(r){throw console.error("[TribesSDK] Failed to connect to wallet:",r),r}}async getProfileById(n){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.getProfileById(n)}async getProfileByUsername(n){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.getProfileByUsername(n)}async getProfileByAddress(n){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.getProfileByAddress(n)}async createProfile(n,t){if(!this.profileService)throw new Error("Profile service not initialized");if(!this.isWalletConnected())throw new Error("Wallet connection check failed. Please reconnect your wallet and try again.");return this.profileService.createProfile(n,t)}async updateProfileMetadata(n,t){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.updateProfileMetadata(n,t)}async checkUsernameAvailability(n){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.checkUsernameAvailability(n)}async checkProfileOwnership(n){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.checkProfileOwnership(n)}async findUsernameByAddress(n){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.findUsernameByAddress(n)}async skipProfileCreation(n){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.skipProfileCreation(n)}async hasSkippedProfileCreation(n){if(!this.profileService)throw new Error("Profile service not initialized");return this.profileService.hasSkippedProfileCreation(n)}async createTribe(n,t,r,a,i,o){const l=await this.tribeService.createTribe(n,t,r,a,i,o);return await this.indexerService.refreshCache(),l}async getTribeData(n){return this.tribeService.getTribeData(n)}async getTribe(n){try{console.log(`[TribesSDK] Getting tribe data for ID: ${n}`);const t=await this.tribeService.getTribeData(n);console.log(`[TribesSDK] Successfully fetched tribe data for ID: ${n}`,t);const r=this.tribeService.mapTribeDataToUIFormat(t,this.chainId);return console.log("[TribesSDK] Mapped tribe data to UI format:",r),r}catch(t){throw console.error(`[TribesSDK] Error getting tribe ${n}:`,t),t}}async joinTribe(n){await this.tribeService.joinTribe(n),await this.indexerService.refreshCache()}async requestToJoinTribe(n,t){await this.tribeService.requestToJoinTribe(n,t),await this.indexerService.refreshCache()}async getMemberStatus(n,t){return this.tribeService.getMemberStatus(n,t)}async getTribesCount(){return this.tribeService.getTribesCount()}async getUserTribes(n){return(await this.indexerService.getTribesByUser(n)).map(r=>Number(r.id))}async getAllTribes(){try{console.log("[TribesSDK] Getting all tribes from indexer");const n=await this.indexerService.getTribesSince(0);return console.log(`[TribesSDK] Found ${n.length} tribes from indexer`),n.map(t=>{const r=t.id.toString(),a={...t,id:r,metadata:t.metadata||"{}",owner:t.owner||"0x0000000000000000000000000000000000000000",nftRequirements:t.nftRequirements||[]};return console.log(`[TribesSDK] Processed tribe ${r} from indexer:`,a),a})}catch(n){console.error("[TribesSDK] Error getting all tribes from indexer:",n);try{console.log("[TribesSDK] Falling back to tribeService for getting tribes");const t=await this.tribeService.getTribesCount();console.log(`[TribesSDK] Found ${t} tribes via fallback`);const r=Math.min(t,20),a=[];for(let i=1;i<=r;i++)try{const o=await this.tribeService.getTribeData(i),l=this.tribeService.mapTribeDataToUIFormat(o,this.chainId);console.log(`[TribesSDK] Successfully mapped tribe ${i} via fallback:`,l),a.push(l)}catch(o){console.warn(`[TribesSDK] Failed to get tribe ${i}:`,o)}return console.log(`[TribesSDK] Fallback returned ${a.length} tribes`),a}catch(t){return console.error("[TribesSDK] Fallback also failed:",t),[]}}}async getPostsSince(n){return this.indexerService.getPostsSince(n)}async getPostsByUser(n){return this.indexerService.getPostsByUser(n)}async getPostsByTribe(n){return this.indexerService.getPostsByTribe(n)}isWalletConnected(){const n=!!this.profileService;let t=!1;if(n&&this.profileService)try{t=this.profileService.isWalletConnected()}catch(a){console.error("[TribesSDK] Error checking profile service wallet connection:",a)}const r=n&&t;return console.log("[TribesSDK] Wallet connection status:",{profileServiceExists:n,profileServiceConnected:t,overallStatus:r}),r}static async create(n){const t=new Qe(n);return await t.initialize(),t}}function Cs(){const[s,n]=p.useState(null),[t,r]=p.useState(!1),[a,i]=p.useState(null),{address:o,chainId:l,isConnected:u,walletClient:h}=ls();p.useEffect(()=>{(async()=>{try{r(!0);const g=await Qe.create(l);n(g),r(!1)}catch(g){i(g.message),r(!1)}})()},[l]),p.useEffect(()=>{(async()=>{if(s&&u&&h&&o)try{await s.connect(h,o)}catch(g){i(g.message)}})()},[s,u,h,o]);const d=p.useCallback(async(w,g,c,x,k,v)=>{if(!s)throw new Error("SDK not initialized");r(!0),i(null);try{return await s.createTribe(w,g,c,x,k,v)}catch(N){const C=N instanceof Error?N.message:"Failed to create tribe";throw i(C),console.error("Error creating tribe:",N),N}finally{r(!1)}},[s]),b=p.useCallback(async w=>{if(!s)throw new Error("SDK not initialized");r(!0),i(null);try{await s.joinTribe(w)}catch(g){const c=g instanceof Error?g.message:"Failed to join tribe";throw i(c),console.error("Error joining tribe:",g),g}finally{r(!1)}},[s]),f=p.useCallback(async(w,g)=>{if(!s)throw new Error("SDK not initialized");r(!0),i(null);try{await s.requestToJoinTribe(w,g)}catch(c){const x=c instanceof Error?c.message:"Failed to request to join tribe";throw i(x),console.error("Error requesting to join tribe:",c),c}finally{r(!1)}},[s]),m=p.useCallback(async()=>{if(!s)throw new Error("SDK not initialized");try{return await s.getTribesCount()}catch(w){throw console.error("Error getting tribes count:",w),w}},[s]);return{isLoading:t,error:a,createTribe:d,joinTribe:b,requestToJoinTribe:f,getTribesCount:m}}function la(){et();const[s,n]=p.useState(null),[t,r]=p.useState(!1),[a,i]=p.useState(null),o=p.useCallback(async f=>{r(!0),i(null);try{const m=await he.getProfileByTokenId(f);if(!m)throw new Error("Profile not found");const{username:w,metadata:g,owner:c}=m;let x;try{x=JSON.parse(g)}catch{x={avatar:""}}n({tokenId:f.toString(),username:w,metadata:g,nftUri:x.avatar||"",owner:c})}catch(m){const w=m.message||"Failed to get profile";i(w),console.error("Error getting profile:",m)}finally{r(!1)}},[]),l=p.useCallback(async f=>{r(!0),i(null);try{await new Promise(w=>setTimeout(w,500));const m={tokenId:Math.floor(Math.random()*1e3).toString(),username:f,metadata:JSON.stringify({avatar:""}),nftUri:"",owner:"0x0000000000000000000000000000000000000000"};n(m)}catch(m){const w=m.message||"Failed to get profile by username";i(w),console.error("Error getting profile by username:",m)}finally{r(!1)}},[]),u=p.useCallback(async(f,m)=>{r(!0),i(null);try{return await new Promise(g=>setTimeout(g,1e3)),Math.floor(Math.random()*1e3)}catch(w){const g=w.message||"Failed to create profile";throw i(g),console.error("Error creating profile:",w),w}finally{r(!1)}},[]),h=p.useCallback(async(f,m)=>{r(!0),i(null);try{await he.updateProfile({tokenId:f,metadata:m}),s&&s.tokenId===f.toString()&&n({...s,metadata:m})}catch(w){const g=w.message||"Failed to update profile";throw i(g),console.error("Error updating profile:",w),w}finally{r(!1)}},[s]),d=p.useCallback(async f=>{try{return await new Promise(m=>setTimeout(m,500)),!f.startsWith("user_")}catch(m){return console.error("Error checking username availability:",m),!1}},[]),b=p.useCallback(f=>/^[a-z0-9_]{3,20}$/.test(f),[]);return{profile:s,isLoading:t,error:a,getProfileById:o,getProfileByUsername:l,createProfile:u,updateProfileMetadata:h,checkUsernameAvailability:d,validateUsername:b}}function xe(...s){return Fn(Y(s))}const ua=ve("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-accent disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9","icon-sm":"h-5 w-5"}},defaultVariants:{variant:"default",size:"default"}}),da=W.forwardRef(({className:s,variant:n,size:t,isLoading:r,leftIcon:a,rightIcon:i,children:o,...l},u)=>e.jsxDEV("button",{className:xe(ua({variant:n,size:t,className:s})),ref:u,disabled:r||l.disabled,...l,children:[r&&e.jsxDEV(Mt,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Button.tsx",lineNumber:48,columnNumber:23},void 0),!r&&a&&e.jsxDEV("span",{className:"mr-2",children:a},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Button.tsx",lineNumber:49,columnNumber:36},void 0),o,!r&&i&&e.jsxDEV("span",{className:"ml-2",children:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Button.tsx",lineNumber:51,columnNumber:37},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Button.tsx",lineNumber:42,columnNumber:7},void 0));da.displayName="Button";const ca=ve("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",outline:"text-foreground",success:"border-transparent bg-[#B0E681]/20 text-[#B0E681]",warning:"border-transparent bg-yellow-500/20 text-yellow-500",error:"border-transparent bg-red-500/20 text-red-500",info:"border-transparent bg-blue-500/20 text-blue-500"}},defaultVariants:{variant:"default"}});function Q({className:s,variant:n,...t}){return e.jsxDEV("div",{className:xe(ca({variant:n}),s),...t},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Badge.tsx",lineNumber:31,columnNumber:5},this)}const ma=ve("relative rounded-xl transition-all duration-200",{variants:{variant:{default:"bg-card text-card-foreground",enhanced:["bg-[rgba(15,23,42,0.15)]","backdrop-blur-[16px]","border","border-[rgba(255,255,255,0.05)]","shadow-[0_4px_24px_0_rgba(0,0,0,0.05)]","hover:translate-y-[-2px]","hover:bg-[rgba(15,23,42,0.2)]","hover:shadow-[0_8px_32px_0_rgba(0,0,0,0.1)]"]}},defaultVariants:{variant:"default"}}),We=W.forwardRef(({className:s,variant:n,...t},r)=>e.jsxDEV("div",{ref:r,className:xe(ma({variant:n,className:s})),...t},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:36,columnNumber:7},void 0));We.displayName="Card";const fa=W.forwardRef(({className:s,...n},t)=>e.jsxDEV("div",{ref:t,className:xe("flex flex-col space-y-1.5 p-6",s),...n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:50,columnNumber:3},void 0));fa.displayName="CardHeader";const pa=W.forwardRef(({className:s,...n},t)=>e.jsxDEV("h3",{ref:t,className:xe("font-semibold leading-none tracking-tight",s),...n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:62,columnNumber:3},void 0));pa.displayName="CardTitle";const ba=W.forwardRef(({className:s,...n},t)=>e.jsxDEV("p",{ref:t,className:xe("text-sm text-muted-foreground",s),...n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:74,columnNumber:3},void 0));ba.displayName="CardDescription";const Ge=W.forwardRef(({className:s,...n},t)=>e.jsxDEV("div",{ref:t,className:xe("p-6 pt-0",s),...n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:86,columnNumber:3},void 0));Ge.displayName="CardContent";const ha=W.forwardRef(({className:s,...n},t)=>e.jsxDEV("div",{ref:t,className:xe("flex items-center p-6 pt-0",s),...n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Card.tsx",lineNumber:94,columnNumber:3},void 0));ha.displayName="CardFooter";const wa=W.forwardRef(({className:s,...n},t)=>e.jsxDEV("h2",{ref:t,className:xe("text-lg font-semibold leading-none tracking-tight",s),...n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Dialog.tsx",lineNumber:79,columnNumber:3},void 0));wa.displayName="DialogTitle";const xa=W.forwardRef(({className:s,...n},t)=>e.jsxDEV("p",{ref:t,className:xe("text-sm text-muted-foreground",s),...n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Dialog.tsx",lineNumber:91,columnNumber:3},void 0));xa.displayName="DialogDescription";const Na=ve("flex rounded-lg border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:"border-input",ghost:"border-none bg-transparent shadow-none focus-visible:ring-0 focus-visible:ring-offset-0",enhanced:["bg-white/5","border-white/10","focus:border-accent","transition-colors"]}},defaultVariants:{variant:"default"}}),ya=W.forwardRef(({className:s,variant:n,error:t,leftIcon:r,rightIcon:a,type:i,...o},l)=>e.jsxDEV("div",{className:"relative",children:[r&&e.jsxDEV("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:r},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Input.tsx",lineNumber:39,columnNumber:11},void 0),e.jsxDEV("input",{type:i,className:xe(Na({variant:n}),t&&"border-destructive focus-visible:ring-destructive",r&&"pl-10",a&&"pr-10",s),ref:l,...o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Input.tsx",lineNumber:43,columnNumber:9},void 0),a&&e.jsxDEV("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:a},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Input.tsx",lineNumber:56,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/common/ui/Input.tsx",lineNumber:37,columnNumber:7},void 0));ya.displayName="Input";var Te=(s=>(s[s.Open=0]="Open",s[s.Approval=1]="Approval",s[s.Closed=2]="Closed",s))(Te||{});const ga=(s,n)=>{console.log(`Adding tribe ${s} to local cache`,n)},Da=({onSuccess:s,onCancel:n})=>{const[t,r]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(""),[u,h]=p.useState(""),[d,b]=p.useState(""),[f,m]=p.useState([]),[w,g]=p.useState(Te.Open),[c,x]=p.useState("0"),[k,v]=p.useState(null),[N,C]=p.useState(!1),P=p.useRef(null),y=et(),{isLoading:T,createTribe:j}=Cs(),{checkUsernameAvailability:I,validateUsername:D}=la();p.useEffect(()=>{if(window.ethereum&&window.ethereum.chainId&&parseInt(window.ethereum.chainId,16),y)if(be.some(M=>M.id===y))v(null);else{const M=be.map(R=>R.id).join(", ");v(`Network not supported. Please switch to one of the supported networks (Chain IDs: ${M})`)}else if(window.ethereum&&window.ethereum.chainId){const A=parseInt(window.ethereum.chainId,16);if(be.some(R=>R.id===A))v(null);else{const R=be.map(G=>G.id).join(", ");v(`Network not supported. Please switch to one of the supported networks (Chain IDs: ${R})`)}}else{const A=be.map(M=>M.id).join(", ");v(`Cannot detect network. Please connect to one of the supported networks (Chain IDs: ${A})`)}},[y]);const U=()=>{const A={description:a,avatar:o||"/monad-white.svg",coverImage:u||"/monad-banner.png",createdAt:new Date().toISOString(),topics:[],social:{twitter:"",discord:"",telegram:""}};return JSON.stringify(A)},E=()=>f.filter(A=>A.isResolved&&A.isValid).map(A=>A.address),V=async A=>{try{return D(A)?await I(A)?{isValid:!1,statusMessage:"Username not found"}:{isValid:!0,address:`0x${A.padEnd(40,"0").substring(0,40)}`}:{isValid:!1,statusMessage:"Invalid format (3-20 chars, a-z, 0-9, _)"}}catch(M){return console.error("Error in fetchProfileByUsername:",M),{isValid:!1,statusMessage:"Error looking up profile"}}},F=async A=>{if(!A.trim())return;if(!/^[a-zA-Z0-9_]{3,20}$/.test(A)){m(R=>[...R,{username:A,address:"",isResolved:!0,isValid:!1,isLoading:!1,statusMessage:"Invalid format (3-20 chars, a-z, 0-9, _)"}]),b("");return}if(f.some(R=>R.username.toLowerCase()===A.toLowerCase())){b("");return}m(R=>[...R,{username:A,address:"",isResolved:!1,isValid:!1,isLoading:!0,statusMessage:"Resolving..."}]),b("");try{const R=await V(A);R.isValid?m(G=>G.map(J=>J.username===A?{...J,address:R.address||"",isResolved:!0,isValid:!0,isLoading:!1,statusMessage:void 0}:J)):m(G=>G.map(J=>J.username===A?{...J,isResolved:!0,isValid:!1,isLoading:!1,statusMessage:R.statusMessage}:J))}catch(R){console.error("Error resolving username:",R),m(G=>G.map(J=>J.username===A?{...J,isResolved:!0,isValid:!1,isLoading:!1,statusMessage:"Failed to resolve"}:J))}},L=async A=>{if(A.preventDefault(),!t.trim()){alert("Please enter a tribe name");return}try{C(!0);const M=await j(t.trim(),U(),E(),w,BigInt(c),[]);ga(M,{id:M.toString(),name:t.trim(),description:a,joinType:w,entryFee:c,avatar:o,coverImage:u}),s&&s(M)}catch(M){console.error("Error creating tribe:",M),alert(M.message||"Failed to create tribe")}finally{C(!1)}},X=A=>{A.key==="Enter"&&(A.preventDefault(),d.trim()&&F(d.trim()))},te=A=>{m(M=>M.filter(R=>R.username!==A))};return e.jsxDEV(We,{className:"w-full max-w-3xl",children:e.jsxDEV(Ge,{className:"p-6",children:[e.jsxDEV("h2",{className:"text-2xl font-bold mb-6",children:"Create New Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:347,columnNumber:9},void 0),k&&e.jsxDEV("div",{className:"bg-red-50 p-4 rounded-md mb-6 text-red-600",children:k},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:350,columnNumber:11},void 0),e.jsxDEV("form",{onSubmit:L,className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Tribe Name"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:358,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:t,onChange:A=>r(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter tribe name",required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:361,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:357,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(Ot,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:375,columnNumber:17},void 0),e.jsxDEV("span",{children:"Description"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:376,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:374,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:373,columnNumber:13},void 0),e.jsxDEV("textarea",{value:a,onChange:A=>i(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]",placeholder:"What is this tribe about?"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:379,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:372,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(ts,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:392,columnNumber:19},void 0),e.jsxDEV("span",{children:"Avatar Image URL"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:393,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:391,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:390,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:o,onChange:A=>l(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/avatar.png"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:396,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:389,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(ts,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:408,columnNumber:19},void 0),e.jsxDEV("span",{children:"Cover Image URL"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:409,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:407,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:406,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:u,onChange:A=>h(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/cover.png"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:412,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:405,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:388,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(Ee,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:426,columnNumber:17},void 0),e.jsxDEV("span",{children:"Join Type"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:427,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:425,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:424,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>g(Te.Open),className:`px-4 py-2 rounded-md flex items-center gap-2 ${w===Te.Open?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[e.jsxDEV(Je,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:440,columnNumber:17},void 0),e.jsxDEV("span",{children:"Open (Anyone can join)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:441,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:431,columnNumber:15},void 0),e.jsxDEV("button",{type:"button",onClick:()=>g(Te.Approval),className:`px-4 py-2 rounded-md flex items-center gap-2 ${w===Te.Approval?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[e.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:453,columnNumber:17},void 0),e.jsxDEV("span",{children:"Approval Required"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:454,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:444,columnNumber:15},void 0),e.jsxDEV("button",{type:"button",onClick:()=>g(Te.Closed),className:`px-4 py-2 rounded-md flex items-center gap-2 ${w===Te.Closed?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[e.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:466,columnNumber:17},void 0),e.jsxDEV("span",{children:"Invite Only"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:467,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:457,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:430,columnNumber:13},void 0),w===Te.Approval&&e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Entry Fee (optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:473,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"text",value:c,onChange:A=>x(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:477,columnNumber:19},void 0),e.jsxDEV("span",{className:"ml-2",children:"wei"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:484,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:476,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"Members will need to pay this fee to join your tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:486,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:472,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:423,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(Ee,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:497,columnNumber:17},void 0),e.jsxDEV("span",{children:"Admins"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:498,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:496,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:495,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2 mb-2",children:f.map((A,M)=>e.jsxDEV("div",{className:`px-3 py-1 rounded-full flex items-center text-sm ${A.isLoading?"bg-gray-200 text-gray-700":A.isValid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsxDEV("span",{children:A.username},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:513,columnNumber:19},void 0),A.isLoading?e.jsxDEV("div",{className:"ml-2 w-3 h-3 rounded-full border-2 border-gray-500 border-t-transparent animate-spin"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:515,columnNumber:21},void 0):A.statusMessage?e.jsxDEV("span",{className:"ml-2 text-xs",children:A.statusMessage},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:517,columnNumber:21},void 0):null,e.jsxDEV("button",{type:"button",onClick:()=>te(A.username),className:"ml-2 text-gray-500 hover:text-gray-700",children:"×"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:519,columnNumber:19},void 0)]},M,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:503,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:501,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex",children:[e.jsxDEV("input",{ref:P,type:"text",value:d,onChange:A=>b(A.target.value),onKeyDown:X,className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter username to add admin"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:531,columnNumber:15},void 0),e.jsxDEV("button",{type:"button",onClick:()=>{d.trim()&&F(d.trim())},className:"px-4 py-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700",children:"Add"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:540,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:530,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"Enter usernames to add admins. Your account will automatically be an admin."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:552,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:494,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-3 pt-4",children:[n&&e.jsxDEV("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",disabled:T||N,children:"Cancel"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:560,columnNumber:15},void 0),e.jsxDEV("button",{type:"submit",className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${T||N?"opacity-50 cursor-not-allowed":""}`,disabled:T||N||!!k,children:T||N?"Creating...":"Create Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:570,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:558,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:355,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:346,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribe/TribeCreationForm.tsx",lineNumber:345,columnNumber:5},void 0)},gt={[S.TEXT]:"text",[S.IMAGE]:"image",[S.VIDEO]:"video",[S.LINK]:"link",[S.EVENT]:"event",[S.POLL]:"poll",PROJECT:"project",RESOURCE:"resource",RICH_MEDIA:"rich_media"},fe="mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",Bs="flex items-center justify-center px-3 py-2 border border-gray-700 rounded-md text-sm font-medium",$s="bg-blue-600/25 text-blue-400 border-blue-500/50",_s="p-2 rounded-full bg-gray-800 hover:bg-gray-700 transition-colors",Ea=({type:s})=>{const n=as(),t=ss(en),r=d=>{const b={...d};b.eventDetails&&(b.eventDetails={...b.eventDetails,title:b.eventDetails.title||t.title||"",organizer:b.eventDetails.organizer||""}),n(Ce(b))},a=()=>{var v,N,C,P;const[d,b]=p.useState("PHYSICAL"),f={type:d,physical:d!=="VIRTUAL"?"":void 0,virtual:d!=="PHYSICAL"?"":void 0},m=()=>{var y;return(y=t.eventDetails)!=null&&y.location?typeof t.eventDetails.location=="string"?{type:d,physical:d!=="VIRTUAL"?t.eventDetails.location:void 0,virtual:d!=="PHYSICAL"?t.eventDetails.location:void 0}:t.eventDetails.location:f},w=y=>{var I,D,U,E,V,F;b(y);const T=m(),j={type:y,physical:y!=="VIRTUAL"?T.physical||"":void 0,virtual:y!=="PHYSICAL"?T.virtual||"":void 0};r({eventDetails:{title:((I=t.eventDetails)==null?void 0:I.title)||t.title||"",organizer:((D=t.eventDetails)==null?void 0:D.organizer)||"",startDate:((U=t.eventDetails)==null?void 0:U.startDate)||new Date().toISOString(),endDate:((E=t.eventDetails)==null?void 0:E.endDate)||new Date().toISOString(),location:j,maxTickets:Number(((V=t.eventDetails)==null?void 0:V.maxTickets)||0),price:Number(((F=t.eventDetails)==null?void 0:F.price)||0)}})},g=y=>{var I,D,U,E,V,F;const j={...m(),physical:y.target.value};r({eventDetails:{title:((I=t.eventDetails)==null?void 0:I.title)||t.title||"",organizer:((D=t.eventDetails)==null?void 0:D.organizer)||"",startDate:((U=t.eventDetails)==null?void 0:U.startDate)||new Date().toISOString(),endDate:((E=t.eventDetails)==null?void 0:E.endDate)||new Date().toISOString(),location:j,maxTickets:Number(((V=t.eventDetails)==null?void 0:V.maxTickets)||0),price:Number(((F=t.eventDetails)==null?void 0:F.price)||0)}})},c=y=>{var I,D,U,E,V,F;const j={...m(),virtual:y.target.value};r({eventDetails:{title:((I=t.eventDetails)==null?void 0:I.title)||t.title||"",organizer:((D=t.eventDetails)==null?void 0:D.organizer)||"",startDate:((U=t.eventDetails)==null?void 0:U.startDate)||new Date().toISOString(),endDate:((E=t.eventDetails)==null?void 0:E.endDate)||new Date().toISOString(),location:j,maxTickets:Number(((V=t.eventDetails)==null?void 0:V.maxTickets)||0),price:Number(((F=t.eventDetails)==null?void 0:F.price)||0)}})},x=y=>{var T,j,I,D,U;r({eventDetails:{title:((T=t.eventDetails)==null?void 0:T.title)||t.title||"",organizer:((j=t.eventDetails)==null?void 0:j.organizer)||"",startDate:((I=t.eventDetails)==null?void 0:I.startDate)||new Date().toISOString(),endDate:((D=t.eventDetails)==null?void 0:D.endDate)||new Date().toISOString(),location:m(),maxTickets:parseInt(y.target.value)||0,price:Number(((U=t.eventDetails)==null?void 0:U.price)||0)}})},k=y=>{var T,j,I,D,U;r({eventDetails:{title:((T=t.eventDetails)==null?void 0:T.title)||t.title||"",organizer:((j=t.eventDetails)==null?void 0:j.organizer)||"",startDate:((I=t.eventDetails)==null?void 0:I.startDate)||new Date().toISOString(),endDate:((D=t.eventDetails)==null?void 0:D.endDate)||new Date().toISOString(),location:m(),maxTickets:Number(((U=t.eventDetails)==null?void 0:U.maxTickets)||0),price:parseFloat(y.target.value)||0}})};return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Event Start Date & Time"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:248,columnNumber:11},void 0),e.jsxDEV("input",{type:"datetime-local",value:(v=t.eventDetails)!=null&&v.startDate?De(new Date(t.eventDetails.startDate),"yyyy-MM-dd'T'HH:mm"):De(new Date,"yyyy-MM-dd'T'HH:mm"),onChange:y=>{var j,I,D,U,E;const T={title:((j=t.eventDetails)==null?void 0:j.title)||t.title||"",organizer:((I=t.eventDetails)==null?void 0:I.organizer)||"",startDate:new Date(y.target.value).toISOString(),endDate:((D=t.eventDetails)==null?void 0:D.endDate)||new Date().toISOString(),location:m(),maxTickets:Number(((U=t.eventDetails)==null?void 0:U.maxTickets)||0),price:Number(((E=t.eventDetails)==null?void 0:E.price)||0)};r({eventDetails:T})},className:"mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:249,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:247,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Event End Date & Time"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:273,columnNumber:11},void 0),e.jsxDEV("input",{type:"datetime-local",value:(N=t.eventDetails)!=null&&N.endDate?De(new Date(t.eventDetails.endDate),"yyyy-MM-dd'T'HH:mm"):De(new Date(Date.now()+36e5),"yyyy-MM-dd'T'HH:mm"),onChange:y=>{var j,I,D,U,E;const T={title:((j=t.eventDetails)==null?void 0:j.title)||t.title||"",organizer:((I=t.eventDetails)==null?void 0:I.organizer)||"",startDate:((D=t.eventDetails)==null?void 0:D.startDate)||new Date().toISOString(),endDate:new Date(y.target.value).toISOString(),location:m(),maxTickets:Number(((U=t.eventDetails)==null?void 0:U.maxTickets)||0),price:Number(((E=t.eventDetails)==null?void 0:E.price)||0)};r({eventDetails:T})},className:"mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:274,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:272,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location Type"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:298,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>w("PHYSICAL"),className:Y(Bs,d==="PHYSICAL"?$s:"text-gray-400 hover:bg-gray-700/30"),children:"Physical"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:300,columnNumber:13},void 0),e.jsxDEV("button",{type:"button",onClick:()=>w("VIRTUAL"),className:Y(Bs,d==="VIRTUAL"?$s:"text-gray-400 hover:bg-gray-700/30"),children:"Virtual"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:310,columnNumber:13},void 0),e.jsxDEV("button",{type:"button",onClick:()=>w("HYBRID"),className:Y(Bs,d==="HYBRID"?$s:"text-gray-400 hover:bg-gray-700/30"),children:"Hybrid"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:320,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:299,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:297,columnNumber:9},void 0),(d==="PHYSICAL"||d==="HYBRID")&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Physical Location"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:335,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:m().physical||"",onChange:g,placeholder:"Enter physical address",className:fe},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:336,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:334,columnNumber:11},void 0),(d==="VIRTUAL"||d==="HYBRID")&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Virtual Meeting Link"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:348,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:m().virtual||"",onChange:c,placeholder:"Enter meeting link",className:fe},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:349,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:347,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Maximum Attendees"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:360,columnNumber:11},void 0),e.jsxDEV("input",{type:"number",value:Number(((C=t.eventDetails)==null?void 0:C.maxTickets)||0),onChange:x,placeholder:"0 for unlimited",min:"0",className:fe},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:361,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:359,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Ticket Price (ETH)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:372,columnNumber:11},void 0),e.jsxDEV("input",{type:"number",value:Number(((P=t.eventDetails)==null?void 0:P.price)||0),onChange:k,placeholder:"0 for free",min:"0",step:"0.01",className:fe},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:373,columnNumber:11},void 0),e.jsxDEV("p",{className:"mt-1 text-xs text-gray-500",children:"Leave as 0 for free events"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:382,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:371,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:246,columnNumber:7},void 0)},i=()=>{var x,k,v;const[d,b]=p.useState(""),f=((x=t.pollDetails)==null?void 0:x.options)||[],m=()=>{var C,P,y;if(!d.trim())return;const N={id:Date.now().toString(),text:d.trim(),votes:0};r({pollDetails:{options:[...f,N],endDate:((C=t.pollDetails)==null?void 0:C.endDate)||new Date().toISOString(),allowMultipleChoices:((P=t.pollDetails)==null?void 0:P.allowMultipleChoices)??!1,requireVerification:((y=t.pollDetails)==null?void 0:y.requireVerification)??!1}}),b("")},w=N=>{var P,y,T;const C=f.filter(h(N));r({pollDetails:{options:C,endDate:((P=t.pollDetails)==null?void 0:P.endDate)||new Date().toISOString(),allowMultipleChoices:((y=t.pollDetails)==null?void 0:y.allowMultipleChoices)??!1,requireVerification:((T=t.pollDetails)==null?void 0:T.requireVerification)??!1}})},g=N=>{var C;r({pollDetails:{options:((C=t.pollDetails)==null?void 0:C.options)||[],...t.pollDetails,endDate:N.target.value}})},c=N=>{var C;r({pollDetails:{options:((C=t.pollDetails)==null?void 0:C.options)||[],...t.pollDetails,allowMultipleChoices:N.target.checked}})};return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Poll Options"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:447,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2 mt-2",children:f.map((N,C)=>e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("input",{type:"text",value:N.text,onChange:P=>{var T,j,I;const y=[...f];y[C]={...N,text:P.target.value},r({pollDetails:{options:y,endDate:((T=t.pollDetails)==null?void 0:T.endDate)||new Date().toISOString(),allowMultipleChoices:((j=t.pollDetails)==null?void 0:j.allowMultipleChoices)??!1,requireVerification:((I=t.pollDetails)==null?void 0:I.requireVerification)??!1}})},className:fe,placeholder:`Option ${C+1}`,required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:451,columnNumber:17},void 0),e.jsxDEV("button",{type:"button",onClick:()=>w(C),className:Y(_s,"text-red-500"),children:e.jsxDEV(hs,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:478,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:473,columnNumber:17},void 0)]},N.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:450,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:448,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex mt-2",children:[e.jsxDEV("input",{type:"text",value:d,onChange:N=>b(N.target.value),className:"flex-1 rounded-l-md bg-gray-800 border-gray-700 text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Add new option"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:485,columnNumber:13},void 0),e.jsxDEV("button",{type:"button",onClick:m,disabled:f.length>=10||!d.trim(),className:Y("px-3 py-2 bg-blue-600 text-white rounded-r-md disabled:opacity-50",f.length<10&&d.trim()&&"hover:bg-blue-700"),children:e.jsxDEV(we,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:501,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:492,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:484,columnNumber:11},void 0),f.length>=10&&e.jsxDEV("p",{className:"text-xs text-red-400 mt-1",children:"Maximum 10 options allowed"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:505,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:446,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"End Date"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:510,columnNumber:11},void 0),e.jsxDEV("input",{type:"datetime-local",value:((k=t.pollDetails)==null?void 0:k.endDate)||"",onChange:g,className:fe,required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:511,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:509,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",id:"allowMultipleChoices",checked:((v=t.pollDetails)==null?void 0:v.allowMultipleChoices)||!1,onChange:c,className:"h-4 w-4 bg-gray-800 border-gray-700 text-blue-600 focus:ring-blue-500 rounded"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:521,columnNumber:11},void 0),e.jsxDEV("label",{htmlFor:"allowMultipleChoices",className:"ml-2 block text-sm text-gray-300",children:"Allow users to select multiple options"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:528,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:520,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:445,columnNumber:7},void 0)},o=()=>{var b,f,m,w,g;const d=c=>{var k;const x=(((k=t.projectDetails)==null?void 0:k.milestones)||[]).filter(h(c));r({projectDetails:{...t.projectDetails,milestones:x}})};return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Project Status"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:550,columnNumber:11},void 0),e.jsxDEV("select",{value:((b=t.projectDetails)==null?void 0:b.status)||"PLANNING",onChange:c=>r({projectDetails:{...t.projectDetails,status:c.target.value}}),className:fe,children:[e.jsxDEV("option",{value:"PLANNING",children:"Planning"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:561,columnNumber:13},void 0),e.jsxDEV("option",{value:"IN_PROGRESS",children:"In Progress"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:562,columnNumber:13},void 0),e.jsxDEV("option",{value:"COMPLETED",children:"Completed"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:563,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:551,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:549,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Budget (Optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:568,columnNumber:11},void 0),e.jsxDEV("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsxDEV("span",{className:"text-gray-400 sm:text-sm",children:"ETH"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:571,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:570,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:((f=t.projectDetails)==null?void 0:f.budget)||"",onChange:c=>r({projectDetails:{...t.projectDetails,budget:c.target.value}}),className:"pl-14 block w-full rounded-md bg-gray-800 border-gray-700 text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"0.00"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:573,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:569,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:567,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Team Members (Optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:589,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",value:((w=(m=t.projectDetails)==null?void 0:m.team)==null?void 0:w.join(", "))||"",onChange:c=>r({projectDetails:{...t.projectDetails,team:c.target.value.split(",").map(x=>x.trim()).filter(Boolean)}}),className:fe,placeholder:"Enter comma-separated addresses"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:590,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:588,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Milestones"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:605,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-4",children:[(((g=t.projectDetails)==null?void 0:g.milestones)||[]).map((c,x)=>e.jsxDEV("div",{className:"p-3 border border-gray-700 bg-gray-800/50 rounded-md",children:[e.jsxDEV("div",{className:"flex justify-between mb-2",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-300",children:["Milestone ",x+1]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:610,columnNumber:19},void 0),e.jsxDEV("button",{type:"button",onClick:()=>d(x),className:Y(_s,"text-red-500"),children:e.jsxDEV(hs,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:616,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:611,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:609,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-xs text-gray-400",children:"Title"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:622,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",value:c.title,onChange:k=>{var N;const v=[...((N=t.projectDetails)==null?void 0:N.milestones)||[]];v[x]={...c,title:k.target.value},r({projectDetails:{...t.projectDetails,milestones:v}})},className:fe,placeholder:"Milestone title",required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:623,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:621,columnNumber:19},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-xs text-gray-400",children:"Due Date"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:647,columnNumber:23},void 0),e.jsxDEV("input",{type:"date",value:c.dueDate||"",onChange:k=>{var N;const v=[...((N=t.projectDetails)==null?void 0:N.milestones)||[]];v[x]={...c,dueDate:k.target.value},r({projectDetails:{...t.projectDetails,milestones:v}})},className:fe,required:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:648,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:646,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-xs text-gray-400",children:"Status"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:670,columnNumber:23},void 0),e.jsxDEV("div",{className:"mt-1 flex items-center",children:[e.jsxDEV("input",{type:"checkbox",id:`milestone-${x}-completed`,checked:c.completed||!1,onChange:k=>{var N;const v=[...((N=t.projectDetails)==null?void 0:N.milestones)||[]];v[x]={...c,completed:k.target.checked},r({projectDetails:{...t.projectDetails,milestones:v}})},className:"h-4 w-4 bg-gray-800 border-gray-700 text-blue-600 focus:ring-blue-500 rounded"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:672,columnNumber:25},void 0),e.jsxDEV("label",{htmlFor:`milestone-${x}-completed`,className:"ml-2 block text-sm text-gray-300",children:"Completed"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:691,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:671,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:669,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:645,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:620,columnNumber:17},void 0)]},x,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:608,columnNumber:15},void 0)),e.jsxDEV("button",{type:"button",onClick:()=>{var c;return r({projectDetails:{...t.projectDetails,milestones:[...((c=t.projectDetails)==null?void 0:c.milestones)||[],{title:"",dueDate:""}]}})},className:"w-full py-2 border-2 border-dashed border-gray-700 rounded-md flex items-center justify-center text-gray-400 hover:text-gray-300 hover:border-gray-600 bg-gray-800/30",children:[e.jsxDEV(we,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:714,columnNumber:15},void 0),e.jsxDEV("span",{children:"Add Milestone"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:715,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:701,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:606,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:604,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:548,columnNumber:7},void 0)},l=()=>{var b,f,m,w,g;const d=c=>{var k;const x=(((k=t.resourceDetails)==null?void 0:k.attachments)||[]).filter(h(c));r({resourceDetails:{...t.resourceDetails,attachments:x}})};return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Resource Type"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:737,columnNumber:11},void 0),e.jsxDEV("select",{value:((b=t.resourceDetails)==null?void 0:b.type)||"DOCUMENT",onChange:c=>r({resourceDetails:{...t.resourceDetails,type:c.target.value}}),className:fe,children:[e.jsxDEV("option",{value:"DOCUMENT",children:"Document"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:748,columnNumber:13},void 0),e.jsxDEV("option",{value:"LINK",children:"Link"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:749,columnNumber:13},void 0),e.jsxDEV("option",{value:"CODE",children:"Code"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:750,columnNumber:13},void 0),e.jsxDEV("option",{value:"OTHER",children:"Other"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:751,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:738,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:736,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Category (Optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:756,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",value:((f=t.resourceDetails)==null?void 0:f.category)||"",onChange:c=>r({resourceDetails:{...t.resourceDetails,category:c.target.value}}),className:fe,placeholder:"E.g. Tutorial, Reference, Guide"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:757,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:755,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300",children:"Version (Optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:772,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",value:((m=t.resourceDetails)==null?void 0:m.version)||"",onChange:c=>r({resourceDetails:{...t.resourceDetails,version:c.target.value}}),className:fe,placeholder:"E.g. v1.0.0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:773,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:771,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Attachments"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:788,columnNumber:11},void 0),(((w=t.resourceDetails)==null?void 0:w.attachments)||[]).length>0&&e.jsxDEV("div",{className:"mb-3 space-y-2",children:(((g=t.resourceDetails)==null?void 0:g.attachments)||[]).map((c,x)=>e.jsxDEV("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded-md",children:[e.jsxDEV("div",{className:"flex items-center",children:e.jsxDEV("div",{className:"ml-3",children:[e.jsxDEV("p",{className:"text-sm font-medium text-white",children:c.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:796,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-xs text-gray-400",children:[Math.round(c.size/1024)," KB"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:797,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:795,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:794,columnNumber:19},void 0),e.jsxDEV("button",{type:"button",onClick:()=>d(x),className:Y(_s,"text-red-500"),children:e.jsxDEV(hs,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:805,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:800,columnNumber:19},void 0)]},x,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:793,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:791,columnNumber:13},void 0),e.jsxDEV("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed border-gray-700 rounded-md bg-gray-800/50",children:e.jsxDEV("div",{className:"space-y-1 text-center",children:[e.jsxDEV(Ws,{className:"mx-auto h-12 w-12 text-gray-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:814,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxDEV("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500 focus-within:ring-offset-gray-800",children:[e.jsxDEV("span",{children:"Upload a file"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:820,columnNumber:19},void 0),e.jsxDEV("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:c=>{var k,v;const x=(k=c.target.files)==null?void 0:k[0];x&&r({resourceDetails:{...t.resourceDetails,attachments:[...((v=t.resourceDetails)==null?void 0:v.attachments)||[],{name:x.name,size:x.size,type:x.type,url:URL.createObjectURL(x)}]}})}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:821,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:816,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:815,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"PDF, DOC, or any other file up to 10MB"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:849,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:813,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:812,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:787,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:735,columnNumber:7},void 0)},u=()=>{const d=b=>{var m;const f=(m=t.mediaContent)==null?void 0:m.filter(h(b));r({mediaContent:f})};return e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Media Files"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:866,columnNumber:11},void 0),t.mediaContent&&t.mediaContent.length>0&&e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 mb-4",children:t.mediaContent.map((b,f)=>e.jsxDEV("div",{className:"relative rounded-lg overflow-hidden",children:[b.type==="image"&&e.jsxDEV("img",{src:b.url,alt:b.name,className:"w-full h-32 object-cover rounded-lg"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:873,columnNumber:21},void 0),b.type==="video"&&e.jsxDEV("video",{src:b.url,className:"w-full h-32 object-cover rounded-lg"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:876,columnNumber:21},void 0),b.type==="audio"&&e.jsxDEV("div",{className:"w-full h-32 bg-gray-800 flex items-center justify-center rounded-lg",children:e.jsxDEV("audio",{src:b.url,controls:!0,className:"w-full max-w-[180px]"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:880,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:879,columnNumber:21},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-black bg-opacity-60 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxDEV("button",{type:"button",onClick:()=>d(f),className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700",children:e.jsxDEV(hs,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:889,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:884,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:883,columnNumber:19},void 0),e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1 truncate",children:b.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:892,columnNumber:19},void 0)]},f,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:871,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:869,columnNumber:13},void 0),e.jsxDEV("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed border-gray-700 rounded-md bg-gray-800/50",children:e.jsxDEV("div",{className:"space-y-1 text-center",children:[e.jsxDEV(Ws,{className:"mx-auto h-12 w-12 text-gray-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:902,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex text-sm text-gray-400 justify-center",children:e.jsxDEV("label",{htmlFor:"media-upload",className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500 focus-within:ring-offset-gray-800",children:[e.jsxDEV("span",{children:"Upload media"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:908,columnNumber:19},void 0),e.jsxDEV("input",{id:"media-upload",name:"media-upload",type:"file",accept:"image/*,video/*,audio/*",multiple:!0,className:"sr-only",onChange:b=>{const f=Array.from(b.target.files||[]);if(f.length===0)return;const m=f.map(w=>{let g="image";return w.type.startsWith("image/")?g="image":w.type.startsWith("video/")&&(g="video"),{type:g,url:URL.createObjectURL(w),name:w.name,size:w.size}});r({mediaContent:[...t.mediaContent||[],...m]})}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:909,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:904,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:903,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Images, videos, or audio files up to 50MB"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:947,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:901,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:900,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:865,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeFields.tsx",lineNumber:864,columnNumber:7},void 0)},h=d=>(b,f)=>f!==d;switch(s){case gt[S.EVENT]:return a();case gt[S.POLL]:return i();case"project":return o();case"resource":return l();case"rich_media":return u();default:return null}},Dt={[S.TEXT]:"text",[S.IMAGE]:"image",[S.VIDEO]:"video",[S.LINK]:"link",[S.EVENT]:"event",[S.POLL]:"poll"},va=[{type:S.TEXT,icon:Ot,label:"Text",color:"#3b82f6",description:"Share your thoughts with the community"},{type:S.IMAGE,icon:ts,label:"Media",color:"#ec4899",description:"Share images, videos, or audio"},{type:S.EVENT,icon:An,label:"Event",color:"#f59e0b",description:"Organize meetups or virtual events"},{type:S.POLL,icon:Mn,label:"Poll",color:"#8b5cf6",description:"Get community feedback through voting"},{type:S.LINK,icon:On,label:"Link",color:"#6366f1",description:"Share links or resources"},{type:S.VIDEO,icon:Rn,label:"Video",color:"#ef4444",description:"Share videos with the community"}],tn=({mode:s="modal",isOpen:n=!1,onClose:t,onCancel:r,tribeId:a,onSuccess:i,onError:o,className:l="",availableTypes:u=Object.values(S).filter(d=>typeof d=="number"),defaultType:h=S.TEXT})=>{const d=as(),b=ss(en),f=ss(sn),m=ss(sa),[w,g]=p.useState(null),[c,x]=p.useState(!1),k=p.useRef(null),v=p.useRef(null),N=p.useRef(null),C=s==="modal"?n||f:n,P=()=>{s==="modal"?d(rs(!1)):(t==null||t(),r==null||r()),d(Nt()),g(null),x(!1)},y=D=>{switch(d(ea(D)),D){case S.TEXT:d(Ce({type:String(S.TEXT),content:b.content||"",title:b.title||""}));break;case S.EVENT:b.eventDetails||d(Ce({eventDetails:{title:b.title||"",organizer:"",startDate:new Date().toISOString(),endDate:new Date(Date.now()+36e5).toISOString(),location:{type:"PHYSICAL",physical:""},maxTickets:0,price:0}}));break;case S.POLL:b.pollDetails||d(Ce({pollDetails:{options:[{id:Date.now().toString(),text:"",votes:0},{id:(Date.now()+1).toString(),text:"",votes:0}],endDate:new Date(Date.now()+864e5).toISOString(),allowMultipleChoices:!1,requireVerification:!1}}));break;case S.LINK:b.resourceDetails||d(Ce({resourceDetails:{type:"LINK",attachments:[]}}));break;case S.IMAGE:case S.VIDEO:(!b.mediaContent||b.mediaContent.length===0)&&d(Ce({mediaContent:[]}));break}setTimeout(()=>{var U;(U=k.current)==null||U.focus()},0)},T=async D=>{var U;if(D.preventDefault(),g(null),!((U=b.content)!=null&&U.trim())){g("Please enter content for your post");return}try{x(!0);const E={...b,type:b.type===void 0?S.TEXT:b.type,tribeId:String(a)};Number(E.type)===S.TEXT&&(E.content=b.content||"",E.createdAt=new Date().toISOString()),console.log("Submitting post:",E);const V=await d(gs(E)).unwrap();V&&(d(Nt()),s==="modal"&&d(rs(!1)),i&&i(V.id))}catch(E){g(E.message||"Failed to create post"),o&&o(E)}finally{x(!1)}},j=p.useMemo(()=>{if(typeof b.type=="number")return Dt[b.type]||"text";if(typeof b.type=="string"){const D=b.type.toLowerCase();if(Object.values(Dt).some(U=>U===D))return D}return"text"},[b.type]),I=()=>e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex flex-wrap gap-2",role:"radiogroup","aria-label":"Post type",children:va.filter(D=>typeof D.type=="number"&&u.includes(D.type)).map(({type:D,icon:U,label:E,color:V})=>{const F=Number(b.type)===D;return e.jsxDEV("button",{type:"button",role:"radio","aria-checked":F,onClick:()=>y(D),className:Y("px-3 py-2 rounded-lg flex items-center gap-2 transition-colors",F?"bg-opacity-20 ring-2 text-white":"bg-black/10 text-gray-300 hover:bg-black/20"),style:{backgroundColor:F?`${V}20`:void 0,borderColor:F?V:void 0,boxShadow:F?`0 0 0 1px ${V}`:void 0},tabIndex:0,children:[e.jsxDEV(U,{size:16,style:{color:F?V:void 0}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:300,columnNumber:17},void 0),e.jsxDEV("span",{children:E},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:301,columnNumber:17},void 0)]},D,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:281,columnNumber:15},void 0)})},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:273,columnNumber:7},void 0),(w||m)&&e.jsxDEV("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-200",role:"alert",children:w||m},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:309,columnNumber:9},void 0),e.jsxDEV("div",{children:e.jsxDEV("input",{ref:k,type:"text",placeholder:"Post title",value:b.title||"",onChange:D=>d(Ce({title:D.target.value})),className:"w-full px-4 py-3 rounded-lg bg-black/20 text-white border border-white/10 focus:ring-2 focus:ring-accent focus:border-transparent",disabled:c,tabIndex:0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:316,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:315,columnNumber:7},void 0),e.jsxDEV("div",{children:e.jsxDEV("textarea",{placeholder:"What's on your mind?",value:b.content||"",onChange:D=>d(Ce({content:D.target.value})),className:"w-full px-4 py-3 rounded-lg bg-black/20 text-white border border-white/10 focus:ring-2 focus:ring-accent focus:border-transparent min-h-[120px] resize-none",disabled:c,tabIndex:0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:330,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:329,columnNumber:7},void 0),e.jsxDEV("div",{className:"pt-2 border-t border-gray-700/30",children:e.jsxDEV(Ea,{type:j},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:342,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:341,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex justify-end pt-2 border-t border-gray-700/30",children:e.jsxDEV("button",{ref:N,type:"submit",disabled:c,className:Y("px-4 py-2 rounded-lg font-medium",c?"bg-accent/50 cursor-not-allowed":"bg-accent hover:bg-accent/90 text-black"),tabIndex:0,children:c?"Creating...":"Create Post"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:347,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:346,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:271,columnNumber:5},void 0);return s==="inline"?e.jsxDEV("form",{onSubmit:T,className:l,children:I()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:368,columnNumber:7},void 0):s==="dialog"?e.jsxDEV("div",{className:`bg-card rounded-xl shadow-xl p-6 ${l}`,children:e.jsxDEV("form",{onSubmit:T,children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Create Post"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:377,columnNumber:13},void 0),t&&e.jsxDEV("button",{type:"button",onClick:P,className:"text-gray-400 hover:text-white",tabIndex:0,children:e.jsxDEV(Ue,{size:20},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:385,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:379,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:376,columnNumber:11},void 0),I()]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:375,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:374,columnNumber:7},void 0):e.jsxDEV(dt,{appear:!0,show:C,as:W.Fragment,children:e.jsxDEV(Fs,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:P,initialFocus:k,children:[e.jsxDEV("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm","aria-hidden":"true"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:404,columnNumber:11},void 0),e.jsxDEV("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxDEV(dt.Child,{as:W.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxDEV(Fs.Panel,{className:"w-full max-w-2xl overflow-hidden rounded-xl bg-gray-900 border border-gray-800 shadow-xl",children:e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV(Fs.Title,{as:"h3",className:"text-xl font-medium leading-6 text-white",children:"Create Post"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:420,columnNumber:21},void 0),e.jsxDEV("button",{type:"button",ref:v,className:"p-2 rounded-full focus:outline-none hover:bg-gray-800",onClick:P,tabIndex:0,children:e.jsxDEV(Ue,{className:"w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:433,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:426,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:419,columnNumber:19},void 0),e.jsxDEV("form",{onSubmit:T,children:I()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:437,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:418,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:417,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:408,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:407,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:397,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/post/PostCreator.tsx",lineNumber:396,columnNumber:7},void 0)},nn=({tribeId:s})=>{const n=ss(sn);return e.jsxDEV(tn,{mode:"modal",isOpen:n,tribeId:s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/CreatePostModal.tsx",lineNumber:17,columnNumber:5},void 0)};function ka(){const s=ce(),n=Ps(),t=as(),[r,a]=p.useState(!1),[i,o]=p.useState(!1),[l,u]=p.useState(!1),h=[{icon:e.jsxDEV(_n,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:19,columnNumber:13},this),label:"Create Post",action:()=>{a(!1),t(rs(!0))}},{icon:e.jsxDEV(Ee,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:27,columnNumber:13},this),label:"Create Tribe",action:()=>{a(!1),o(!0)}}],d=()=>{a(!r)},b=m=>{o(!1),s(`/tribes/${m}`)},f=()=>{n.pathname!=="/"&&s("/")};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("nav",{className:"fixed bottom-0 left-0 right-0 z-40 shadow-md",style:{backgroundColor:"var(--chain-bg)"},children:e.jsxDEV("div",{className:"flex items-center justify-around py-3",children:[e.jsxDEV("button",{onClick:f,className:`flex flex-col items-center space-y-1 ${n.pathname==="/"?"text-theme-primary":"text-text-secondary"}`,children:[e.jsxDEV(Ln,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:61,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs",children:"Home"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:62,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:55,columnNumber:11},this),e.jsxDEV("button",{onClick:d,className:"flex flex-col items-center space-y-1 text-text-secondary hover:text-theme-primary",children:[e.jsxDEV(Bn,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:69,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs",children:"Create"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:70,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:65,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>s("/profile"),className:`flex flex-col items-center space-y-1 ${n.pathname==="/profile"?"text-theme-primary":"text-text-secondary"}`,children:[e.jsxDEV($n,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:79,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs",children:"Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:73,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:54,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:53,columnNumber:7},this),r&&e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",onClick:()=>a(!1),children:[e.jsxDEV("div",{className:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(var(--chain-bg-rgb), 0.8)"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:88,columnNumber:11},this),e.jsxDEV("div",{className:"relative w-full max-w-md rounded-t-2xl sm:rounded-xl overflow-hidden shadow-lg z-10",style:{backgroundColor:"var(--chain-bg)"},onClick:m=>m.stopPropagation(),children:e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV("h2",{className:"text-xl font-bold text-white",children:"Create"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:96,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>a(!1),className:"text-text-secondary hover:text-white",children:e.jsxDEV(Ue,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:98,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:97,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:95,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((m,w)=>e.jsxDEV("button",{onClick:m.action,className:"p-4 flex flex-col items-center bg-black/20 rounded-xl hover:bg-black/30 transition-colors",children:[m.icon,e.jsxDEV("span",{className:"font-medium mt-2",children:m.label},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:110,columnNumber:21},this)]},w,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:104,columnNumber:19},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:102,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:94,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:89,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:87,columnNumber:9},this),e.jsxDEV(nn,{tribeId:"1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:120,columnNumber:7},this)," ",i&&e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",onClick:()=>o(!1),children:[e.jsxDEV("div",{className:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(var(--chain-bg-rgb), 0.8)"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:125,columnNumber:11},this),e.jsxDEV("div",{className:"relative w-full max-w-2xl rounded-t-2xl sm:rounded-xl overflow-hidden shadow-lg z-10 max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--chain-bg)"},onClick:m=>m.stopPropagation(),children:e.jsxDEV("div",{className:"px-6 py-5",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-5",children:[e.jsxDEV("h2",{className:"text-xl font-bold text-white",children:"Create Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:133,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>o(!1),className:"text-text-secondary hover:text-white transition-colors",children:e.jsxDEV(Ue,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:135,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:134,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:132,columnNumber:15},this),e.jsxDEV(Da,{onSuccess:b,onCancel:()=>o(!1)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:138,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:131,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:126,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:124,columnNumber:9},this),l&&e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",onClick:()=>u(!1),children:[e.jsxDEV("div",{className:"absolute inset-0 backdrop-blur-sm",style:{backgroundColor:"rgba(var(--chain-bg-rgb), 0.8)"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:150,columnNumber:11},this),e.jsxDEV("div",{className:"relative w-full max-w-md rounded-t-2xl sm:rounded-xl overflow-hidden shadow-lg z-10 max-h-[90vh] overflow-y-auto",style:{backgroundColor:"var(--chain-bg)"},onClick:m=>m.stopPropagation(),children:e.jsxDEV("div",{className:"p-4",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV("h2",{className:"text-xl font-bold",children:"Notifications"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:158,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>u(!1),className:"text-text-secondary",children:e.jsxDEV(Ue,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:160,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:159,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:157,columnNumber:15},this),e.jsxDEV("div",{className:"text-center text-text-secondary py-8 bg-black/20 rounded-xl",children:"You have no notifications"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:165,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:156,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:151,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:149,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/BottomNav.tsx",lineNumber:52,columnNumber:5},this)}const Ta={sdk:null,isInitialized:!1,tribes:[],isLoading:!1,error:null,refreshTribes:async()=>{},getTribe:async()=>null},rn=p.createContext(Ta);function Ua({children:s,sdk:n,isInitialized:t}){const[r,a]=p.useState([]),[i,o]=p.useState(!1),[l,u]=p.useState(null),{address:h}=ls(),d=p.useCallback(async()=>{if(!n||!t){console.log("Cannot refresh tribes: SDK not initialized");return}try{o(!0),u(null),console.log("Refreshing tribes...");const f=await n.getTribesCount();console.log(`Found ${f} tribes`);const m=[];for(let w=1;w<=f;w++)try{const g=await n.getTribe(w);g&&m.push(g)}catch(g){console.error(`Error fetching tribe ${w}:`,g)}a(m),console.log("Loaded tribes:",m)}catch(f){console.error("Error refreshing tribes:",f),u(f.message)}finally{o(!1)}},[n,t]),b=p.useCallback(async f=>{if(!n||!t)return console.log("Cannot get tribe: SDK not initialized"),null;try{return await n.getTribe(f)}catch(m){return console.error(`Error getting tribe ${f}:`,m),null}},[n,t]);return p.useEffect(()=>{t&&d()},[t,h,d]),e.jsxDEV(rn.Provider,{value:{sdk:n,isInitialized:t,tribes:r,isLoading:i,error:l,refreshTribes:d,getTribe:b},children:s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/contexts/TribesContext.tsx",lineNumber:100,columnNumber:5},this)}function Vs(){const s=p.useContext(rn);if(s===void 0)throw new Error("useTribesSDK must be used within a TribesProvider");return s}function Is(){const{sdk:s,isInitialized:n,tribes:t,isLoading:r,error:a,refreshTribes:i,getTribe:o}=Vs();ls();const l=p.useCallback(async f=>{const m=await o(f);if(!m)throw new Error(`Tribe ${f} not found`);return m},[o]),u=p.useCallback(async()=>i(),[i]),h=p.useCallback(async()=>i(),[i]),d=p.useCallback(async f=>{if(!s)throw new Error("SDK not initialized");try{return await s.getUserTribes(f)}catch(m){throw console.error("Error getting user tribes:",m),m}},[s]),b=p.useCallback(async(f,m)=>{if(!s)throw new Error("SDK not initialized");try{return await s.getMemberStatus(f,m)}catch(w){throw console.error("Error getting member status:",w),w}},[s]);return{isLoading:r,error:a,tribes:t,userTribes:[],getTribe:l,getAllTribes:u,getUserTribes:d,getMemberStatus:b,refreshTribes:h}}function nt(s,n="/images/default-avatar.png"){if(!s)return n;try{const t=s;if(t.avatar&&typeof t.avatar=="string"&&t.avatar.trim()!=="")return console.log(`Using direct avatar for tribe ${s.id}:`,t.avatar),t.avatar;let r=null;if(typeof s.metadata=="string"&&s.metadata.trim()!=="")try{r=JSON.parse(s.metadata),console.log(`Successfully parsed metadata for tribe ${s.id}`)}catch(a){console.error(`Error parsing metadata JSON for tribe ${s.id}:`,a)}else typeof s.metadata=="object"&&s.metadata!==null&&(r=s.metadata,console.log(`Using metadata object directly for tribe ${s.id}`));if(r!=null&&r.avatar&&typeof r.avatar=="string"&&r.avatar.trim()!=="")return console.log(`Found avatar in metadata for tribe ${s.id}:`,r.avatar),r.avatar;if(s.id&&s.name){const a=`https://api.dicebear.com/7.x/shapes/svg?seed=${encodeURIComponent(s.id)}-${encodeURIComponent(s.name)}`;return console.log(`Generated avatar for tribe ${s.id}:`,a),a}return console.log(`Using default avatar for tribe ${s.id}`),n}catch(t){return console.error(`Error processing avatar for tribe ${s.id}:`,t),n}}function Js(s){if(!s)return"public";try{if(s.privacy==="private")return"private";let t=null;if(typeof s.metadata=="string"&&s.metadata.trim()!=="")try{t=JSON.parse(s.metadata)}catch(r){console.error(`Error parsing metadata JSON for tribe ${s.id}:`,r)}else typeof s.metadata=="object"&&s.metadata!==null&&(t=s.metadata);return(t==null?void 0:t.isPrivate)===!0||(t==null?void 0:t.privacy)==="private"?"private":"public"}catch(n){return console.error(`Error parsing metadata for tribe ${s.id}:`,n),"public"}}function rt(s){if(!s)return[];try{const n=s;if(Array.isArray(n.topics))return n.topics.map((r,a)=>({id:r.id||`topic-${a}`,name:r.name||`Topic ${a+1}`,postCount:r.postCount||0}));let t=null;if(typeof s.metadata=="string"&&s.metadata.trim()!=="")try{t=JSON.parse(s.metadata)}catch(r){console.error(`Error parsing metadata JSON for tribe ${s.id}:`,r)}else typeof s.metadata=="object"&&s.metadata!==null&&(t=s.metadata);return Array.isArray(t==null?void 0:t.topics)?t.topics.map((r,a)=>({id:r.id||`topic-${a}`,name:r.name||`Topic ${a+1}`,postCount:r.postCount||0})):[]}catch(n){return console.error(`Error parsing metadata for tribe ${s.id}:`,n),[]}}function an(s){if(!s)return"";try{const n=s;if(n.description&&typeof n.description=="string")return n.description;let t=null;if(typeof s.metadata=="string"&&s.metadata.trim()!=="")try{t=JSON.parse(s.metadata)}catch(r){console.error(`Error parsing metadata JSON for tribe ${s.id}:`,r)}else typeof s.metadata=="object"&&s.metadata!==null&&(t=s.metadata);return t!=null&&t.description&&typeof t.description=="string"?t.description:""}catch(n){return console.error(`Error parsing metadata for tribe ${s.id}:`,n),""}}function on(s,n="/images/default-cover.png"){if(!s)return n;try{const t=s;if(t.coverImage&&typeof t.coverImage=="string"&&t.coverImage.trim()!=="")return t.coverImage;let r=null;if(typeof s.metadata=="string"&&s.metadata.trim()!=="")try{r=JSON.parse(s.metadata)}catch(a){console.error(`Error parsing metadata JSON for tribe ${s.id}:`,a)}else typeof s.metadata=="object"&&s.metadata!==null&&(r=s.metadata);return r!=null&&r.coverImage&&typeof r.coverImage=="string"&&r.coverImage.trim()!==""?r.coverImage:n}catch(t){return console.error(`Error parsing metadata for tribe ${s.id}:`,t),n}}function Pa(s){var n;if(!s)return{isMember:!1,isPending:!1,isAdmin:!1};try{const t=s;if(t.userMembershipStatus)return{isMember:!!t.userMembershipStatus.isMember,isPending:!!t.userMembershipStatus.isPending,isAdmin:!!t.userMembershipStatus.isAdmin};let r=null;if(typeof s.metadata=="string"&&s.metadata.trim()!=="")try{r=JSON.parse(s.metadata)}catch(a){console.error(`Error parsing metadata JSON for tribe ${s.id}:`,a)}else typeof s.metadata=="object"&&s.metadata!==null&&(r=s.metadata);return r!=null&&r.userMembershipStatus?{isMember:!!r.userMembershipStatus.isMember,isPending:!!r.userMembershipStatus.isPending,isAdmin:!!r.userMembershipStatus.isAdmin}:{isMember:!!t.isMember,isPending:!!t.isPending,isAdmin:!!(t.isAdmin||(n=s.admins)!=null&&n.includes(t.currentUser))}}catch(t){return console.error(`Error getting membership status for tribe ${s.id}:`,t),{isMember:!1,isPending:!1,isAdmin:!1}}}function ja({isOpen:s,onClose:n}){const t=ce(),r=Ps(),{tribes:a,isLoading:i}=Is(),o=r.pathname,l=(a==null?void 0:a.flatMap(u=>rt(u).map(d=>({...d,tribeName:u.name,tribeId:u.id}))))||[];return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:Y("fixed inset-0 bg-black/50 backdrop-blur-sm z-30 md:hidden transition-opacity",s?"opacity-100":"opacity-0 pointer-events-none"),onClick:n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:31,columnNumber:7},this),e.jsxDEV("aside",{className:Y("fixed md:sticky top-[64px] left-0 h-[calc(100vh-64px-64px)] w-64","bg-theme-bg/90 backdrop-blur-xl z-30","transform transition-transform duration-200 ease-in-out","overflow-hidden flex flex-col",s?"translate-x-0":"-translate-x-full md:translate-x-0"),children:[e.jsxDEV("div",{className:"p-4 flex justify-between items-center md:hidden",children:[e.jsxDEV("h2",{className:"text-xl font-bold text-text-primary",children:"Navigation"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:51,columnNumber:11},this),e.jsxDEV("button",{onClick:n,className:"p-1 text-text-primary hover:text-theme-primary",children:e.jsxDEV(Ue,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:53,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:52,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:50,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:e.jsxDEV("div",{className:"p-4 space-y-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-4 text-sm font-medium text-text-secondary sticky top-0 bg-theme-bg/90 backdrop-blur-xl py-2",children:[e.jsxDEV(Ee,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:63,columnNumber:17},this),e.jsxDEV("span",{children:"TRIBES"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:64,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:62,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-1",children:i?[...Array(3)].map((u,h)=>e.jsxDEV("div",{className:"animate-pulse bg-theme-primary/5 h-9 rounded-lg"},h,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:70,columnNumber:21},this)):a==null?void 0:a.map(u=>{const h=nt(u),d=Js(u);return e.jsxDEV("button",{onClick:()=>{t(`/tribes/${u.id}`),n()},className:Y("w-full px-2 py-1.5 rounded-lg","flex gap-2 transition-colors","text-text-secondary hover:text-text-primary","hover:bg-theme-primary/5",o===`/tribes/${u.id}`?"bg-theme-primary/10 text-text-primary":""),children:[e.jsxDEV("img",{src:h,alt:u.name,className:"w-6 h-6 rounded-lg",onError:b=>{b.target.src="/images/default-avatar.png"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:91,columnNumber:23},this),e.jsxDEV("span",{className:"flex-1 truncate text-sm text-left",children:u.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:100,columnNumber:23},this),d==="public"?e.jsxDEV(Je,{className:"w-3 h-3 opacity-50"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:102,columnNumber:25},this):e.jsxDEV(qe,{className:"w-3 h-3 opacity-50"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:104,columnNumber:25},this)]},u.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:77,columnNumber:21},this)})},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:66,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:61,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-4 text-sm font-medium text-text-secondary sticky top-0 bg-theme-bg/90 backdrop-blur-xl py-2",children:[e.jsxDEV(Ds,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:115,columnNumber:17},this),e.jsxDEV("span",{children:"TOPICS"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:116,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:114,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:i?[...Array(4)].map((u,h)=>e.jsxDEV("div",{className:"animate-pulse bg-theme-primary/5 h-7 w-24 rounded-full"},h,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:122,columnNumber:21},this)):l.length>0?l.map(u=>e.jsxDEV("button",{onClick:()=>{t(`/tribes/${u.tribeId}/topics/${u.id}`),n()},className:Y("inline-flex items-center px-3 py-1 rounded-full","text-sm transition-colors gap-1","hover:bg-theme-primary/5",o===`/tribes/${u.tribeId}/topics/${u.id}`?"bg-theme-primary/10 text-text-primary":"bg-black/50 text-text-secondary hover:text-text-primary"),children:[e.jsxDEV(Ds,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:141,columnNumber:23},this),e.jsxDEV("span",{className:"truncate max-w-[120px]",children:u.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:142,columnNumber:23},this),e.jsxDEV("span",{className:"text-xs opacity-50 shrink-0",children:u.postCount},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:143,columnNumber:23},this)]},`${u.tribeId}-${u.id}`,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:126,columnNumber:21},this)):e.jsxDEV("div",{className:"text-sm text-text-secondary italic px-2",children:"No topics available"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:149,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:118,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:113,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:59,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:58,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:40,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Sidebar.tsx",lineNumber:29,columnNumber:5},this)}function Ca(){const[s,n]=p.useState(!1);return e.jsxDEV("div",{className:"min-h-screen bg-black",children:[e.jsxDEV(tt,{onMenuClick:()=>n(!s)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:12,columnNumber:7},this),e.jsxDEV("div",{className:"flex",children:[e.jsxDEV(ja,{isOpen:s,onClose:()=>n(!1)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:14,columnNumber:9},this),e.jsxDEV("main",{className:"flex-1 pb-20 md:pb-0",children:e.jsxDEV(zn,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:16,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:15,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:13,columnNumber:7},this),e.jsxDEV(ka,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:19,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/Layout.tsx",lineNumber:11,columnNumber:5},this)}const at={AUTH:"tribes_auth",FOLLOWERS:"tribes_followers",ONBOARDING:"tribes_onboarding"},Va=()=>{const s=localStorage.getItem(at.AUTH);return s?JSON.parse(s):{address:null,isConnected:!1}},Ia=()=>{const s=localStorage.getItem(at.FOLLOWERS);return s?JSON.parse(s):[]},Sa=()=>Ia().length>=3,Fa=()=>{const s=localStorage.getItem(at.ONBOARDING);return s?JSON.parse(s):{hasSkippedFollowing:!1,currentStep:0}},Aa="tribes_auth_state",ie=(s,n)=>{const t=new Date().toISOString().split("T")[1].split(".")[0];n?console.log(`[RootRoute:${t}] ${s}`,n):console.log(`[RootRoute:${t}] ${s}`)};function Ma(){const s=ce(),{isConnected:n,address:t}=js(),r=p.useRef(!1),a=o=>{try{const l=localStorage.getItem("redirect_attempts")||"{}",u=JSON.parse(l);return u[o]=(u[o]||0)+1,localStorage.setItem("redirect_attempts",JSON.stringify(u)),o==="/connect"&&u[o]>5?(ie("Too many redirects to connect page, clearing auth state"),localStorage.removeItem(Aa),localStorage.removeItem("tribes_auth"),localStorage.removeItem("tribes_profile"),!1):!0}catch(l){return console.error("Error tracking redirects:",l),!0}},i=o=>{a(o)?(ie(`Navigating to ${o}`),s(o)):ie("Navigation blocked to prevent loop")};return p.useEffect(()=>{(async()=>{if(r.current){ie("Check already in progress, skipping");return}r.current=!0,ie("Starting state check");try{const l=Va();if(ie("Auth data from storage",{isConnected:l.isConnected,hasAddress:!!l.address}),!l.isConnected||!l.address){ie("No saved auth, redirecting to connect"),i("/connect");return}if(!n||!t){ie("No active connection, redirecting to connect"),i("/connect");return}try{ie("Checking profile for address",{address:t});const u=await he.getProfileByAddress(t);ie("Profile check result",{exists:!!u.profile});const h=Fa();if(!u.profile){ie("No profile, redirecting to username setup"),i("/username-setup");return}if(!h.hasSkippedFollowing&&!Sa()){ie("Profile exists but onboarding incomplete"),i("/onboarding");return}ie("Profile complete, redirecting to dashboard"),i("/dashboard")}catch(u){console.error("Error checking profile:",u),ie("Error checking profile",{error:u}),i("/connect")}}finally{r.current=!1}})()},[n,t,s]),ie("Rendering null"),null}const Oa=s=>{switch(s){case"success":return e.jsxDEV(Gn,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:19,columnNumber:14},void 0);case"error":return e.jsxDEV(Lt,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:21,columnNumber:14},void 0);case"warning":return e.jsxDEV(Wn,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:23,columnNumber:14},void 0);case"info":return e.jsxDEV(Rt,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:25,columnNumber:14},void 0)}},Ra={success:"bg-success-main/20 text-success-main border-success-main/20",error:"bg-destructive/20 text-destructive border-destructive/20",warning:"bg-yellow-500/20 text-yellow-500 border-yellow-500/20",info:"bg-blue-500/20 text-blue-500 border-blue-500/20"},La=({message:s,type:n,isVisible:t,onClose:r,duration:a=3e3})=>(p.useEffect(()=>{if(t){const i=setTimeout(()=>{r()},a);return()=>clearTimeout(i)}},[t,a,r]),e.jsxDEV(Kn,{children:t&&e.jsxDEV(qn.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 right-4 z-50",children:e.jsxDEV("div",{className:xe("flex items-center space-x-3 px-4 py-3 rounded-lg border backdrop-blur-sm shadow-lg",Ra[n]),children:[Oa(n),e.jsxDEV("span",{className:"text-sm font-medium",children:s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:69,columnNumber:13},void 0),e.jsxDEV("button",{onClick:r,className:"ml-2 hover:opacity-70 transition-opacity",children:e.jsxDEV(Ue,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:74,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:70,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:62,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:56,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/NotificationToast.tsx",lineNumber:54,columnNumber:5},void 0)),ln=p.createContext(void 0),ot=()=>{const s=p.useContext(ln);if(!s)throw new Error("useNotification must be used within a NotificationProvider");return s},Ba=({children:s})=>{const[n,t]=p.useState({message:"",type:"info",isVisible:!1}),r=p.useCallback((i,o)=>{t({message:i,type:o,isVisible:!0})},[]),a=p.useCallback(()=>{t(i=>({...i,isVisible:!1}))},[]);return e.jsxDEV(ln.Provider,{value:{showNotification:r},children:[s,e.jsxDEV(La,{message:n.message,type:n.type,isVisible:n.isVisible,onClose:a},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/contexts/NotificationContext.tsx",lineNumber:51,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/contexts/NotificationContext.tsx",lineNumber:49,columnNumber:5},void 0)},$a=s=>s?be.some(n=>n.id===s):!1,Me=(s,n)=>{const t=new Date().toISOString().split("T")[1].split(".")[0];n?console.log(`[useProfile:${t}] ${s}`,n):console.log(`[useProfile:${t}] ${s}`)};function Ze(){const{sdk:s,isInitialized:n}=Vs(),[t,r]=p.useState(!1),[a,i]=p.useState(null),[o,l]=p.useState(null),{address:u,isConnected:h,walletClient:d}=ls(),{showNotification:b}=ot(),{chainId:f}=Pe();p.useEffect(()=>{(async()=>{if(s&&h&&d&&u)try{Me("Connecting SDK to wallet",{address:u}),await s.connect(d,u)}catch(U){i(U.message),Me("SDK wallet connection error",{error:U.message})}})()},[s,h,d,u]);const m=p.useCallback(async D=>{if(!s)throw new Error("SDK not initialized");r(!0),i(null);try{const U=await s.getProfileById(D);l(U)}catch(U){const E=U instanceof Error?U.message:"Failed to get profile";i(E),console.error("Error getting profile:",U)}finally{r(!1)}},[s]),w=p.useCallback(async D=>{if(!s)throw new Error("SDK not initialized");r(!0),i(null);try{const U=await s.getProfileByUsername(D);l(U)}catch(U){const E=U instanceof Error?U.message:"Failed to get profile";i(E),console.error("Error getting profile by username:",U)}finally{r(!1)}},[s]),g=p.useCallback(async(D,U)=>{if(!s)throw new Error("SDK not initialized");if(!h||!d||!u)throw new Error("Wallet not connected. Please connect your wallet and try again.");let E=0;const V=3;for(;E<V;){try{if(console.log(`[useProfile] Connecting SDK to wallet, attempt ${E+1}/${V}`),await s.connect(d,u),s.isWalletConnected()){console.log("[useProfile] SDK successfully connected to wallet");break}else console.warn("[useProfile] SDK connection verification failed, retrying...")}catch(F){if(console.error(`[useProfile] SDK connection attempt ${E+1} failed:`,F),E===V-1)throw new Error("Failed to connect to wallet after multiple attempts. Please try again.")}E++,await new Promise(F=>setTimeout(F,500*E))}r(!0),i(null);try{const F=JSON.parse(U),L=await s.createProfile(D,F),X=await s.getProfileById(L);return l(X),L}catch(F){const L=F instanceof Error?F.message:"Failed to create profile";throw i(L),console.error("Error creating profile:",F),F}finally{r(!1)}},[s,h,d,u]),c=p.useCallback(async(D,U)=>{if(!s)throw new Error("SDK not initialized");r(!0),i(null);try{const E=JSON.parse(U);await s.updateProfileMetadata(D,E);const V=await s.getProfileById(D);l(V)}catch(E){const V=E instanceof Error?E.message:"Failed to update profile";throw i(V),console.error("Error updating profile:",E),E}finally{r(!1)}},[s]),x=p.useCallback(async D=>{if(!s)throw new Error("SDK not initialized");try{return await s.checkUsernameAvailability(D)}catch(U){return console.error("Error checking username availability:",U),!1}},[s]),k=p.useCallback(D=>/^[a-zA-Z0-9_]{3,20}$/.test(D),[]),v=p.useCallback(async D=>{if(!s||!n)return Me("SDK not initialized"),{profile:null,error:{code:"SDK_NOT_INITIALIZED"}};r(!0);try{Me("Getting profile for address",{address:D});const U=await s.getProfileByAddress(D);return U?(Me("Profile found",{profile:U}),l(U),{profile:U}):(Me("No profile found"),{profile:null,error:{code:"NO_PROFILE"}})}catch(U){return Me("Error getting profile",U),{profile:null,error:{code:"UNKNOWN_ERROR"}}}finally{r(!1)}},[s,n]),N=p.useCallback(async D=>{if(!s)throw new Error("SDK not initialized");try{return await s.checkProfileOwnership(D)}catch(U){return console.error("Error checking profile ownership:",U),null}},[s]),C=p.useCallback(async()=>{if(!s||!u)return!1;try{return await s.skipProfileCreation(u)}catch(D){return console.error("Error skipping profile creation:",D),!1}},[s,u]),P=p.useCallback(async D=>{if(!s)return!1;try{return await s.hasSkippedProfileCreation(D)}catch(U){return console.error("Error checking skipped profile creation:",U),!1}},[s]),y=p.useCallback(async D=>{if(!s)return null;try{return await s.findUsernameByAddress(D)}catch(U){return console.error("Error finding username by address:",U),null}},[s]),T=p.useCallback((D,U)=>{try{localStorage.setItem("tribes_auth_state",JSON.stringify({address:D.owner,chainId:U,profile:D,timestamp:Date.now()}))}catch(E){console.error("Failed to update profile cache:",E)}},[]),j=p.useCallback(async(D,U)=>{if(!s)throw new Error("SDK not initialized");r(!0),i(null);try{const E=JSON.parse(U);await s.updateProfileMetadata(parseInt(D),E);const V=await s.getProfileById(parseInt(D));l(V)}catch(E){const V=E instanceof Error?E.message:"Failed to update profile";throw i(V),console.error("Error updating profile:",E),E}finally{r(!1)}},[s]),I=p.useCallback(async D=>{if(!s)throw new Error("SDK not initialized");try{return await s.checkUsernameAvailability(D)}catch(U){return console.error("Error checking username:",U),!1}},[s]);return{profile:o,isLoading:t||!n,error:a,currentChainId:f,isTargetNetwork:$a(f),isSdkInitialized:!!s&&n,getProfileById:m,getProfileByUsername:w,createProfile:g,updateProfileMetadata:c,checkUsernameAvailability:x,validateUsername:k,getProfileByAddress:v,checkProfileOwnership:N,skipProfileCreation:C,hasSkippedProfileCreation:P,findUsernameByAddress:y,updateProfileCache:T,updateProfile:j,checkUsername:I}}const Et="tribes_auth_state",re=(s,n)=>{const t=new Date().toISOString().split("T")[1].split(".")[0];n?console.log(`[WalletConnect:${t}] ${s}`,n):console.log(`[WalletConnect:${t}] ${s}`)},_a=[{id:"metamask",name:"MetaMask",icon:"🦊",installed:!0},{id:"coinbase",name:"Coinbase Wallet",icon:"🔵",installed:!1},{id:"ledger",name:"Ledger",icon:"📱",installed:!1},{id:"rainbow",name:"Rainbow Wallet",icon:"🌈",installed:!1}],un=()=>{const s=ce(),{getProfileByAddress:n}=Ze(),{chainId:t,switchNetwork:r}=Pe(),[a,i]=p.useState(!1),[o,l]=p.useState(),u=p.useRef(0);p.useEffect(()=>{re("WalletConnect component mounted - clearing redirect attempts");try{const d=localStorage.getItem("redirect_attempts");if(d){const b=JSON.parse(d);b["/connect"]&&b["/connect"]>5&&(re("Too many redirect attempts detected, clearing auth state"),localStorage.removeItem(Et),localStorage.removeItem("tribes_auth"),localStorage.removeItem("tribes_profile"))}localStorage.removeItem("redirect_attempts")}catch(d){console.error("Error clearing redirect attempts:",d)}},[]);const h=async()=>{if(!a){u.current+=1,re(`Starting connection attempt ${u.current}`);try{i(!0),l(void 0),t||(re("No chain ID detected, switching network"),await r(ee.id)),re("Getting wallet client");const d=await st(t);re("Requesting addresses from wallet");const[b]=await d.requestAddresses();if(!b)throw re("No address returned from wallet"),new Error("No address returned from wallet");re("Got address from wallet",{address:b}),re("Checking for profile");const{profile:f,error:m}=await n(b);if(m&&re("Profile check returned error",{code:m.code}),(m==null?void 0:m.code)==="WRONG_CHAIN")throw re("Wrong chain detected, switching network"),await r(ee.id),new Error("Please connect to a supported network");if(b&&(re("Saving address to localStorage"),localStorage.setItem(Et,JSON.stringify({address:b,chainId:t||ee.id,timestamp:Date.now()}))),f){re("Profile found, navigating to dashboard"),s("/dashboard");return}if((m==null?void 0:m.code)==="NO_PROFILE"){re("No profile found, navigating to create-profile"),s("/create-profile");return}re("Unknown profile check result"),l("Failed to check profile status")}catch(d){console.error("Failed to connect wallet:",d),re("Connection error",{error:d}),l(d instanceof Error?d.message:"Failed to connect wallet")}finally{i(!1)}}};return e.jsxDEV("div",{className:"min-h-screen bg-black text-white p-6",children:[e.jsxDEV("div",{className:"flex items-center mb-8",children:[e.jsxDEV("button",{className:"p-2",onClick:()=>s("/"),children:e.jsxDEV(Jn,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:162,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:161,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 flex justify-center space-x-2",children:[e.jsxDEV("div",{className:"w-12 h-2 bg-monad-purple rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:165,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-2 h-2 bg-white/20 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:166,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-2 h-2 bg-white/20 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:167,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-2 h-2 bg-white/20 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:168,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:164,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:160,columnNumber:7},void 0),e.jsxDEV("h1",{className:"text-5xl font-bold mb-4",children:"Connect with wallet"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:172,columnNumber:7},void 0),e.jsxDEV("p",{className:"text-gray-400 mb-8",children:"We found the following options based on compatibility with Tribes."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:173,columnNumber:7},void 0),o&&e.jsxDEV("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:178,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3",children:_a.map(d=>e.jsxDEV("button",{onClick:()=>h(),disabled:a||!d.installed,className:`w-full flex items-center p-4 bg-white/5 rounded-xl hover:bg-white/10 transition-colors ${a?"opacity-50 cursor-not-allowed":""}`,children:[e.jsxDEV("span",{className:"text-2xl mr-3",children:d.icon},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:193,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-1 text-left",children:[e.jsxDEV("div",{className:"font-medium",children:d.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:195,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-sm text-gray-400",children:a?"Connecting...":d.id==="metamask"?"Connect now":"Coming soon"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:196,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:194,columnNumber:13},void 0)]},d.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:185,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:183,columnNumber:7},void 0),e.jsxDEV("p",{className:"text-center text-sm text-gray-400 mt-8",children:"More wallet options coming soon"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:204,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/WalletConnect.tsx",lineNumber:159,columnNumber:5},void 0)},ke={MIN_LENGTH:3};function dn({mode:s,existingProfile:n,onSuccess:t,onCancel:r,className:a=""}){const i=ce(),{updateProfileMetadata:o,checkUsernameAvailability:l,validateUsername:u,currentChainId:h,isTargetNetwork:d}=Ze(),{showNotification:b}=ot(),{data:f,isLoading:m}=Hn(),{chainId:w,switchNetwork:g}=Pe(),{isConnected:c,address:x,walletClient:k}=ls(),{sdk:v}=Vs(),[N,C]=p.useState((n==null?void 0:n.username)||""),[P,y]=p.useState(""),[T,j]=p.useState(""),[I,D]=p.useState(""),[U,E]=p.useState(""),[V,F]=p.useState(""),[L,X]=p.useState(""),[te,A]=p.useState(""),[M,R]=p.useState(!1),[G,J]=p.useState(!0),[ge,ps]=p.useState(!1),[bs,ut]=p.useState(!1),Ss=p.useRef(new Map);p.useEffect(()=>{if(s==="edit"||N.length<ke.MIN_LENGTH)return;const q=N,oe=w,$=`${N}-${oe}`;let _=!0;if(Ss.current.has($)){const Ne=Ss.current.get($);console.log(`[ProfileForm] Using cached result for ${N} on chain ${oe}: ${Ne}`),J(Ne||!1);return}console.log(`[ProfileForm] Setting up debounce check for ${N} on chain ${oe}`);const ne=setTimeout(async()=>{if(!_){console.log(`[ProfileForm] Component unmounted, skipping check for ${q}`);return}ps(!0);try{console.log(`[ProfileForm] Checking availability for ${q} on chain ${oe}`);const Ne=await l(N);Ss.current.set($,Ne),_&&q===N&&(console.log(`[ProfileForm] Username ${q} availability on chain ${oe}: ${Ne}`),J(Ne))}catch(Ne){console.error("Error checking username:",Ne),_&&q===N&&J(!1)}finally{_&&q===N&&ps(!1)}},1e3);return()=>{console.log(`[ProfileForm] Cleanup for username check: ${q} on chain ${oe}`),_=!1,clearTimeout(ne)}},[N,s,l,w]),p.useEffect(()=>{if(n){C(n.username);try{const q=JSON.parse(n.metadata);y(q.bio||""),j(q.avatar||"")}catch(q){console.error("Failed to parse profile metadata:",q)}}},[n]),p.useEffect(()=>{const q=async()=>{if(console.log("[ProfileForm] Starting checkExistingProfile, mode:",s,"hasCheckedProfile:",bs),s!=="create"||bs){console.log("[ProfileForm] Skipping profile check - not in create mode or already checked");return}if(localStorage.getItem("on_profile_setup_page")==="true"||window.location.pathname.includes("username-setup")||window.location.pathname.includes("create-profile")){console.log("[ProfileForm] On profile creation page, marking as checked without navigation"),ut(!0);return}try{console.log("[ProfileForm] Beginning wallet check"),ps(!0);let $;if(f)$=(await f.getAddresses())[0],console.log("[ProfileForm] Got address from wagmiWalletClient:",$);else try{$=(await(await st()).getAddresses())[0],console.log("[ProfileForm] Got address from getWalletClient:",$)}catch(_){console.error("[ProfileForm] Unable to get wallet client:",_)}if($){console.log("[ProfileForm] Checking stored profile data for address:",$);const _=localStorage.getItem("tribes_auth_state");if(_){console.log("[ProfileForm] Found tribes_auth_state in localStorage");const ne=JSON.parse(_),Ne=window.location.pathname.includes("username-setup")||window.location.pathname.includes("create-profile");if(console.log("[ProfileForm] Profile check data:",{hasProfile:!!ne.profile,addressMatch:ne.address===$,onProfileCreationPage:Ne,currentPath:window.location.pathname}),ne.profile&&ne.address===$&&!Ne){console.log("[ProfileForm] Found existing profile, navigating to dashboard"),i("/dashboard");return}else console.log("[ProfileForm] Not navigating - either no profile, address mismatch, or on profile creation page")}else console.log("[ProfileForm] No tribes_auth_state found in localStorage")}}catch($){console.error("[ProfileForm] Error checking existing profile:",$)}finally{ps(!1),ut(!0),console.log("[ProfileForm] Profile check completed")}};bs||(console.log("[ProfileForm] Triggering profile check"),q())},[s,i,bs,f]);const xn=async(q,oe)=>{const $=w&&be.find(_=>_.id===w)||z;if(console.log("[ProfileForm] Using chain:",{chainId:$.id,chainName:$.name}),!k||!x){if(f&&x){console.log("[ProfileForm] Using fallback wagmiWalletClient since direct walletClient is unavailable");try{const{profileNFTMinter:_}=K($.id);console.log("[ProfileForm] Using contracts with wagmiWalletClient:",{profileNFTMinter:_.address,chainId:$.id,address:x});const ne=await f.writeContract({chain:$,address:_.address,abi:_.abi,functionName:"createProfile",args:[q,oe],account:x});return console.log(`[ProfileForm] Transaction submitted with wagmiWalletClient: ${ne}`),ne}catch(_){const ne=_;throw console.error("[ProfileForm] Fallback to wagmiWalletClient also failed:",ne),new Error(`Failed with wagmiWalletClient: ${ne.message}`)}}throw new Error("Wallet not connected: "+(k?"Missing address":"Missing walletClient"))}console.log("[ProfileForm] Creating profile directly with wallet client");try{const{profileNFTMinter:_}=K($.id);console.log("[ProfileForm] Using contracts:",{profileNFTMinter:_.address,chainId:$.id,walletClient:k,account:x});const ne=await k.writeContract({chain:$,address:_.address,abi:_.abi,functionName:"createProfile",args:[q,oe],account:x});return console.log(`[ProfileForm] Transaction submitted: ${ne}`),ne}catch(_){throw console.error("[ProfileForm] Error sending transaction directly:",_),_}},Nn=async q=>{if(q.preventDefault(),console.log("[ProfileForm] Form submission attempted"),!N&&s==="create"){b("Username is required","error");return}if(s==="create"){if(!u(N)){b("Invalid username format","error");return}if(!G){b("Username is not available","error");return}}if(!c){b("Please connect your wallet to create a profile","error");return}if(!d){b("Please switch to the correct network","error");return}console.log("[ProfileForm] Starting profile creation/update..."),R(!0);try{const oe=JSON.stringify({avatar:T,bio:P,location:I,website:U,social:{twitter:V,instagram:L,discord:te}});if(s==="edit"&&n)try{const $=typeof n.tokenId=="string"?parseInt(n.tokenId):typeof n.tokenId=="bigint"?Number(n.tokenId):n.tokenId||0;console.log(`[ProfileForm] Updating profile ${$}`),await o($,oe),b("Profile updated successfully!","success")}catch($){const _=$;console.error("[ProfileForm] Error updating profile:",_),b(`Update failed: ${_.message}`,"error"),R(!1);return}else try{console.log("[ProfileForm] Attempting direct profile creation");const $=await xn(N,oe);b("Profile creation transaction submitted!","success")}catch($){const _=$;console.error("[ProfileForm] Direct profile creation failed:",_),b(`Error: ${_.message}`,"error"),R(!1);return}t?t():i("/dashboard")}catch(oe){const $=oe;console.error("[ProfileForm] Unexpected error during form submission:",$),b(`Unexpected error: ${$.message}`,"error")}finally{R(!1)}},yn=async()=>{try{await g(z.id),b("Switching to Monad Devnet...","info")}catch(q){console.error("[ProfileForm] Network switch error:",q),b("Failed to switch network","error")}};return m?e.jsxDEV("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-theme-primary"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:425,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:424,columnNumber:7},this):e.jsxDEV("div",{className:a,children:[e.jsxDEV("h1",{className:"text-3xl font-bold mb-2",children:s==="edit"?"Edit Profile":"Create Your Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:432,columnNumber:7},this),e.jsxDEV("p",{className:"text-gray-400 mb-8",children:s==="edit"?"Update your profile information.":"Choose a unique username and fill in your profile details."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:435,columnNumber:7},this),!d&&e.jsxDEV("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-red-500 mb-2",children:"Wrong Network"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:444,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-300 mb-3",children:["You need to be on the Monad Devnet to create or update your profile.",h&&e.jsxDEV("span",{className:"block mt-1",children:["Current network: Chain ID ",h," / Required: Chain ID ",z.id]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:448,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:445,columnNumber:11},this),e.jsxDEV("button",{onClick:yn,className:"py-2 px-4 bg-red-500 text-white rounded-lg font-medium transition-colors hover:bg-red-600",children:"Switch to Monad Devnet"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:453,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:443,columnNumber:9},this),e.jsxDEV("form",{className:"space-y-6",onSubmit:Nn,children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300",children:["Username ",s==="create"&&"*"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:465,columnNumber:11},this),e.jsxDEV("div",{className:"mt-1 relative",children:[e.jsxDEV("input",{id:"username",name:"username",type:"text",required:s==="create",value:N,onChange:q=>C(q.target.value),disabled:s==="edit",className:`appearance-none block w-full px-3 py-2 bg-black/50 border ${G?ge?"border-yellow-500":G&&N.length>=ke.MIN_LENGTH?"border-green-500":"border-white/10":"border-red-500"} rounded-lg focus:outline-none focus:ring-2 focus:ring-theme-primary focus:border-transparent ${s==="edit"?"opacity-50 cursor-not-allowed":""}`,placeholder:"Enter username"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:469,columnNumber:13},this),e.jsxDEV("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:[ge&&e.jsxDEV("div",{className:"text-yellow-400 animate-spin h-5 w-5",children:"⟳"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:491,columnNumber:17},this),!ge&&s==="create"&&N.length>=ke.MIN_LENGTH&&G&&e.jsxDEV("div",{className:"text-green-500 text-xl",children:"✓"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:495,columnNumber:17},this),!ge&&s==="create"&&N.length>=ke.MIN_LENGTH&&!G&&e.jsxDEV("div",{className:"text-red-500 text-xl",children:"✗"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:499,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:489,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:468,columnNumber:11},this),s==="create"&&N.length>0&&N.length<ke.MIN_LENGTH&&e.jsxDEV("p",{className:"mt-1 text-sm text-yellow-500",children:["Username must be at least ",ke.MIN_LENGTH," characters"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:506,columnNumber:13},this),s==="create"&&N.length>=ke.MIN_LENGTH&&!G&&e.jsxDEV("p",{className:"mt-1 text-sm text-red-500",children:"Username is not available"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:510,columnNumber:13},this),s==="create"&&N.length>=ke.MIN_LENGTH&&G&&!ge&&e.jsxDEV("p",{className:"mt-1 text-sm text-green-500",children:"Username is available"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:514,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:464,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"avatar",className:"block text-sm font-medium text-gray-300",children:"Avatar URL (optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:520,columnNumber:11},this),e.jsxDEV("div",{className:"mt-1",children:e.jsxDEV("input",{id:"avatar",name:"avatar",type:"text",value:T,onChange:q=>j(q.target.value),className:"appearance-none block w-full px-3 py-2 bg-black/50 border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-theme-primary focus:border-transparent",placeholder:"Enter avatar URL"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:524,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:523,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:519,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-300",children:"Bio (optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:538,columnNumber:11},this),e.jsxDEV("div",{className:"mt-1",children:e.jsxDEV("textarea",{id:"bio",name:"bio",rows:3,value:P,onChange:q=>y(q.target.value),className:"appearance-none block w-full px-3 py-2 bg-black/50 border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-theme-primary focus:border-transparent resize-none",placeholder:"Tell us about yourself"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:542,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:541,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:537,columnNumber:9},this),e.jsxDEV("div",{className:"flex space-x-4",children:[r&&e.jsxDEV("button",{type:"button",onClick:r,disabled:M,className:"flex-1 py-2 px-4 bg-white/5 text-white rounded-lg font-medium hover:bg-white/10 transition-colors border border-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:557,columnNumber:13},this),e.jsxDEV("button",{type:"submit",disabled:M||ge||s==="create"&&(!N||N.length<ke.MIN_LENGTH||!G),className:"flex-1 py-2 px-4 bg-theme-primary text-black rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed relative",children:[M&&e.jsxDEV("span",{className:"absolute inset-0 flex items-center justify-center bg-theme-primary rounded-lg",children:e.jsxDEV("div",{className:"animate-spin h-5 w-5 border-2 border-black border-t-transparent rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:582,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:581,columnNumber:15},this),M?s==="edit"?"Saving...":"Creating...":s==="edit"?"Save Changes":"Create Profile"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:566,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:555,columnNumber:9},this),e.jsxDEV("p",{className:"mt-4 text-sm text-center text-gray-400",children:s==="edit"?"This action requires a small gas fee to update your profile":"This action requires a small gas fee to mint your profile NFT"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:591,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:462,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/profile/ProfileForm.tsx",lineNumber:431,columnNumber:5},this)}function vt(){return p.useEffect(()=>(console.log("[UsernameAvatarSetup] Component mounted"),window.localStorage.setItem("on_profile_setup_page","true"),()=>{console.log("[UsernameAvatarSetup] Component unmounting"),window.localStorage.removeItem("on_profile_setup_page")}),[]),e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-white",children:[e.jsxDEV(tt,{onMenuClick:()=>{}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/UsernameAvatarSetup.tsx",lineNumber:20,columnNumber:7},this),e.jsxDEV("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxDEV("div",{className:"bg-white/[0.02] backdrop-blur-xl rounded-2xl border border-white/10 p-8",children:e.jsxDEV(dn,{mode:"create"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/UsernameAvatarSetup.tsx",lineNumber:24,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/UsernameAvatarSetup.tsx",lineNumber:23,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/UsernameAvatarSetup.tsx",lineNumber:22,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/UsernameAvatarSetup.tsx",lineNumber:19,columnNumber:5},this)}function cn({children:s,rightSidebar:n}){return e.jsxDEV("div",{className:"min-h-screen bg-background",children:e.jsxDEV("div",{className:"w-full max-w-[1200px] mx-auto px-4 sm:px-6 py-8",children:e.jsxDEV("div",{className:"flex gap-8",children:[e.jsxDEV("div",{className:"flex-1 min-w-0 max-w-[800px] mx-auto lg:mx-0",children:s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/layout/FeedLayout.tsx",lineNumber:16,columnNumber:11},this),n&&e.jsxDEV("div",{className:"hidden lg:block w-[380px] flex-shrink-0",children:n},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/layout/FeedLayout.tsx",lineNumber:22,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/layout/FeedLayout.tsx",lineNumber:13,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/layout/FeedLayout.tsx",lineNumber:12,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/layout/FeedLayout.tsx",lineNumber:11,columnNumber:5},this)}function za(s){return s?`https://api.dicebear.com/7.x/identicon/svg?seed=${s.startsWith("0x")?s.substring(2,10):s.substring(0,8)}&backgroundColor=transparent`:(console.warn("No address provided for avatar generation, using default"),"https://api.dicebear.com/7.x/identicon/svg?seed=default&backgroundColor=transparent")}const ze=({address:s,className:n=""})=>{const t=W.useMemo(()=>za(s),[s]);return e.jsxDEV("div",{className:`relative overflow-hidden rounded-full bg-neutral-200 dark:bg-neutral-800 ${n}`,title:s||"Unknown User",children:[e.jsxDEV("img",{src:t,alt:`Avatar for ${s||"Unknown User"}`,className:"w-full h-full object-cover",loading:"lazy"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/user/UserAvatar.tsx",lineNumber:19,columnNumber:7},void 0),e.jsxDEV("div",{className:"absolute inset-0 ring-1 ring-inset ring-black/10 dark:ring-white/10 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/user/UserAvatar.tsx",lineNumber:25,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/user/UserAvatar.tsx",lineNumber:15,columnNumber:5},void 0)},H={text:{border:"border-neutral-800 hover:border-neutral-700",accent:"bg-neutral-800/30 text-neutral-200"},image:{border:"border-blue-900 hover:border-blue-800",accent:"bg-blue-900/30 text-blue-200"},video:{border:"border-purple-900 hover:border-purple-800",accent:"bg-purple-900/30 text-purple-200"},link:{border:"border-green-900 hover:border-green-800",accent:"bg-green-900/30 text-green-200"},event:{border:"border-yellow-900 hover:border-yellow-800",accent:"bg-yellow-900/30 text-yellow-200"},poll:{border:"border-orange-900 hover:border-orange-800",accent:"bg-orange-900/30 text-orange-200"},bounty:{border:"border-emerald-900 hover:border-emerald-800",accent:"bg-emerald-900/30 text-emerald-200"},project:{border:"border-indigo-900 hover:border-indigo-800",accent:"bg-indigo-900/30 text-indigo-200"}},us=ve("relative w-full rounded-xl border p-5 shadow-md transition-all hover:shadow-lg bg-neutral-900 text-white backdrop-blur-sm",{variants:{type:{text:H.text.border,image:H.image.border,video:H.video.border,link:H.link.border,event:H.event.border,poll:H.poll.border,bounty:H.bounty.border,project:H.project.border}},defaultVariants:{type:"text"}}),Ka=ve("absolute top-4 right-4 inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{variants:{type:{text:H.text.accent,image:H.image.accent,video:H.video.accent,link:H.link.accent,event:H.event.accent,poll:H.poll.accent,bounty:H.bounty.accent,project:H.project.accent}},defaultVariants:{type:"text"}}),Hs=ve("flex items-center justify-center w-10 h-10 rounded-full",{variants:{type:{text:H.text.accent,image:H.image.accent,video:H.video.accent,link:H.link.accent,event:H.event.accent,poll:H.poll.accent,bounty:H.bounty.accent,project:H.project.accent}},defaultVariants:{type:"text"}}),Ie=ve("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{variants:{variant:{default:"bg-neutral-800 text-neutral-200 hover:bg-neutral-700",blue:"bg-blue-900/50 text-blue-200 hover:bg-blue-800/50",purple:"bg-purple-900/50 text-purple-200 hover:bg-purple-800/50",green:"bg-green-900/50 text-green-200 hover:bg-green-800/50",yellow:"bg-yellow-900/50 text-yellow-200 hover:bg-yellow-800/50",orange:"bg-orange-900/50 text-orange-200 hover:bg-orange-800/50",red:"bg-red-900/50 text-red-200 hover:bg-red-800/50",indigo:"bg-indigo-900/50 text-indigo-200 hover:bg-indigo-800/50",emerald:"bg-emerald-900/50 text-emerald-200 hover:bg-emerald-800/50"}},defaultVariants:{variant:"default"}}),Z=ve("inline-flex items-center justify-center rounded-md p-2 text-sm font-medium transition-colors",{variants:{variant:{default:"text-neutral-400 hover:bg-neutral-800 hover:text-white",primary:"text-primary hover:bg-primary/20",destructive:"text-red-400 hover:bg-red-900/20 hover:text-red-200",success:"text-green-400 hover:bg-green-900/20 hover:text-green-200"},active:{true:"",false:""}},compoundVariants:[{variant:"default",active:!0,className:"text-white bg-neutral-800"},{variant:"primary",active:!0,className:"text-white bg-primary/20"},{variant:"destructive",active:!0,className:"text-red-200 bg-red-900/20"},{variant:"success",active:!0,className:"text-green-200 bg-green-900/20"}],defaultVariants:{variant:"default",active:!1}}),ds="mt-4 text-neutral-100 whitespace-pre-wrap break-words leading-relaxed text-base",it="mt-4 overflow-hidden rounded-lg border border-neutral-800 shadow-sm",cs="flex items-center gap-3",ms="font-semibold text-white hover:text-accent transition-colors",fs="text-sm text-neutral-400",mn="border-t border-neutral-800 my-4",Le=ve("inline-flex items-center justify-center rounded-lg px-4 py-2 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-neutral-900",{variants:{variant:{primary:"bg-accent text-black hover:bg-accent/90 focus:ring-accent/50",secondary:"bg-neutral-800 text-white hover:bg-neutral-700 focus:ring-neutral-400/30",outline:"border border-neutral-700 text-white hover:bg-neutral-800 focus:ring-neutral-400/30",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-400/30",ghost:"text-white hover:bg-neutral-800 focus:ring-neutral-400/30"},size:{sm:"text-xs px-2.5 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5"},fullWidth:{true:"w-full"}},defaultVariants:{variant:"primary",size:"md"}}),kt=({post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o=!0})=>{var d,b,f,m;const l=()=>{i&&i(s.id)},u=W.useMemo(()=>{try{return Fe(new Date(s.createdAt),{addSuffix:!0})}catch(w){return console.error("Error formatting date:",w),"some time ago"}},[s.createdAt]),h=w=>{const g=["blue","purple","green","yellow","orange"],c=w.split("").reduce((x,k)=>x+k.charCodeAt(0),0);return g[c%g.length]};return e.jsxDEV("article",{className:us({type:"text"}),onClick:l,role:"button",tabIndex:0,children:[e.jsxDEV("div",{className:cs,children:[e.jsxDEV(ze,{address:s.author,className:"h-10 w-10"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:67,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("a",{href:`/profile/${s.author}`,className:ms,onClick:w=>w.stopPropagation(),children:s.author},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:72,columnNumber:11},void 0),e.jsxDEV("time",{className:fs,children:u},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:79,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:71,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:66,columnNumber:7},void 0),e.jsxDEV("div",{className:ds,children:s.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:86,columnNumber:7},void 0),((d=s.metadata)==null?void 0:d.tags)&&s.metadata.tags.length>0&&e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:s.metadata.tags.map((w,g)=>e.jsxDEV("span",{className:Ie({variant:h(w)}),children:w},g,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:94,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:92,columnNumber:9},void 0),o&&e.jsxDEV("div",{className:"mt-4 flex items-center justify-between border-t border-neutral-700 pt-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:Z({variant:"default"}),onClick:w=>{w.stopPropagation(),n==null||n()},children:[e.jsxDEV(He,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:115,columnNumber:15},void 0),e.jsxDEV("span",{children:((b=s.stats)==null?void 0:b.likeCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:116,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:108,columnNumber:13},void 0),e.jsxDEV("button",{className:Z({variant:"default"}),onClick:w=>{w.stopPropagation(),t==null||t()},children:[e.jsxDEV(Xe,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:125,columnNumber:15},void 0),e.jsxDEV("span",{children:((f=s.stats)==null?void 0:f.commentCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:126,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV("button",{className:Z({variant:"default"}),onClick:w=>{w.stopPropagation(),r==null||r()},children:[e.jsxDEV(Ye,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:135,columnNumber:15},void 0),e.jsxDEV("span",{children:((m=s.stats)==null?void 0:m.shareCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:136,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:128,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:107,columnNumber:11},void 0),e.jsxDEV("button",{className:Z({variant:"destructive"}),onClick:w=>{w.stopPropagation(),a==null||a()},children:e.jsxDEV(os,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:146,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:139,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:106,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/TextPost.tsx",lineNumber:59,columnNumber:5},void 0)},qa=({post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o=!0})=>{var w,g,c,x,k,v,N,C,P;const[l,u]=W.useState(!1),h=()=>{i&&i(s.id)},d=y=>{y.stopPropagation(),u(!l)},b=W.useMemo(()=>{try{return Fe(new Date(s.createdAt),{addSuffix:!0})}catch(y){return console.error("Error formatting date:",y),"some time ago"}},[s.createdAt]),f=(g=(w=s.metadata)==null?void 0:w.media)==null?void 0:g[0],m=y=>{const T=["blue","purple","green","yellow","orange"],j=y.split("").reduce((I,D)=>I+D.charCodeAt(0),0);return T[j%T.length]};return e.jsxDEV("article",{className:us({type:"image"}),onClick:h,role:"button",tabIndex:0,children:[e.jsxDEV("div",{className:cs,children:[e.jsxDEV(ze,{address:s.author,className:"h-10 w-10"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:78,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("a",{href:`/profile/${s.author}`,className:ms,onClick:y=>y.stopPropagation(),children:s.author},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:83,columnNumber:11},void 0),e.jsxDEV("time",{className:fs,children:b},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:90,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:82,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:77,columnNumber:7},void 0),((c=s.metadata)==null?void 0:c.title)&&e.jsxDEV("h3",{className:"text-lg font-semibold mt-3 text-white",children:s.metadata.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:98,columnNumber:9},void 0),s.content&&e.jsxDEV("div",{className:ds,children:s.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:105,columnNumber:9},void 0),f&&e.jsxDEV("div",{className:`${it} relative group cursor-pointer`,onClick:d,children:[e.jsxDEV("div",{className:"relative aspect-video w-full overflow-hidden",children:e.jsxDEV("img",{src:f.url,alt:((x=s.metadata)==null?void 0:x.title)||"Post image",className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105",loading:"lazy"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:117,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:116,columnNumber:11},void 0),e.jsxDEV("button",{className:"absolute top-2 right-2 p-1 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:y=>{y.stopPropagation(),u(!0)},children:e.jsxDEV(ct,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:131,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:124,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:112,columnNumber:9},void 0),((k=s.metadata)==null?void 0:k.tags)&&s.metadata.tags.length>0&&e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:s.metadata.tags.map((y,T)=>e.jsxDEV("span",{className:Ie({variant:m(y)}),children:y},T,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:140,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:138,columnNumber:9},void 0),o&&e.jsxDEV("div",{className:"mt-4 flex items-center justify-between border-t border-neutral-700 pt-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:Z({variant:"default"}),onClick:y=>{y.stopPropagation(),n==null||n()},children:[e.jsxDEV(He,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:161,columnNumber:15},void 0),e.jsxDEV("span",{children:((v=s.stats)==null?void 0:v.likeCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:162,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:154,columnNumber:13},void 0),e.jsxDEV("button",{className:Z({variant:"default"}),onClick:y=>{y.stopPropagation(),t==null||t()},children:[e.jsxDEV(Xe,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:171,columnNumber:15},void 0),e.jsxDEV("span",{children:((N=s.stats)==null?void 0:N.commentCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:172,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:164,columnNumber:13},void 0),e.jsxDEV("button",{className:Z({variant:"default"}),onClick:y=>{y.stopPropagation(),r==null||r()},children:[e.jsxDEV(Ye,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:181,columnNumber:15},void 0),e.jsxDEV("span",{children:((C=s.stats)==null?void 0:C.shareCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:182,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:174,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:153,columnNumber:11},void 0),e.jsxDEV("button",{className:Z({variant:"destructive"}),onClick:y=>{y.stopPropagation(),a==null||a()},children:e.jsxDEV(os,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:192,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:185,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:152,columnNumber:9},void 0),l&&f&&e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:()=>u(!1),children:e.jsxDEV("div",{className:"relative max-h-[90vh] max-w-[90vw]",children:[e.jsxDEV("img",{src:f.url,alt:((P=s.metadata)==null?void 0:P.title)||"Post image",className:"max-h-[90vh] max-w-[90vw] object-contain",loading:"lazy"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:204,columnNumber:13},void 0),e.jsxDEV("button",{className:"absolute top-4 right-4 p-2 rounded-full bg-black/50 text-white",onClick:()=>u(!1),children:e.jsxDEV(ct,{className:"h-6 w-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:214,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:210,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:203,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:199,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ImagePost.tsx",lineNumber:70,columnNumber:5},void 0)},Wa=({post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o=!0})=>{var k,v,N,C,P,y;const l=W.useRef(null),[u,h]=W.useState(!1),[d,b]=W.useState(!0),f=()=>{i&&i(s.id)},m=T=>{T.stopPropagation(),l.current&&(u?l.current.pause():l.current.play(),h(!u))},w=T=>{T.stopPropagation(),l.current&&(l.current.muted=!d,b(!d))},g=W.useMemo(()=>{try{return Fe(new Date(s.createdAt),{addSuffix:!0})}catch(T){return console.error("Error formatting date:",T),"some time ago"}},[s.createdAt]),c=(v=(k=s.metadata)==null?void 0:k.media)==null?void 0:v.find(T=>T.type==="video"),x=T=>{const j=["blue","purple","green","yellow","orange"],I=T.split("").reduce((D,U)=>D+U.charCodeAt(0),0);return j[I%j.length]};return e.jsxDEV("article",{className:us({type:"video"}),onClick:f,role:"button",tabIndex:0,children:[e.jsxDEV("div",{className:cs,children:[e.jsxDEV(ze,{address:s.author,className:"h-10 w-10"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:95,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("a",{href:`/profile/${s.author}`,className:ms,onClick:T=>T.stopPropagation(),children:s.author},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:100,columnNumber:11},void 0),e.jsxDEV("time",{className:fs,children:g},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:107,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:99,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:94,columnNumber:7},void 0),s.content&&e.jsxDEV("div",{className:ds,children:s.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:115,columnNumber:9},void 0),c&&e.jsxDEV("div",{className:`${it} relative group`,children:[e.jsxDEV("video",{ref:l,src:c.url,className:"w-full aspect-video object-cover",loop:!0,muted:d,playsInline:!0,onClick:T=>T.stopPropagation()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:123,columnNumber:11},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("button",{className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",onClick:m,children:u?e.jsxDEV(Xn,{className:"h-6 w-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:139,columnNumber:19},void 0):e.jsxDEV(Yn,{className:"h-6 w-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:141,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:134,columnNumber:15},void 0),e.jsxDEV("button",{className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",onClick:w,children:d?e.jsxDEV(Qn,{className:"h-6 w-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:149,columnNumber:19},void 0):e.jsxDEV(Zn,{className:"h-6 w-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:151,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:144,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:133,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:132,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:122,columnNumber:9},void 0),((N=s.metadata)==null?void 0:N.tags)&&s.metadata.tags.length>0&&e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:s.metadata.tags.map((T,j)=>e.jsxDEV("span",{className:Ie({variant:x(T)}),children:T},j,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:163,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:161,columnNumber:9},void 0),o&&e.jsxDEV("div",{className:"mt-4 flex items-center justify-between border-t border-neutral-200 pt-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:Z({variant:"default"}),onClick:T=>{T.stopPropagation(),n==null||n()},children:[e.jsxDEV(He,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:184,columnNumber:15},void 0),e.jsxDEV("span",{children:((C=s.stats)==null?void 0:C.likeCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:185,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:177,columnNumber:13},void 0),e.jsxDEV("button",{className:Z({variant:"default"}),onClick:T=>{T.stopPropagation(),t==null||t()},children:[e.jsxDEV(Xe,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:194,columnNumber:15},void 0),e.jsxDEV("span",{children:((P=s.stats)==null?void 0:P.commentCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:195,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:187,columnNumber:13},void 0),e.jsxDEV("button",{className:Z({variant:"default"}),onClick:T=>{T.stopPropagation(),r==null||r()},children:[e.jsxDEV(Ye,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:204,columnNumber:15},void 0),e.jsxDEV("span",{children:((y=s.stats)==null?void 0:y.shareCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:205,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:197,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:176,columnNumber:11},void 0),e.jsxDEV("button",{className:Z({variant:"destructive"}),onClick:T=>{T.stopPropagation(),a==null||a()},children:e.jsxDEV(os,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:215,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:175,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/VideoPost.tsx",lineNumber:87,columnNumber:5},void 0)},Ga=({post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o=!0})=>{var b,f,m,w,g;const l=()=>{i&&i(s.id)},u=c=>{var x;c.stopPropagation(),(x=s.metadata)!=null&&x.link&&window.open(s.metadata.link,"_blank","noopener,noreferrer")},h=W.useMemo(()=>{try{return Fe(new Date(s.createdAt),{addSuffix:!0})}catch(c){return console.error("Error formatting date:",c),"some time ago"}},[s.createdAt]),d=c=>{const x=["blue","purple","green","yellow","orange"],k=c.split("").reduce((v,N)=>v+N.charCodeAt(0),0);return x[k%x.length]};return e.jsxDEV("article",{className:us({type:"link"}),onClick:l,role:"button",tabIndex:0,children:[e.jsxDEV("div",{className:cs,children:[e.jsxDEV(ze,{address:s.author,className:"h-10 w-10"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:75,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("a",{href:`/profile/${s.author}`,className:ms,onClick:c=>c.stopPropagation(),children:s.author},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:80,columnNumber:11},void 0),e.jsxDEV("time",{className:fs,children:h},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:87,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:79,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:74,columnNumber:7},void 0),s.content&&e.jsxDEV("div",{className:ds,children:s.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:95,columnNumber:9},void 0),((b=s.metadata)==null?void 0:b.link)&&e.jsxDEV("div",{className:`${it} group cursor-pointer hover:border-neutral-300 transition-colors`,onClick:u,children:e.jsxDEV("div",{className:"p-4",children:[s.metadata.title&&e.jsxDEV("h3",{className:"text-lg font-semibold mb-2 group-hover:text-primary transition-colors",children:s.metadata.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:108,columnNumber:15},void 0),s.metadata.description&&e.jsxDEV("p",{className:"text-neutral-600 line-clamp-2",children:s.metadata.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:113,columnNumber:15},void 0),e.jsxDEV("div",{className:"mt-2 flex items-center text-neutral-500 text-sm",children:[e.jsxDEV(ns,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:118,columnNumber:15},void 0),e.jsxDEV("span",{className:"truncate",children:s.metadata.link},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:119,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:117,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:106,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:102,columnNumber:9},void 0),((f=s.metadata)==null?void 0:f.tags)&&s.metadata.tags.length>0&&e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:s.metadata.tags.map((c,x)=>e.jsxDEV("span",{className:Ie({variant:d(c)}),children:c},x,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:131,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:129,columnNumber:9},void 0),o&&e.jsxDEV("div",{className:"mt-4 flex items-center justify-between border-t border-neutral-200 pt-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:Z({variant:"default"}),onClick:c=>{c.stopPropagation(),n==null||n()},children:[e.jsxDEV(He,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:152,columnNumber:15},void 0),e.jsxDEV("span",{children:((m=s.stats)==null?void 0:m.likeCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:153,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:145,columnNumber:13},void 0),e.jsxDEV("button",{className:Z({variant:"default"}),onClick:c=>{c.stopPropagation(),t==null||t()},children:[e.jsxDEV(Xe,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:162,columnNumber:15},void 0),e.jsxDEV("span",{children:((w=s.stats)==null?void 0:w.commentCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:163,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:155,columnNumber:13},void 0),e.jsxDEV("button",{className:Z({variant:"default"}),onClick:c=>{c.stopPropagation(),r==null||r()},children:[e.jsxDEV(Ye,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:172,columnNumber:15},void 0),e.jsxDEV("span",{children:((g=s.stats)==null?void 0:g.shareCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:173,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:165,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:144,columnNumber:11},void 0),e.jsxDEV("button",{className:Z({variant:"destructive"}),onClick:c=>{c.stopPropagation(),a==null||a()},children:e.jsxDEV(os,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:183,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:176,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:143,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/LinkPost.tsx",lineNumber:67,columnNumber:5},void 0)},Ja=s=>{var a,i,o;const n=(a=s.metadata)==null?void 0:a.eventDetails,t=(i=s.metadata)==null?void 0:i.event;return{...{title:((o=s.metadata)==null?void 0:o.title)||"",startDate:new Date().toISOString(),organizer:s.author,maxTickets:0,currentAttendees:0,speakers:[],agenda:[]},...t||{},...n||{}}},Ha=s=>{var n,t,r;return s.type===4||((n=s.type)==null?void 0:n.toString().toLowerCase())==="event"||!!((t=s.metadata)!=null&&t.eventDetails)||!!((r=s.metadata)!=null&&r.event)};class Tt{static async getUserTickets(n,t){return console.log(`Getting tickets for event ${n} and user ${t}`),localStorage.getItem(`event-${n}-user-${t}-tickets`)?parseInt(localStorage.getItem(`event-${n}-user-${t}-tickets`)||"0"):0}static async purchaseTickets(n,t){console.log(`Purchasing ${t} tickets for event ${n}`),await new Promise(i=>setTimeout(i,1500));const r=localStorage.getItem("connectedWallet");if(!r)throw new Error("No wallet connected");const a=localStorage.getItem(`event-${n}-user-${r}-tickets`)?parseInt(localStorage.getItem(`event-${n}-user-${r}-tickets`)||"0"):0;return localStorage.setItem(`event-${n}-user-${r}-tickets`,(a+t).toString()),`0x${Math.random().toString(16).substring(2)}`}static async createEvent(n){console.log("Creating event:",n),await new Promise(r=>setTimeout(r,2e3));const t=Math.floor(Math.random()*1e3)+1;return{hash:`0x${Math.random().toString(16).substring(2)}`,eventId:t}}static async getEvent(n){return console.log(`Getting event ${n}`),{title:`Event #${n}`,startDate:new Date().toISOString(),endDate:new Date(Date.now()+864e5).toISOString(),location:"Mock Location",eventId:n,isOnChain:!0,organizer:"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",maxTickets:100,ticketsSold:45,price:"0.05",active:!0,priceInWei:"50000000000000000"}}static async cancelEvent(n){return console.log(`Cancelling event ${n}`),await new Promise(t=>setTimeout(t,1e3)),`0x${Math.random().toString(16).substring(2)}`}}const fn=({post:s,postType:n,typeIcon:t,typeName:r,onLike:a,onComment:i,onShare:o,onReport:l,onClick:u,showActions:h=!0,className:d="",children:b})=>{var x,k,v;const[f,m]=p.useState(!1),w=N=>{N.stopPropagation(),m(!f),a==null||a()},g=()=>{u&&u(s.id)},c=W.useMemo(()=>{try{return Fe(new Date(s.createdAt),{addSuffix:!0})}catch(N){return console.error("Error formatting date:",N),"some time ago"}},[s.createdAt]);return e.jsxDEV("article",{className:`${us({type:n})} ${d}`,onClick:g,role:"button",tabIndex:0,children:[t&&r&&e.jsxDEV("div",{className:Ka({type:n}),children:[t,e.jsxDEV("span",{children:r},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:80,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:78,columnNumber:9},void 0),e.jsxDEV("div",{className:cs,children:[e.jsxDEV(ze,{address:s.author,className:"h-10 w-10"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:86,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("a",{href:`/profile/${s.author}`,className:ms,onClick:N=>N.stopPropagation(),children:s.author},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:91,columnNumber:11},void 0),e.jsxDEV("time",{className:fs,children:c},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:98,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:90,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:85,columnNumber:7},void 0),s.content&&e.jsxDEV("div",{className:ds,children:s.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:106,columnNumber:9},void 0),b,h&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:mn},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:117,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:Z({variant:"default",active:f}),onClick:w,children:[e.jsxDEV(He,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:124,columnNumber:17},void 0),e.jsxDEV("span",{children:((x=s.stats)==null?void 0:x.likeCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:125,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:120,columnNumber:15},void 0),e.jsxDEV("button",{className:Z({variant:"default"}),onClick:N=>{N.stopPropagation(),i==null||i()},children:[e.jsxDEV(Xe,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:134,columnNumber:17},void 0),e.jsxDEV("span",{children:((k=s.stats)==null?void 0:k.commentCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:135,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:127,columnNumber:15},void 0),e.jsxDEV("button",{className:Z({variant:"default"}),onClick:N=>{N.stopPropagation(),o==null||o()},children:[e.jsxDEV(Ye,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:144,columnNumber:17},void 0),e.jsxDEV("span",{children:((v=s.stats)==null?void 0:v.shareCount)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:145,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:137,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:119,columnNumber:13},void 0),e.jsxDEV("button",{className:Z({variant:"destructive"}),onClick:N=>{N.stopPropagation(),l==null||l()},children:e.jsxDEV(os,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:155,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:148,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:118,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:116,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/BasePost.tsx",lineNumber:70,columnNumber:5},void 0)},Xa=s=>{var y,T,j,I,D,U;const{post:n}=s,[t,r]=p.useState(!1),[a,i]=p.useState(!1),[o,l]=p.useState(0),[u,h]=p.useState(null),[d,b]=p.useState(1),[f,m]=p.useState(!1),[w,g]=p.useState(""),c=W.useMemo(()=>Ja(n),[n]),x=W.useMemo(()=>{try{if(!c.startDate)return{display:"Date not specified",status:"unknown"};const E=new Date(c.startDate),V=c.endDate?new Date(c.endDate):null,F=De(E,"PPP"),L=V?De(V,"PPP"):null,X=De(E,"p"),te=V?De(V,"p"):null,A=F===L;let M="upcoming";er(new Date,E)?M="upcoming":V&&sr(new Date,V)?M="past":M="ongoing";const R=new Date,G=E.getTime()-R.getTime(),J=Math.ceil(G/(1e3*60*60*24));let ge="";return J>0?ge=`${J} day${J!==1?"s":""} away`:J===0&&(ge="Today!"),{startDate:F,startTime:X,endDate:L,endTime:te,isSameDay:A,status:M,daysRemaining:J,daysRemainingText:ge,fullStartDate:E,fullEndDate:V}}catch(E){return console.error("Error formatting event dates:",E),{display:"Invalid date format",status:"unknown"}}},[c.startDate,c.endDate]),k=E=>{switch(E){case"upcoming":return{color:"bg-emerald-900/30 text-emerald-300 border-emerald-700/50",text:"Upcoming"};case"ongoing":return{color:"bg-blue-900/30 text-blue-300 border-blue-700/50",text:"Happening now"};case"past":return{color:"bg-neutral-800/50 text-neutral-400 border-neutral-700/50",text:"Past event"};default:return{color:"bg-neutral-800 text-neutral-400 border-neutral-700",text:"Date unknown"}}},v=E=>{const V=["blue","purple","green","yellow","orange","red","indigo","emerald"],F=E.split("").reduce((L,X)=>L+X.charCodeAt(0),0);return V[F%V.length]},N=()=>{var te;if(!x.fullStartDate)return"#";const E=encodeURIComponent(((te=n.metadata)==null?void 0:te.title)||"Event"),V=encodeURIComponent(x.fullStartDate.toISOString()),F=x.fullEndDate?encodeURIComponent(x.fullEndDate.toISOString()):V,L=encodeURIComponent(c.location||""),X=encodeURIComponent(n.content||"");return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${E}&dates=${V}/${F}&details=${X}&location=${L}`};p.useEffect(()=>{(async()=>{try{const V=localStorage.getItem("connectedWallet")||"0xMockAddress";if(h(V),localStorage.getItem("connectedWallet")||localStorage.setItem("connectedWallet",V),c.isOnChain&&c.eventId)try{const F=await Tt.getUserTickets(c.eventId,V);l(F),r(F>0)}catch(F){console.error("Error checking tickets, using mock data:",F),l(Math.random()>.7?2:0),r(Math.random()>.7)}}catch(V){console.error("Error checking user tickets:",V)}})()},[c.isOnChain,c.eventId]);const C=async E=>{E.stopPropagation(),c.isOnChain&&c.eventId?m(!0):r(!t)},P=async()=>{if(c.eventId){i(!0),g("");try{try{await Tt.purchaseTickets(c.eventId,d)}catch(E){console.error("Service error, using mock fallback:",E),await new Promise(L=>setTimeout(L,1500));const V=localStorage.getItem("connectedWallet")||"0xMockAddress",F=parseInt(localStorage.getItem(`event-${c.eventId}-user-${V}-tickets`)||"0");localStorage.setItem(`event-${c.eventId}-user-${V}-tickets`,(F+d).toString())}l(o+d),r(!0),m(!1)}catch(E){console.error("Error purchasing tickets:",E),g("Failed to purchase tickets. Please try again.")}finally{i(!1)}}};return console.log("EventPost rendering with:",{postType:n.type,metadataKeys:n.metadata?Object.keys(n.metadata):[],hasEventDetails:!!((y=n.metadata)!=null&&y.eventDetails),hasEventLegacy:!!((T=n.metadata)!=null&&T.event),extractedDetails:c,isOnChain:c.isOnChain,eventId:c.eventId}),e.jsxDEV(fn,{...s,postType:"event",typeIcon:e.jsxDEV(Es,{className:"mr-1 h-3 w-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:267,columnNumber:17},void 0),typeName:"Event",children:[x.status&&e.jsxDEV("div",{className:`mt-4 flex items-center justify-between rounded-md px-3 py-2 border ${k(x.status).color}`,children:[e.jsxDEV("div",{className:"flex items-center",children:e.jsxDEV("span",{className:"font-medium",children:k(x.status).text},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:274,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:273,columnNumber:11},void 0),x.daysRemainingText&&x.status==="upcoming"&&e.jsxDEV("span",{className:"text-sm",children:x.daysRemainingText},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:277,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:272,columnNumber:9},void 0),((j=n.metadata)==null?void 0:j.title)&&e.jsxDEV("h3",{className:"text-xl font-bold mt-4 text-white",children:n.metadata.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:284,columnNumber:9},void 0),c.isOnChain&&e.jsxDEV("div",{className:"mt-2 inline-flex items-center rounded-full bg-indigo-900/30 text-indigo-300 px-2.5 py-0.5 text-xs font-medium",children:[e.jsxDEV(mt,{className:"mr-1 h-3 w-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:292,columnNumber:11},void 0),e.jsxDEV("span",{children:"Blockchain Event"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:293,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:291,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"rounded-lg border border-yellow-900/40 bg-yellow-900/10 p-4",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:Hs({type:"event"}),children:e.jsxDEV(Es,{className:"h-5 w-5 text-yellow-300"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:303,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:302,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h4",{className:"font-semibold text-white",children:"Date & Time"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:306,columnNumber:15},void 0),x.status!=="unknown"?e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"flex items-center mt-2",children:[e.jsxDEV("div",{className:"flex flex-col items-center justify-center bg-neutral-800 border border-neutral-700 rounded-md min-w-[60px] h-[60px] mr-3",children:[e.jsxDEV("span",{className:"text-xs text-neutral-400",children:x.fullStartDate?De(x.fullStartDate,"MMM"):"N/A"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:313,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-xl font-bold",children:x.fullStartDate?De(x.fullStartDate,"d"):"-"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:314,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:312,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-sm text-neutral-300",children:x.startDate||"N/A"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:317,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-xs text-neutral-400",children:["From ",x.startTime||"N/A"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:318,columnNumber:23},void 0),x.endDate&&!x.isSameDay&&e.jsxDEV("div",{className:"mt-1 text-xs text-neutral-400",children:["To ",x.endDate," at ",x.endTime]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:321,columnNumber:25},void 0),x.isSameDay&&x.endTime&&e.jsxDEV("div",{className:"text-xs text-neutral-400",children:["Until ",x.endTime]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:327,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:316,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:311,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:309,columnNumber:17},void 0):e.jsxDEV("span",{className:"text-sm text-neutral-400",children:"Date and time not specified"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:335,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:305,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:301,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:300,columnNumber:9},void 0),e.jsxDEV("div",{className:"rounded-lg border border-yellow-900/40 bg-yellow-900/10 p-4",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:Hs({type:"event"}),children:e.jsxDEV(Bt,{className:"h-5 w-5 text-yellow-300"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:345,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:344,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h4",{className:"font-semibold text-white",children:"Location"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:348,columnNumber:15},void 0),c.location?e.jsxDEV("div",{className:"mt-2",children:[e.jsxDEV("p",{className:"text-sm text-neutral-300",children:c.location},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:352,columnNumber:19},void 0),e.jsxDEV("div",{className:"mt-2 h-[60px] w-full rounded-md bg-neutral-800 border border-neutral-700 flex items-center justify-center",children:e.jsxDEV("span",{className:"text-xs text-neutral-400",children:"Map view"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:356,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:355,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:351,columnNumber:17},void 0):e.jsxDEV("div",{className:"mt-2 text-sm text-neutral-400",children:c.virtualLink?"Online event":"Location not specified"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:360,columnNumber:17},void 0),c.virtualLink&&e.jsxDEV("a",{href:c.virtualLink,className:"mt-2 inline-flex items-center gap-1.5 text-sm text-blue-400 hover:text-blue-300 transition-colors",target:"_blank",rel:"noopener noreferrer",onClick:E=>E.stopPropagation(),children:[e.jsxDEV(tr,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:373,columnNumber:19},void 0),e.jsxDEV("span",{children:"Join virtually"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:374,columnNumber:19},void 0),e.jsxDEV(ns,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:375,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:366,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:347,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:343,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:342,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:298,columnNumber:7},void 0),e.jsxDEV("div",{className:"mt-4 space-y-4",children:[e.jsxDEV("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV(ft,{className:"h-4 w-4 text-yellow-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:389,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-neutral-400",children:"Organizer:"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:390,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-white",children:c.organizer||n.author||"N/A"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:391,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:388,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV(nr,{className:"h-4 w-4 text-yellow-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:396,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-neutral-400",children:"Category:"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:397,columnNumber:13},void 0),c.category?e.jsxDEV("span",{className:Ie({variant:v(c.category)}),children:c.category},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:399,columnNumber:15},void 0):(I=n.metadata)!=null&&I.tags&&n.metadata.tags.length>0?e.jsxDEV("span",{className:Ie({variant:v(n.metadata.tags[0])}),children:n.metadata.tags[0]},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:403,columnNumber:15},void 0):e.jsxDEV("span",{className:"text-neutral-400",children:"N/A"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:407,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:395,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:386,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV(rr,{className:"h-4 w-4 text-yellow-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:416,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-neutral-400",children:"Cost:"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:417,columnNumber:13},void 0),c.isOnChain?e.jsxDEV("span",{className:"text-white",children:[c.price||"0"," ETH per ticket"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:419,columnNumber:15},void 0):e.jsxDEV("span",{className:"text-white",children:c.cost||"Free / Not specified"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:421,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:415,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV(ar,{className:"h-4 w-4 text-yellow-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:427,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-neutral-400",children:"Accessibility:"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:428,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-white",children:c.accessibility||"Not specified"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:429,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:426,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:413,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-neutral-800/60 rounded-lg p-4 border border-neutral-700/50",children:[e.jsxDEV("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxDEV("div",{className:"flex items-start gap-2",children:[e.jsxDEV(Ee,{className:"h-5 w-5 text-yellow-400 mt-0.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:437,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-white",children:c.isOnChain?"Tickets":"Attendees"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:439,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-xs text-neutral-400",children:c.isOnChain?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"text-white text-sm",children:c.ticketsSold||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:445,columnNumber:23},void 0)," of ",e.jsxDEV("span",{className:"text-white text-sm",children:c.maxTickets},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:445,columnNumber:102},void 0)," tickets sold",o>0&&e.jsxDEV("div",{className:"mt-1 text-emerald-400",children:["You own ",o," ticket",o!==1?"s":""]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:447,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:444,columnNumber:21},void 0):c.currentAttendees!==void 0?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"text-white text-sm",children:c.currentAttendees},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:453,columnNumber:25},void 0),c.maxAttendees?e.jsxDEV(e.Fragment,{children:[" of ",e.jsxDEV("span",{className:"text-white text-sm",children:c.maxAttendees},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:455,columnNumber:33},void 0)," spots filled"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:455,columnNumber:27},void 0):e.jsxDEV(e.Fragment,{children:" attending"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:457,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:452,columnNumber:23},void 0):"Attendance not tracked"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:442,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:438,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:436,columnNumber:13},void 0),c.isOnChain?e.jsxDEV("div",{className:"w-full md:w-1/2 h-2 bg-neutral-700 rounded-full overflow-hidden",children:e.jsxDEV("div",{className:"h-full bg-yellow-500",style:{width:`${Math.min(100,(c.ticketsSold||0)/c.maxTickets*100)}%`}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:471,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:470,columnNumber:15},void 0):c.maxAttendees&&c.currentAttendees!==void 0&&e.jsxDEV("div",{className:"w-full md:w-1/2 h-2 bg-neutral-700 rounded-full overflow-hidden",children:e.jsxDEV("div",{className:"h-full bg-yellow-500",style:{width:`${Math.min(100,c.currentAttendees/c.maxAttendees*100)}%`}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:481,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:480,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:435,columnNumber:11},void 0),x.status!=="past"&&e.jsxDEV("div",{className:"mt-3 flex justify-end",children:c.isOnChain?e.jsxDEV("button",{className:Le({variant:o>0?"outline":"primary",size:"sm"}),onClick:C,disabled:c.isOnChain&&!c.active,children:o>0?e.jsxDEV(e.Fragment,{children:["View My Ticket",o!==1?"s":""]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:505,columnNumber:21},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(mt,{className:"mr-1 h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:508,columnNumber:23},void 0),"Purchase Tickets"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:507,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:496,columnNumber:17},void 0):e.jsxDEV("button",{className:Le({variant:t?"outline":"primary",size:"sm"}),onClick:C,children:t?e.jsxDEV(e.Fragment,{children:"I'm attending"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:522,columnNumber:21},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(we,{className:"mr-1 h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:525,columnNumber:23},void 0),"Attend"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:524,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:514,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:494,columnNumber:13},void 0),c.isOnChain&&!c.active&&e.jsxDEV("div",{className:"mt-3 flex items-center gap-2 text-red-400 text-sm",children:[e.jsxDEV(Lt,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:537,columnNumber:15},void 0),e.jsxDEV("span",{children:"This event has been cancelled by the organizer"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:538,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:536,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:434,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:384,columnNumber:7},void 0),n.content&&e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-white mb-2",children:"Description"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:547,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-neutral-300 text-sm leading-relaxed whitespace-pre-wrap",children:n.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:548,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:546,columnNumber:9},void 0),c.speakers&&c.speakers.length>0&&e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-white mb-2",children:"Featured Speakers"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:557,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:c.speakers.map((E,V)=>e.jsxDEV("div",{className:"flex items-center gap-2 bg-neutral-800/50 rounded-md p-2",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-full bg-neutral-700 flex items-center justify-center",children:E.avatar?e.jsxDEV("img",{src:E.avatar,alt:E.name,className:"w-8 h-8 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:563,columnNumber:21},void 0):e.jsxDEV(ft,{className:"w-4 h-4 text-neutral-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:565,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:561,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-white",children:E.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:569,columnNumber:19},void 0),E.role&&e.jsxDEV("div",{className:"text-xs text-neutral-400",children:E.role},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:570,columnNumber:36},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:568,columnNumber:17},void 0)]},V,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:560,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:558,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:556,columnNumber:9},void 0),c.agenda&&c.agenda.length>0&&e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-white mb-2",children:"Event Agenda"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:581,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2",children:c.agenda.map((E,V)=>e.jsxDEV("div",{className:"bg-neutral-800/50 rounded-md p-3 border-l-2 border-yellow-500",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-white",children:E.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:586,columnNumber:19},void 0),E.time&&e.jsxDEV("span",{className:"text-xs text-neutral-400",children:E.time},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:587,columnNumber:33},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:585,columnNumber:17},void 0),E.description&&e.jsxDEV("p",{className:"text-xs text-neutral-300 mt-1",children:E.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:590,columnNumber:19},void 0)]},V,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:584,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:582,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:580,columnNumber:9},void 0),((D=n.metadata)==null?void 0:D.tags)&&n.metadata.tags.length>0&&e.jsxDEV("div",{className:"mt-4 flex flex-wrap gap-2",children:n.metadata.tags.map((E,V)=>e.jsxDEV("span",{className:Ie({variant:v(E)}),children:E},V,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:602,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:600,columnNumber:9},void 0),e.jsxDEV("div",{className:mn},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:613,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("a",{href:N(),className:Le({variant:"outline",size:"sm"}),target:"_blank",rel:"noopener noreferrer",onClick:E=>E.stopPropagation(),children:[e.jsxDEV(or,{className:"mr-1.5 h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:623,columnNumber:13},void 0),"Add to Calendar"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:616,columnNumber:11},void 0),e.jsxDEV("button",{className:Le({variant:"outline",size:"sm"}),onClick:E=>{var V,F;E.stopPropagation(),navigator.share?navigator.share({title:((V=n.metadata)==null?void 0:V.title)||"Event",text:n.content||"Check out this event",url:window.location.href}).catch(console.error):(F=s.onShare)==null||F.call(s)},children:[e.jsxDEV(ir,{className:"mr-1.5 h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:643,columnNumber:13},void 0),"Share Event"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:627,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:615,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:614,columnNumber:7},void 0),f&&c.isOnChain&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>m(!1),children:e.jsxDEV("div",{className:"bg-neutral-900 rounded-lg p-6 max-w-md w-full mx-4",onClick:E=>E.stopPropagation(),children:[e.jsxDEV("h3",{className:"text-xl font-bold text-white mb-4",children:"Purchase Tickets"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:653,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-neutral-300 mb-1",children:"Event"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:657,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-white",children:(U=n.metadata)==null?void 0:U.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:658,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:656,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-neutral-300 mb-1",children:"Price per Ticket"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:662,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-white",children:[c.price||"0"," ETH"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:663,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:661,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"quantity",className:"block text-sm font-medium text-neutral-300 mb-1",children:"Quantity"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:667,columnNumber:17},void 0),e.jsxDEV("input",{id:"quantity",type:"number",min:"1",max:c.maxTickets-(c.ticketsSold||0),value:d,onChange:E=>b(Math.max(1,parseInt(E.target.value)||1)),className:"w-full rounded-md border border-neutral-700 bg-neutral-800 p-2 text-white"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:668,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:666,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-neutral-300 mb-1",children:"Total Price"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:680,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-white font-bold",children:[c.price?(parseFloat(c.price)*d).toFixed(4):"0"," ETH"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:681,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:679,columnNumber:15},void 0),w&&e.jsxDEV("div",{className:"bg-red-900/20 border border-red-900 text-red-300 p-3 rounded-md text-sm",children:w},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:687,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsxDEV("button",{className:Le({variant:"outline"}),onClick:()=>m(!1),disabled:a,children:"Cancel"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:693,columnNumber:17},void 0),e.jsxDEV("button",{className:Le({variant:"primary"}),onClick:P,disabled:a||!c.active,children:a?"Processing...":"Purchase Tickets"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:701,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:692,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:655,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:652,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:651,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/EventPost.tsx",lineNumber:264,columnNumber:5},void 0)},Ya=({post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o=!0})=>{var X,te,A;const[l,u]=p.useState(!1),[h,d]=p.useState(!1),[b,f]=p.useState(null),[m,w]=p.useState(!1),g=(()=>{try{const M=s.createdAt;if(!M)return"Unknown time";const R=new Date(M);return isNaN(R.getTime())?"Invalid date":Fe(R,{addSuffix:!0})}catch(M){return console.error("Error formatting date:",M,s),"Unknown time"}})(),c=((X=s.metadata)==null?void 0:X.poll)||{},x=c.question||s.content||"Poll",k=c.options||[],v=c.endDate?new Date(c.endDate):null,N=v?new Date>v:!1,C=k.reduce((M,R)=>M+(R.votes||0),0),P=(()=>{if(!v||N)return null;const M=new Date,R=v.getTime()-M.getTime(),G=Math.floor(R/(1e3*60*60*24)),J=Math.floor(R%(1e3*60*60*24)/(1e3*60*60));return G>0?`${G} day${G!==1?"s":""} left`:J>0?`${J} hour${J!==1?"s":""} left`:"Ending soon"})(),y=M=>{m||(f(M),w(!0))},T=M=>{M.stopPropagation(),u(!l),n&&n()},j=M=>{M.stopPropagation(),t&&t()},I=M=>{M.stopPropagation(),r&&r()},D=M=>{M.stopPropagation(),d(!h)},U=()=>{i&&i(s.id)},E=typeof s.author=="string"?`${s.author.slice(0,6)}...${s.author.slice(-4)}`:s.author,V=(typeof s.author=="string",s.author),F=((te=s.stats)==null?void 0:te.likeCount)||0,L=((A=s.stats)==null?void 0:A.commentCount)||0;return e.jsxDEV("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 cursor-pointer",onClick:U,children:[e.jsxDEV("div",{className:"flex items-center mb-3",children:[e.jsxDEV("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center text-white font-bold",children:e.jsxDEV(ze,{address:V,size:"md",showUsername:!1},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:160,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:159,columnNumber:9},void 0),e.jsxDEV("div",{className:"ml-2",children:[e.jsxDEV("div",{className:"font-medium",children:E},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:167,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500 flex",children:[g,s.tribeId&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"mx-1",children:"•"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:172,columnNumber:17},void 0),e.jsxDEV("span",{children:["Tribe #",s.tribeId]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:173,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:171,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:168,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:166,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:158,columnNumber:7},void 0),e.jsxDEV("h3",{className:"text-lg font-medium mb-3",children:x},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:181,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-2",children:k.map(M=>{const R=C>0?Math.round(M.votes/C*100):0,G=b===M.id;return e.jsxDEV("button",{onClick:()=>y(M.id),disabled:m&&!G,className:"w-full",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:`w-full p-3 rounded-xl border ${G?"border-[#4ADE80] bg-[#4ADE80]/10":"border-gray-200 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:M.text},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:205,columnNumber:21},void 0),m&&e.jsxDEV("span",{className:"text-sm text-gray-500",children:[R,"%"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:207,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:204,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:197,columnNumber:17},void 0),m&&e.jsxDEV("div",{className:"absolute top-0 left-0 h-full bg-[#4ADE80]/10 rounded-xl transition-all",style:{width:`${R}%`}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:212,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:196,columnNumber:15},void 0)},M.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:190,columnNumber:13},void 0)})},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:184,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center justify-between text-sm text-gray-500 mt-3",children:[e.jsxDEV("span",{children:[C.toLocaleString()," votes"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:225,columnNumber:9},void 0),P&&e.jsxDEV("span",{children:P},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:226,columnNumber:27},void 0),N&&e.jsxDEV("span",{children:"Poll ended"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:227,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:224,columnNumber:7},void 0),o&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex items-center mt-4 text-gray-500 text-sm",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("span",{children:F},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:235,columnNumber:15},void 0),e.jsxDEV("span",{className:"mx-1",children:"likes"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:236,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:234,columnNumber:13},void 0),e.jsxDEV("span",{className:"mx-1.5",children:"•"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:238,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("span",{children:L},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:240,columnNumber:15},void 0),e.jsxDEV("span",{className:"mx-1",children:"comments"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:241,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:239,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:233,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[e.jsxDEV("button",{onClick:T,className:"flex items-center text-gray-500 hover:text-red-600",children:[l?e.jsxDEV($t,{className:"h-5 w-5 text-red-600"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:252,columnNumber:17},void 0):e.jsxDEV(_t,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:254,columnNumber:17},void 0),e.jsxDEV("span",{className:"ml-1.5 text-sm",children:F>0?F:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:256,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:247,columnNumber:13},void 0),e.jsxDEV("button",{onClick:j,className:"flex items-center text-gray-500 hover:text-blue-600",children:[e.jsxDEV(zt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:263,columnNumber:15},void 0),e.jsxDEV("span",{className:"ml-1.5 text-sm",children:L>0?L:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:264,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:259,columnNumber:13},void 0),e.jsxDEV("button",{onClick:I,className:"flex items-center text-gray-500 hover:text-green-600",children:e.jsxDEV(Kt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:271,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:267,columnNumber:13},void 0),e.jsxDEV("button",{onClick:D,className:"flex items-center text-gray-500 hover:text-yellow-600",children:h?e.jsxDEV(qt,{className:"h-5 w-5 text-yellow-600"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:279,columnNumber:17},void 0):e.jsxDEV(Wt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:281,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:274,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:246,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:232,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/PollPost.tsx",lineNumber:153,columnNumber:5},void 0)},Qa=s=>{var i;const{post:n}=s,t=W.useMemo(()=>{var o;return((o=n.metadata)==null?void 0:o.bounty)||{reward:"0",currency:"ETH",difficulty:"medium",deadline:void 0,tags:[],requirements:[],repository:void 0}},[(i=n.metadata)==null?void 0:i.bounty]),r=o=>{switch(o.toLowerCase()){case"easy":return"bg-green-500/20 text-green-500";case"medium":return"bg-yellow-500/20 text-yellow-500";case"hard":return"bg-red-500/20 text-red-500";default:return"bg-neutral-500/20 text-neutral-400"}},a=o=>{const l=["blue","purple","green","yellow","orange","red","indigo","emerald"],u=o.split("").reduce((h,d)=>h+d.charCodeAt(0),0);return l[u%l.length]};return e.jsxDEV(fn,{...s,postType:"bounty",typeIcon:e.jsxDEV(pt,{className:"mr-1 h-3 w-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:62,columnNumber:17},void 0),typeName:"Bounty",children:e.jsxDEV("div",{className:"space-y-4 mt-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:Hs({type:"bounty"}),children:e.jsxDEV(pt,{className:"w-5 h-5 text-emerald-300"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:70,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:69,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-2xl font-bold text-white",children:[t.reward," ",t.currency]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:73,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-sm text-neutral-400",children:"Reward"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:76,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:72,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:68,columnNumber:11},void 0),e.jsxDEV("span",{className:`px-3 py-1 rounded-full text-sm ${r(t.difficulty)}`,children:t.difficulty.charAt(0).toUpperCase()+t.difficulty.slice(1)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:79,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:67,columnNumber:9},void 0),t.deadline&&e.jsxDEV("div",{className:"flex items-center space-x-2 text-sm text-neutral-400",children:[e.jsxDEV(is,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:88,columnNumber:13},void 0),e.jsxDEV("span",{children:["Deadline: ",new Date(t.deadline).toLocaleDateString()]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:89,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:87,columnNumber:11},void 0),t.requirements&&t.requirements.length>0&&e.jsxDEV("div",{className:"space-y-2 mt-3",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-white",children:"Requirements"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:96,columnNumber:13},void 0),e.jsxDEV("ul",{className:"space-y-2",children:t.requirements.map((o,l)=>e.jsxDEV("li",{className:"flex items-start space-x-2 text-sm text-neutral-300",children:[e.jsxDEV("span",{className:"w-1.5 h-1.5 mt-1.5 rounded-full bg-emerald-500"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:100,columnNumber:19},void 0),e.jsxDEV("span",{children:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:101,columnNumber:19},void 0)]},l,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:99,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:97,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:95,columnNumber:11},void 0),t.repository&&e.jsxDEV("a",{href:t.repository,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 px-4 py-2 bg-neutral-800 rounded-full hover:bg-neutral-700 w-fit transition-colors",onClick:o=>o.stopPropagation(),children:[e.jsxDEV(Gt,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:117,columnNumber:13},void 0),e.jsxDEV("span",{children:"View Repository"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV(lr,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:110,columnNumber:11},void 0),t.tags&&t.tags.length>0&&e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:t.tags.map((o,l)=>e.jsxDEV("span",{className:Ie({variant:a(o)}),children:o},l,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:127,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:125,columnNumber:11},void 0),e.jsxDEV("button",{className:Le({variant:"primary",fullWidth:!0}),onClick:o=>{o.stopPropagation()},children:"Apply for Bounty"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:138,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:66,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/BountyPost.tsx",lineNumber:59,columnNumber:5},void 0)},Za=({post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o=!0})=>{var P,y,T;const[l,u]=p.useState(!1),[h,d]=p.useState(!1),b=(()=>{try{const j=s.createdAt;if(!j)return"Unknown time";const I=new Date(j);return isNaN(I.getTime())?"Invalid date":Fe(I,{addSuffix:!0})}catch(j){return console.error("Error formatting date:",j,s),"Unknown time"}})(),f=((P=s.metadata)==null?void 0:P.project)||{github:void 0,website:void 0},m=j=>{j.stopPropagation(),u(!l),n&&n()},w=j=>{j.stopPropagation(),t&&t()},g=j=>{j.stopPropagation(),r&&r()},c=j=>{j.stopPropagation(),d(!h)},x=()=>{i&&i(s.id)},k=typeof s.author=="string"?`${s.author.slice(0,6)}...${s.author.slice(-4)}`:s.author,v=(typeof s.author=="string",s.author),N=((y=s.stats)==null?void 0:y.likeCount)||0,C=((T=s.stats)==null?void 0:T.commentCount)||0;return e.jsxDEV("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 cursor-pointer",onClick:x,children:[e.jsxDEV("div",{className:"flex items-center mb-3",children:[e.jsxDEV("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center text-white font-bold",children:e.jsxDEV(ze,{address:v,size:"md",showUsername:!1},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:114,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:113,columnNumber:9},void 0),e.jsxDEV("div",{className:"ml-2",children:[e.jsxDEV("div",{className:"font-medium",children:k},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:121,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500 flex",children:[b,s.tribeId&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"mx-1",children:"•"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:126,columnNumber:17},void 0),e.jsxDEV("span",{children:["Tribe #",s.tribeId]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:127,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:125,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:122,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:120,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:112,columnNumber:7},void 0),s.content&&e.jsxDEV("div",{className:"text-gray-800 whitespace-pre-line mb-4",children:s.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:136,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-4 rounded-xl border border-purple-500/20",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/10",children:e.jsxDEV("div",{className:"text-gray-800 font-medium flex items-center gap-2",children:[e.jsxDEV(bt,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:145,columnNumber:13},void 0),e.jsxDEV("span",{children:"Project Repository"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:146,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:144,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:143,columnNumber:9},void 0),e.jsxDEV("div",{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-3 text-gray-600",children:[f.github&&e.jsxDEV("a",{href:f.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-purple-500/10 transition-colors",onClick:j=>j.stopPropagation(),children:[e.jsxDEV(bt,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:159,columnNumber:17},void 0),e.jsxDEV("span",{children:"GitHub"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:160,columnNumber:17},void 0),e.jsxDEV(ns,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:161,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:152,columnNumber:15},void 0),f.website&&e.jsxDEV("a",{href:f.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-purple-500/10 transition-colors",onClick:j=>j.stopPropagation(),children:[e.jsxDEV(Je,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:172,columnNumber:17},void 0),e.jsxDEV("span",{children:"Website"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:173,columnNumber:17},void 0),e.jsxDEV(ns,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:174,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:165,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:150,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:149,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:142,columnNumber:7},void 0),o&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex items-center mt-4 text-gray-500 text-sm",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("span",{children:N},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:186,columnNumber:15},void 0),e.jsxDEV("span",{className:"mx-1",children:"likes"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:187,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:185,columnNumber:13},void 0),e.jsxDEV("span",{className:"mx-1.5",children:"•"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:189,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("span",{children:C},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:191,columnNumber:15},void 0),e.jsxDEV("span",{className:"mx-1",children:"comments"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:192,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:190,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:184,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[e.jsxDEV("button",{onClick:m,className:"flex items-center text-gray-500 hover:text-red-600",children:[l?e.jsxDEV($t,{className:"h-5 w-5 text-red-600"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:203,columnNumber:17},void 0):e.jsxDEV(_t,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:205,columnNumber:17},void 0),e.jsxDEV("span",{className:"ml-1.5 text-sm",children:N>0?N:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:207,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:198,columnNumber:13},void 0),e.jsxDEV("button",{onClick:w,className:"flex items-center text-gray-500 hover:text-blue-600",children:[e.jsxDEV(zt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:214,columnNumber:15},void 0),e.jsxDEV("span",{className:"ml-1.5 text-sm",children:C>0?C:""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:215,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:210,columnNumber:13},void 0),e.jsxDEV("button",{onClick:g,className:"flex items-center text-gray-500 hover:text-green-600",children:e.jsxDEV(Kt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:222,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:218,columnNumber:13},void 0),e.jsxDEV("button",{onClick:c,className:"flex items-center text-gray-500 hover:text-yellow-600",children:h?e.jsxDEV(qt,{className:"h-5 w-5 text-yellow-600"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:230,columnNumber:17},void 0):e.jsxDEV(Wt,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:232,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:225,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:197,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:183,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/types/ProjectPost.tsx",lineNumber:107,columnNumber:5},void 0)},Ut={[S.TEXT]:"text",[S.IMAGE]:"image",[S.VIDEO]:"video",[S.LINK]:"link",[S.EVENT]:"event",[S.POLL]:"poll",6:"bounty",7:"project"},eo=({post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o=!0})=>(()=>{var w,g,c,x,k,v;const u=s.type!==void 0&&s.type!==null?String(s.type):"";console.log("PostTypeMapper rendering post:",{id:s.id,rawType:s.type,numericType:typeof s.type=="number"?s.type:parseInt(u,10),author:s.author,content:((w=s.content)==null?void 0:w.substring(0,30))+(s.content&&s.content.length>30?"...":""),hasMetadata:!!s.metadata,metadataKeys:s.metadata?Object.keys(s.metadata):[],hasMedia:((g=s.metadata)==null?void 0:g.media)&&s.metadata.media.length>0,mediaTypes:(x=(c=s.metadata)==null?void 0:c.media)==null?void 0:x.map(N=>N.type),componentType:typeof s.type=="number"?Ut[s.type]:u.toLowerCase()});const h=s.type===S.EVENT||s.type===3,d=u.toLowerCase()==="event",b=((k=s.metadata)==null?void 0:k.event)!==void 0;console.log("Event detection:",{eventDetails:(v=s.metadata)==null?void 0:v.event,isEventType:h,isEventString:d,hasEventMetadata:b});const f=typeof s.type=="number"?s.type:parseInt(u,10);switch(isNaN(f)?u.toLowerCase():Ut[f]){case"text":return e.jsxDEV(kt,{post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:97,columnNumber:11},void 0);case"image":return e.jsxDEV(qa,{post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:109,columnNumber:11},void 0);case"video":return e.jsxDEV(Wa,{post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:121,columnNumber:11},void 0);case"link":return e.jsxDEV(Ga,{post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:133,columnNumber:11},void 0);case"event":return e.jsxDEV(Xa,{post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:145,columnNumber:11},void 0);case"poll":return e.jsxDEV(Ya,{post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:157,columnNumber:11},void 0);case"bounty":return e.jsxDEV(Qa,{post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:169,columnNumber:11},void 0);case"project":return e.jsxDEV(Za,{post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:181,columnNumber:11},void 0);default:return console.warn(`Unknown post type: ${s.type}, falling back to TextPost`),e.jsxDEV(kt,{post:s,onLike:n,onComment:t,onShare:r,onReport:a,onClick:i,showActions:o},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/posts/PostTypeMapper.tsx",lineNumber:194,columnNumber:11},void 0)}})(),so=[{value:"ALL",label:"All"},{value:S.TEXT,label:"Text"},{value:S.IMAGE,label:"Image"},{value:S.VIDEO,label:"Video"},{value:S.POLL,label:"Polls"},{value:S.EVENT,label:"Events"},{value:S.LINK,label:"Links"}];function to({items:s,loading:n=!1,showCreateButton:t=!0,showFilters:r=!0,onItemClick:a}){const i=as(),[o,l]=p.useState("ALL"),[u,h]=p.useState("all"),[d,b]=p.useState("latest"),[f,m]=p.useState(!1);p.useEffect(()=>{},[s]);const w=[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"all",label:"All Time"}],g=[{value:"trending",label:"Trending",icon:dr},{value:"latest",label:"Latest",icon:is},{value:"top",label:"Top",icon:Jt}],c=y=>{},x=y=>{},k=y=>{},v=y=>{},N=()=>{i(rs(!0))},C=p.useMemo(()=>{if(!s||s.length===0)return[];let y=[...s];o!=="ALL"&&(y=y.filter(j=>{if("content"in j&&"type"in j){const I=j;if(o===S.EVENT)return Ha(I);const D=String(I.type).toLowerCase(),U=String(o).toLowerCase();if(D===U||o===S.TEXT&&(I.type===0||D==="text"||D==="0"))return!0;if(typeof o=="number"){const E=parseInt(D,10);if(!isNaN(E)&&E===o)return!0;const V=S[o];if(V&&D===V.toLowerCase())return!0}return!1}return!1}));const T=new Date;switch(u!=="all"&&(y=y.filter(j=>{const I=("createdAt"in j,j.createdAt),D=new Date(I);switch(u){case"today":return D.getDate()===T.getDate()&&D.getMonth()===T.getMonth()&&D.getFullYear()===T.getFullYear();case"week":{const U=new Date(T.getTime()-6048e5);return D>=U}case"month":return D.getMonth()===T.getMonth()&&D.getFullYear()===T.getFullYear();default:return!0}})),d){case"trending":y.sort((j,I)=>{const D="stats"in j?j.stats:{likeCount:0,commentCount:0},U="stats"in I?I.stats:{likeCount:0,commentCount:0},E=((D==null?void 0:D.likeCount)||0)+((D==null?void 0:D.commentCount)||0)*2;return((U==null?void 0:U.likeCount)||0)+((U==null?void 0:U.commentCount)||0)*2-E});break;case"latest":y.sort((j,I)=>{const D="createdAt"in j?new Date(j.createdAt).getTime():new Date(j.createdAt).getTime();return("createdAt"in I?new Date(I.createdAt).getTime():new Date(I.createdAt).getTime())-D});break;case"top":y.sort((j,I)=>{const D="stats"in j?j.stats:{likeCount:0},U="stats"in I?I.stats:{likeCount:0};return((U==null?void 0:U.likeCount)||0)-((D==null?void 0:D.likeCount)||0)});break}return y},[s,o,u,d]),P=y=>"content"in y&&"type"in y?e.jsxDEV("div",{className:"mb-4",children:e.jsxDEV(eo,{post:y,onLike:()=>c(y.id),onComment:()=>x(y.id),onShare:()=>k(y.id),onReport:()=>v(y.id),onClick:()=>a==null?void 0:a(y)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:204,columnNumber:11},this)},y.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:203,columnNumber:9},this):null;return n?e.jsxDEV("div",{children:"Loading..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:221,columnNumber:12},this):e.jsxDEV("div",{className:"space-y-2",children:[r&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-transparent",children:[e.jsxDEV("div",{className:"flex items-center space-x-2 overflow-x-auto scrollbar-hide",children:e.jsxDEV("div",{className:"flex rounded-lg bg-gray-800/30 p-1",children:so.map(y=>e.jsxDEV("button",{onClick:()=>l(y.value),className:Y("px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",o===y.value?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200 hover:bg-gray-700/30"),children:y.label},y.value,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:233,columnNumber:19},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:231,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:230,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>m(!f),className:"p-2.5 bg-gray-800/30 border border-gray-700/50 rounded-lg text-gray-400 hover:text-white hover:bg-gray-700/50 transition-colors",children:e.jsxDEV(ur,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:253,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:249,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:229,columnNumber:11},this),f&&e.jsxDEV("div",{className:"px-4 py-3 bg-gray-800/20 border-t border-b border-gray-700/30",children:[e.jsxDEV("div",{className:"mb-3",children:[e.jsxDEV("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Sort By"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:261,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:g.map(({value:y,label:T,icon:j})=>e.jsxDEV("button",{onClick:()=>b(y),className:Y("px-3 py-1.5 rounded-full flex items-center space-x-2 text-sm transition-colors",d===y?"bg-blue-600 text-white":"text-gray-400 hover:text-white bg-gray-800/30 hover:bg-gray-700/50"),children:[e.jsxDEV(j,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:274,columnNumber:23},this),e.jsxDEV("span",{children:T},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:275,columnNumber:23},this)]},y,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:264,columnNumber:21},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:262,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:260,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Time Range"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:282,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:w.map(({value:y,label:T})=>e.jsxDEV("button",{onClick:()=>h(y),className:Y("px-3 py-1 rounded-full text-sm transition-colors",u===y?"bg-blue-600 text-white":"text-gray-400 hover:text-white bg-gray-800/30 hover:bg-gray-700/50"),children:T},y,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:285,columnNumber:21},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:283,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:281,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:259,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:227,columnNumber:9},this),e.jsxDEV("div",{className:"px-4 pb-4 space-y-4",children:[n?e.jsxDEV("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsxDEV(Mt,{className:"w-10 h-10 text-blue-500 animate-spin mb-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:309,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-400",children:"Loading content..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:310,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:308,columnNumber:11},this):C.length>0?e.jsxDEV("div",{className:"space-y-4",children:C.map(P)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:313,columnNumber:11},this):e.jsxDEV("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-gray-800/50 border border-gray-700/50 rounded-full flex items-center justify-center mb-4",children:e.jsxDEV(Ht,{className:"w-8 h-8 text-gray-500"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:319,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:318,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-1",children:"No content found"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:321,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-400 mb-6 max-w-md",children:o==="ALL"?"No posts or content available.":`No ${o===S.EVENT?"event":o===S.POLL?"poll":o===S.TEXT?"text":o===S.IMAGE?"image":o===S.VIDEO?"video":o===S.LINK?"link":""} content found. Try a different filter or create a new post.`},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:322,columnNumber:13},this),t&&e.jsxDEV("button",{onClick:N,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[e.jsxDEV(we,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:338,columnNumber:17},this),"Create Post"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:334,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:317,columnNumber:11},this),t&&e.jsxDEV("div",{className:"fixed bottom-6 right-6 md:hidden",children:e.jsxDEV("button",{onClick:N,className:"w-12 h-12 rounded-full bg-blue-600 text-white shadow-lg flex items-center justify-center hover:bg-blue-700 transition-colors",children:e.jsxDEV(we,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:352,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:348,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:347,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:306,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/UnifiedFeed.tsx",lineNumber:225,columnNumber:5},this)}const no=typeof window<"u",$e=class $e{constructor(){O(this,"prisma",null);O(this,"isServer");if(this.isServer=!no,!this.isServer)console.log("Running in browser environment - database operations will be mocked");else try{this.prisma=new cr.PrismaClient}catch(n){console.error("Failed to initialize PrismaClient:",n)}}static getInstance(){return $e.instance||($e.instance=new $e),$e.instance}ensurePrisma(){if(!this.prisma)throw this.isServer?new Error("PrismaClient not initialized"):new Error("Database operations not available in browser");return this.prisma}async createPost(n){return this.isServer?this.ensurePrisma().post.create({data:{id:n.id,authorId:n.authorId,content:n.content,type:n.type,tribeId:n.tribeId,metadata:n.metadata||{},blockchainId:n.blockchainId,blockchainTxHash:n.blockchainTxHash,isConfirmed:n.isConfirmed||!1,createdAt:new Date,updatedAt:new Date}}):{...n}}async getPost(n){return this.isServer?this.ensurePrisma().post.findUnique({where:{id:n}}):null}async getPostByBlockchainId(n){return this.isServer?this.ensurePrisma().post.findUnique({where:{blockchainId:n}}):null}async getPostsByTribe(n,t=20,r=0){return this.isServer?this.ensurePrisma().post.findMany({where:{tribeId:n,updatedAt:{not:void 0}},orderBy:{createdAt:"desc"},take:t,skip:r}):[]}async getUserFeed(n,t=20,r=0){return this.isServer?this.ensurePrisma().post.findMany({where:{authorId:n,updatedAt:{not:void 0}},orderBy:{createdAt:"desc"},take:t,skip:r}):[]}async confirmPost(n,t){return this.isServer?this.ensurePrisma().post.update({where:{blockchainId:n},data:{blockchainTxHash:t,isConfirmed:!0,confirmedAt:new Date}}):{blockchainId:n,blockchainTxHash:t,isConfirmed:!0}}async deletePost(n){return this.isServer?this.ensurePrisma().post.update({where:{id:n},data:{updatedAt:null}}):{id:n}}async createInteraction(n,t,r){return this.isServer?this.ensurePrisma().postInteraction.create({data:{postId:n,userId:t,type:r}}):{id:Date.now().toString(),postId:n,userId:t,type:r}}async getInteractions(n){return this.isServer?this.ensurePrisma().postInteraction.findMany({where:{postId:n}}):[]}async disconnect(){this.isServer&&this.prisma&&await this.prisma.$disconnect()}async getTribe(n){try{if(this.isServer)return null;const t=localStorage.getItem(`tribe:${n}`);return t?JSON.parse(t):null}catch(t){return console.error("Error getting tribe:",t),null}}async getAllTribes(n=100,t=0){try{if(this.isServer)return[];const r=[],i=localStorage.getItem("tribe_ids");if(i){const l=JSON.parse(i).slice(t,t+n);for(const u of l){const h=await this.getTribe(u);h&&r.push(h)}}return r}catch(r){return console.error("Error getting all tribes:",r),[]}}async createOrUpdateTribe(n){try{if(this.isServer)return!1;localStorage.setItem(`tribe:${n.id}`,JSON.stringify(n));const t="tribe_ids",r=localStorage.getItem(t);let a=r?JSON.parse(r):[];return a.includes(n.id)||(a.push(n.id),localStorage.setItem(t,JSON.stringify(a))),!0}catch(t){return console.error("Error creating/updating tribe:",t),!1}}async getUserByAddress(n){try{if(this.isServer)return null;const t=localStorage.getItem(`user:${n}`);return t?JSON.parse(t):null}catch(t){return console.error("Error getting user by address:",t),null}}async getUserByUsername(n){var t;try{if(this.isServer)return null;const a=localStorage.getItem("username_map");if(a){const i=JSON.parse(a),o=(t=Object.entries(i).find(([l,u])=>u===n))==null?void 0:t[0];if(o)return this.getUserByAddress(o)}return null}catch(r){return console.error("Error getting user by username:",r),null}}async createOrUpdateUser(n){try{if(this.isServer)return!1;if(localStorage.setItem(`user:${n.address}`,JSON.stringify(n)),n.username){const t="username_map",r=localStorage.getItem(t),a=r?JSON.parse(r):{};a[n.address]=n.username,localStorage.setItem(t,JSON.stringify(a))}return!0}catch(t){return console.error("Error creating/updating user:",t),!1}}async getAllUsers(){try{if(this.isServer)return[];const n=[],t=[];for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a!=null&&a.startsWith("user:")){const i=a.substring(5);t.push(i)}}for(const r of t){const a=await this.getUserByAddress(r);a&&n.push(a)}return n}catch(n){return console.error("Error getting all users:",n),[]}}async getUserPosts(n,t=20,r=0){return this.getMockData("user_posts",n)||[]}getMockData(n,t){if(this.isServer)return null;try{const r=`${n}:${t}`,a=localStorage.getItem(r);if(!a)return null;const i=JSON.parse(a);return i.expires&&i.expires<Date.now()?(localStorage.removeItem(r),null):i.data}catch(r){return console.error("Error reading mock data:",r),null}}setMockData(n,t,r){if(!this.isServer)try{const a=`${n}:${t}`,i={data:r,timestamp:Date.now(),expires:Date.now()+5*60*1e3};localStorage.setItem(a,JSON.stringify(i))}catch(a){console.error("Error writing mock data:",a)}}async getLastIndexedBlock(n){if(!this.isServer)return 0;const t=`lastIndexedBlock:${n}`,r=localStorage.getItem(t);return r?Number(r):0}async updateLastIndexedBlock(n,t){if(!this.isServer){const r=`lastIndexedBlock:${t}`;localStorage.setItem(r,n.toString());return}}async createBlockEvent(n){return this.ensurePrisma().blockEvent.create({data:{blockNumber:BigInt(n.blockNumber),transactionHash:n.transactionHash,eventName:n.eventName,eventData:n.eventData,processed:!1,error:null}})}async markEventProcessed(n,t){await this.ensurePrisma().blockEvent.update({where:{id:n},data:{processed:!0,error:t,updatedAt:new Date}})}async getUnprocessedEvents(n=100){return this.ensurePrisma().blockEvent.findMany({where:{processed:!1},orderBy:{blockNumber:"asc"},take:n})}async createOrUpdatePost(n){if(!this.isServer)throw new Error("Cannot create/update post in browser environment");return this.ensurePrisma().post.upsert({where:{id:n.id},create:{...n,metadata:n.metadata||{},createdAt:new Date,updatedAt:new Date},update:{...n,metadata:n.metadata||{},updatedAt:new Date}})}async getUnindexedPosts(n=100){return this.isServer?this.ensurePrisma().post.findMany({where:{updatedAt:{equals:void 0}},orderBy:{createdAt:"asc"},take:n}):[]}async getPostsByBlockRange(n,t){return this.isServer?this.ensurePrisma().post.findMany({where:{createdAt:{gte:new Date(n*1e3),lte:new Date(t*1e3)}},orderBy:{createdAt:"asc"}}):[]}async updateIndexerState(n,t){await this.ensurePrisma().indexerState.upsert({where:{chainId:n},create:{chainId:n,lastIndexedBlock:t.lastIndexedBlock||BigInt(0),lastSyncTime:t.lastSyncTime||new Date},update:{...t}})}async getIndexerState(n){return this.ensurePrisma().indexerState.findFirst({where:{chainId:n}})}};O($e,"instance");let Xs=$e,xs=null;const Us=s=>(xs?s&&(xs=new Ts(s)):xs=new Ts(s||0),xs),Pt=()=>Se.getInstance();class ro{constructor(n){O(this,"cache");O(this,"maxSize");O(this,"keyTimestamps");this.cache=new Map,this.maxSize=n,this.keyTimestamps=new Map}get(n){if(this.cache.has(n))return this.keyTimestamps.set(n,Date.now()),this.cache.get(n)}set(n,t){if(this.cache.size>=this.maxSize&&!this.cache.has(n)){const r=this.getOldestKey();r&&(this.cache.delete(r),this.keyTimestamps.delete(r))}this.cache.set(n,t),this.keyTimestamps.set(n,Date.now())}has(n){return this.cache.has(n)}delete(n){return this.keyTimestamps.delete(n),this.cache.delete(n)}clear(){this.cache.clear(),this.keyTimestamps.clear()}getOldestKey(){if(this.keyTimestamps.size===0)return;let n,t=1/0;return this.keyTimestamps.forEach((r,a)=>{r<t&&(t=r,n=a)}),n}get size(){return this.cache.size}keys(){return this.cache.keys()}values(){return this.cache.values()}entries(){return this.cache.entries()}}const _e=class _e{constructor(){O(this,"postsCache");O(this,"tribePostsCache");O(this,"userPostsCache");O(this,"dbService",null);O(this,"indexerService",null);O(this,"queueService",null);O(this,"CACHE_TTL",5*60*1e3);O(this,"LOCAL_STORAGE_TTL",24*60*60*1e3);O(this,"MAX_CACHED_POSTS",250);O(this,"MAX_POSTS_PER_TRIBE",100);O(this,"isServer");O(this,"contract");O(this,"isSyncing",!1);O(this,"syncProgress",0);O(this,"syncTotal",0);O(this,"syncCallbacks",new Set);O(this,"lastSyncTime",0);O(this,"syncErrorCount",0);O(this,"lastError",null);O(this,"metrics",{hits:0,misses:0,source:{memory:0,localStorage:0,indexedDB:0,database:0,blockchain:0}});O(this,"cacheStats",new Map);this.postsCache=new ro(this.MAX_CACHED_POSTS),this.tribePostsCache=new Map,this.userPostsCache=new Map,this.isServer=typeof window>"u",this.isServer?(this.dbService=Xs.getInstance(),this.indexerService=Us(),this.setupEventListeners()):this.initializeCache()}static getInstance(){return _e.instance||(_e.instance=new _e),_e.instance}setupEventListeners(){var n;(n=this.indexerService)==null||n.onCacheUpdate((t,r)=>{if(t==="posts"){const{postId:a,post:i}=r;this.invalidateCache(a)}})}async initializeCache(){console.info("[Cache] Initializing frontend cache...");try{await this.loadFromIndexedDB(),await this.loadFromLocalStorage(),await this.fetchInitialData(),console.info("[Cache] Cache initialization complete")}catch(n){console.error("[Cache] Error initializing cache:",n)}}async loadFromIndexedDB(){if(window.indexedDB)try{const n=indexedDB.open("tribes_posts_cache",1);n.onsuccess=()=>{const r=n.result.transaction(["posts","tribes"],"readonly"),a=r.objectStore("posts"),i=r.objectStore("tribes");a.getAll().onsuccess=o=>{o.target.result.forEach(u=>{if(Date.now()-u._timestamp<this.LOCAL_STORAGE_TTL){const{_timestamp:h,...d}=u;this.setCache(u.id,d)}})},i.getAll().onsuccess=o=>{o.target.result.forEach(u=>{Date.now()-u.timestamp<this.LOCAL_STORAGE_TTL&&this.tribePostsCache.set(`tribe:${u.id}`,{data:u.postIds,timestamp:u.timestamp})})}},n.onupgradeneeded=t=>{const r=n.result;r.objectStoreNames.contains("posts")||r.createObjectStore("posts",{keyPath:"id"}),r.objectStoreNames.contains("tribes")||r.createObjectStore("tribes",{keyPath:"id"})}}catch(n){console.warn("[Cache] IndexedDB load failed:",n)}}async fetchInitialData(){try{const n=await this.getContract();if(!n){console.warn("[Cache] No contract available for initial data fetch");return}const[t,r]=await n.getPostsByTribe("0",BigInt(0),BigInt(20));if(!Array.isArray(t)){console.warn("[Cache] Invalid post IDs from blockchain");return}const i=(await Promise.all(t.map(async o=>{const l=await n.getPost(Number(o));return l?this.mapBlockchainPostToUIPost(l):null}))).filter(o=>o!==null);i.forEach(o=>{this.setCache(o.id,o)}),console.info("[Cache] Initial data loaded from blockchain:",i.length,"posts")}catch(n){console.error("[Cache] Error fetching initial data:",n)}}async getFromCacheOrDB(n){var i;const t=`posts:${n}`,r=this.postsCache.get(t);if(r&&!this.isCacheExpired(r))return this.logCacheAccess(t,!0,"memory"),r.data;if(!this.isServer){try{const l=await this.getFromIndexedDB(n);if(l)return this.logCacheAccess(t,!0,"indexedDB"),l}catch(l){console.warn("[Cache] IndexedDB access failed:",l)}const o=this.getFromLocalStorage(n);if(o)return this.logCacheAccess(t,!0,"localStorage"),o;try{const l=await fetch(`/api/posts/${n}`);if(l.ok){const u=await l.json();return this.setCache(n,u),u}}catch(l){console.error("[API] Error fetching post:",l)}return null}const a=await((i=this.dbService)==null?void 0:i.getPost(n));if(a){this.logCacheAccess(t,!0,"database");const o=await this.mapBlockchainPostToUIPost(a);if(o)return this.setCache(n,o),o}return this.isServer?(this.logCacheAccess(t,!1,"blockchain"),this.fetchFromBlockchain(n)):null}async getUserFeed(n,t=50,r=0){if(!n)return[];const a=`user_${n}`,i=this.userPostsCache.get(a);if(i&&!this.isCacheExpired(i)){const o=i.data.slice(r,r+t).map(h=>this.getFromCacheOrDB(h)),u=(await Promise.all(o)).filter(h=>h!==null);if(u.length>0)return u}try{const o=await this.getContract();if(!o)return console.warn("[Blockchain] No contract available for user feed"),[];const[l,u]=await o.getPostsByUser(n,BigInt(r),BigInt(t));if(!Array.isArray(l))return console.warn("[Blockchain] Invalid post IDs from blockchain"),[];const d=(await Promise.all(l.map(async b=>{const f=await o.getPost(Number(b));return f?this.mapBlockchainPostToUIPost(f):null}))).filter(b=>b!==null);if(d.length>0)return this.cacheUserPosts(n,d),console.info("[Blockchain] Retrieved",d.length,"posts for user",n),d}catch(o){console.error("[Blockchain] Error fetching user feed:",o)}return[]}cacheUserPosts(n,t){this.userPostsCache.set(`user_${n}`,{data:t.map(r=>r.id),timestamp:Date.now()}),t.forEach(r=>{this.setCache(r.id,r)})}async getPostsByTribe(n,t=20,r=0){const a=`tribe:${n}`,i=this.tribePostsCache.get(a);if(i&&!this.isCacheExpired(i)){const o=i.data.slice(r,r+t).map(h=>this.getFromCacheOrDB(h)),u=(await Promise.all(o)).filter(h=>h!==null);if(u.length>0)return u}try{const o=await this.getContract();if(!o)return console.warn("[Blockchain] No contract available for tribe posts"),[];const[l,u]=await o.getTribePosts(n,BigInt(r),BigInt(t));if(!Array.isArray(l))return console.warn("[Blockchain] Invalid post IDs from blockchain"),[];const d=(await Promise.all(l.map(async b=>{const f=await o.getPost(Number(b));return f?this.mapBlockchainPostToUIPost(f):null}))).filter(b=>b!==null);if(d.length>0)return this.cacheTribePosts(n,d),console.info("[Blockchain] Retrieved",d.length,"posts for tribe",n),d}catch(o){console.error("[Blockchain] Error fetching tribe posts:",o)}return[]}cacheTribePosts(n,t){this.tribePostsCache.set(`tribe:${n}`,{data:t.map(r=>r.id),timestamp:Date.now()}),t.forEach(r=>{this.setCache(r.id,r)})}async getFromIndexedDB(n){return window.indexedDB?new Promise((t,r)=>{const a=indexedDB.open("tribes_posts_cache",1);a.onerror=()=>r(a.error),a.onsuccess=()=>{const u=a.result.transaction(["posts"],"readonly").objectStore("posts").get(n);u.onsuccess=()=>{const h=u.result;h&&Date.now()-h._timestamp<this.LOCAL_STORAGE_TTL?(delete h._timestamp,t(h)):t(null)},u.onerror=()=>r(u.error)},a.onupgradeneeded=i=>{const o=a.result;o.objectStoreNames.contains("posts")||o.createObjectStore("posts",{keyPath:"id"})}}):null}async saveToIndexedDB(n,t){if(window.indexedDB)return new Promise((r,a)=>{const i=indexedDB.open("tribes_posts_cache",1);i.onerror=()=>a(i.error),i.onsuccess=()=>{const l=i.result.transaction(["posts"],"readwrite"),u=l.objectStore("posts"),h={...t,_timestamp:Date.now()};u.put(h).onsuccess=()=>r(),l.onerror=()=>a(l.error)}})}getCacheMetrics(){return{...this.metrics}}async clearExpiredCache(){const n=Date.now();for(const[t,r]of this.postsCache.entries())this.isCacheExpired(r)&&this.postsCache.delete(t);if(!this.isServer)try{const t=indexedDB.open("tribes_posts_cache",1);t.onsuccess=()=>{const i=t.result.transaction(["posts"],"readwrite").objectStore("posts"),o=IDBKeyRange.upperBound(n-this.LOCAL_STORAGE_TTL);i.index("timestamp").openCursor(o).onsuccess=l=>{const u=l.target.result;u&&(i.delete(u.primaryKey),u.continue())}}}catch(t){console.warn("[Cache] Error clearing IndexedDB:",t)}console.info("[Cache] Cleared expired entries")}async setCache(n,t){const r=`posts:${n}`;if(this.postsCache.set(r,{data:t,timestamp:Date.now()}),!this.isServer){try{await this.saveToIndexedDB(t.id,t)}catch(a){console.warn("[Cache] Failed to save to IndexedDB, falling back to localStorage:",a),this.saveToLocalStorage(t.id,t)}this.queueService&&await this.queueService.addToQueue("CACHE_POST",{postId:t.id,post:t},{priority:3})}}async fetchFromBlockchain(n){var t;try{const r=await this.getContract();if(!r)return console.warn("No blockchain contract available"),null;const a=await r.getPost(parseInt(n));if(a){const i=await this.mapBlockchainPostToUIPost(a);if(i){const o={id:i.id,authorId:i.author,content:i.content,type:i.type.toString(),tribeId:i.tribeId.toString(),metadata:i.metadata?JSON.stringify(i.metadata):{},blockchainId:parseInt(i.id),isConfirmed:!0};return await((t=this.dbService)==null?void 0:t.createOrUpdatePost(o)),this.setCache(n,i),this.isServer||this.saveToLocalStorage(n,i),i}}}catch(r){console.error("Error fetching post from blockchain:",r)}return null}getFromLocalStorage(n){try{const t=`post_${n}`,r=localStorage.getItem(t);if(r){const a=JSON.parse(r),i=a._timestamp||0;if(Date.now()-i<this.LOCAL_STORAGE_TTL){delete a._timestamp;const o=a;return this.setCache(n,o),Date.now()-i>this.CACHE_TTL/2&&this.queuePostRefresh(n),o}}}catch(t){console.warn("Error reading post from localStorage:",t)}return null}saveToLocalStorage(n,t){try{const r={...t,_timestamp:Date.now()};localStorage.setItem(`post_${n}`,JSON.stringify(r))}catch(r){console.warn("Error saving post to localStorage:",r)}}queuePostRefresh(n){this.isServer||this.queueService&&this.queueService.addToQueue("REFRESH_POST",{postId:n},{priority:3})}async getPost(n){return this.getFromCacheOrDB(n)}getSyncStatus(){return{isSyncing:this.isSyncing,progress:this.syncProgress,total:this.syncTotal,lastSyncTime:this.lastSyncTime,errorCount:this.syncErrorCount,lastError:this.lastError}}addSyncListener(n){return this.syncCallbacks.add(n),()=>this.syncCallbacks.delete(n)}isSyncingPosts(){return this.isSyncing}notifySyncListeners(){this.syncCallbacks.forEach(n=>n())}async startBackgroundSync(){if(this.isServer)return;const n=async()=>{if(!this.isSyncing)try{this.isSyncing=!0,this.syncProgress=0,this.syncTotal=0,this.lastError=null,this.notifySyncListeners();const t=Array.from(this.tribePostsCache.keys());if(this.syncTotal=t.length,t.length===0)try{const r=Object.keys(localStorage);for(const a of r)if(a.startsWith("tribe_posts_")){const i=a.replace("tribe_posts_","");t.includes(`tribe:${i}`)||t.push(`tribe:${i}`)}this.syncTotal=t.length}catch(r){console.warn("Error reading localStorage for tribe IDs:",r)}for(let r=0;r<t.length;r++){const i=t[r].replace("tribe:","");try{await this.syncTribePosts(i),this.syncProgress=r+1,this.notifySyncListeners()}catch(o){console.error(`Error syncing posts for tribe ${i}:`,o),this.syncErrorCount++,this.lastError=o instanceof Error?o:new Error("Unknown sync error")}}this.lastSyncTime=Date.now(),this.syncErrorCount>0&&this.syncProgress===this.syncTotal&&(this.syncErrorCount=0)}catch(t){console.error("Error in sync process:",t),this.syncErrorCount++,this.lastError=t instanceof Error?t:new Error("Unknown sync error")}finally{this.isSyncing=!1,this.notifySyncListeners()}};setTimeout(async()=>{await n()},5e3),setInterval(n,3e4)}async syncTribePosts(n){try{const t=await this.getContract();if(!t){console.warn("[Blockchain] No contract available for syncing tribe posts");return}const[r,a]=await t.getPostsByTribe(n,BigInt(0),BigInt(this.MAX_POSTS_PER_TRIBE));if(Array.isArray(r)){const o=(await Promise.all(r.map(async l=>{const u=await t.getPost(Number(l));return u?this.mapBlockchainPostToUIPost(u):null}))).filter(l=>l!==null);if(o.length>0){await Promise.all(o.map(async h=>{var d;this.setCache(h.id,h),await((d=this.dbService)==null?void 0:d.createPost({id:h.id,authorId:h.author,content:h.content,type:h.type.toString(),tribeId:h.tribeId.toString(),metadata:h.metadata?JSON.stringify(h.metadata):{},blockchainId:parseInt(h.id),isConfirmed:!0}))}));const l=o.map(h=>h.id),u=`tribe_${n}`;if(this.tribePostsCache.set(u,{data:l,timestamp:Date.now()}),!this.isServer)try{localStorage.setItem(u,JSON.stringify({data:l,timestamp:Date.now()}))}catch(h){console.warn("[Cache] Error saving tribe posts to localStorage:",h)}}}}catch(t){console.error("[Blockchain] Error syncing tribe posts:",t)}}clearPostFromCache(n){const t=`posts:${n}`;if(this.postsCache.delete(t),!this.isServer)try{localStorage.removeItem(`post_${n}`)}catch(r){console.warn("Error removing post from localStorage:",r)}}clearTribeCache(n){const t=`tribe:${n}`;if(this.tribePostsCache.delete(t),!this.isServer)try{localStorage.removeItem(`tribe_posts_${n}`)}catch(r){console.warn("Error removing tribe posts from localStorage:",r)}}invalidateCache(n){var r;this.clearPostFromCache(n);const t=(r=this.postsCache.get(`posts:${n}`))==null?void 0:r.data;t!=null&&t.tribeId&&this.clearTribeCache(t.tribeId.toString()),t!=null&&t.author&&this.clearUserCache(t.author)}clearUserCache(n){if(this.userPostsCache.delete(n),!this.isServer)try{localStorage.removeItem(`user_posts_${n}`)}catch(t){console.warn("[Cache] Error removing user posts from localStorage:",t)}}async getContract(){if(this.contract)return this.contract;try{await he.connect();const n=await he.getChainId();console.info("[Blockchain] Using chain ID:",n);const{postMinter:t}=K(n),r=de(n),a={address:t.address,abi:t.abi,callReadFunction:async(i,o=[])=>{try{return await r.readContract({address:t.address,abi:t.abi,functionName:i,args:o})}catch(l){throw console.error(`[Blockchain] Error calling ${i}:`,l),l}},getPostsByUser:async(i,o,l)=>a.callReadFunction("getPostsByUser",[i,o,l]),getPost:async i=>a.callReadFunction("getPost",[i]),getTribePosts:async(i,o,l)=>a.callReadFunction("getTribePosts",[i,o,l]),getUserPosts:async i=>(console.info("[Blockchain] getUserPosts not implemented, using fallback"),[])};return this.contract=a,a}catch(n){return console.error("[Blockchain] Error creating contract:",n),this.createMockContract()}}createMockContract(){return{getPostsByUser:async()=>(console.info("[Mock] Using mock contract getPostsByUser"),[[],0]),getUserPosts:async()=>(console.info("[Mock] Using mock contract getUserPosts"),[]),getPost:async()=>null,getTribePosts:async()=>(console.info("[Mock] Using mock contract getTribePosts"),[[],0])}}loadFromLocalStorage(){try{const n=localStorage.getItem("posts_cache");if(n){const r=JSON.parse(n),a=Date.now();Object.entries(r).forEach(([i,o])=>{o.timestamp&&a-o.timestamp<this.LOCAL_STORAGE_TTL&&this.postsCache.set(i,o)})}const t=localStorage.getItem("tribe_posts_cache");if(t){const r=JSON.parse(t),a=Date.now();Object.entries(r).forEach(([i,o])=>{o.timestamp&&a-o.timestamp<this.LOCAL_STORAGE_TTL&&this.tribePostsCache.set(i,o)})}}catch(n){console.error("[Cache] Error loading from localStorage:",n)}}isCacheExpired(n){return Date.now()-n.timestamp>this.CACHE_TTL}logCacheAccess(n,t,r){this.metrics[t?"hits":"misses"]++,t&&this.metrics.source[r]++;const a=this.cacheStats.get(n)||{lastAccess:0,accessCount:0,dataSource:r};a.lastAccess=Date.now(),a.accessCount++,this.cacheStats.set(n,a),(!t||a.accessCount%10===0)&&console.info(`[Cache ${t?"HIT":"MISS"}] ${n} from ${r} (Access #${a.accessCount})`)}async mapBlockchainPostToUIPost(n){var t,r;if(!n||!Array.isArray(n)&&typeof n!="object")return console.info("[Blockchain] Invalid post data received"),null;try{let a;try{a=typeof n[3]=="string"?JSON.parse(n[3]):n[3],typeof a=="string"&&(a=JSON.parse(a))}catch(h){console.warn("[Blockchain] Using default metadata due to parsing error:",h),a={title:"",content:"",type:"TEXT",tags:[],createdAt:new Date().toISOString()}}const i=this.getPostType(a.type||S.TEXT),o=n[1]||"0x0000000000000000000000000000000000000000",l=Number(n[2]);return!o||l===void 0?(console.warn("[Blockchain] Missing essential post data"),null):{id:((t=n[0])==null?void 0:t.toString())||"0",author:o,content:a.content||"",type:i,createdAt:a.createdAt?new Date(a.createdAt).getTime():Date.now(),tribeId:l,stats:{likeCount:Number(n[6])||0,commentCount:0,shareCount:0,viewCount:0,saveCount:0},metadata:{type:i,content:a.content||"",title:a.title||"",description:a.description||"",tags:a.tags||[],media:((r=a.mediaContent)==null?void 0:r.map(h=>({url:h.url,type:h.type,width:h.width,height:h.height})))||[],createdAt:a.createdAt||new Date().toISOString()}}}catch(a){return console.error("[Blockchain] Error mapping post:",a),null}}getPostType(n){const t=n.toUpperCase();return Object.values(S).includes(t)?t:S.TEXT}async processQueue(){this.queueService&&await this.queueService.processQueue()}async enqueueTask(n){this.queueService&&await this.queueService.addToQueue(n.type,n.data,{priority:n.priority})}};O(_e,"instance");let Se=_e;function ao(){const{address:s}=Zs();Pe();const[n,t]=p.useState({}),[r,a]=p.useState(!1),[i,o]=p.useState(null),l=p.useRef(null);p.useEffect(()=>{l.current=Se.getInstance(),console.log("PostsService initialized:",l.current)},[]);const u=()=>(l.current||(l.current=Se.getInstance()),l.current),h=p.useCallback(async f=>{try{a(!0);const m=u();console.log(`Fetching post with ID: ${f}`);const w=await m.getPost(f);return w?(console.log("Post retrieved:",w),t(g=>({...g,[w.id]:w}))):console.log("No post found with ID:",f),w}catch(m){console.error("Error fetching post:",m);const w=m instanceof Error?m:new Error("Failed to fetch post");return o(w),null}finally{a(!1)}},[]),d=p.useCallback(async f=>{try{a(!0);const m=u();console.log(`Fetching posts for tribe: ${f}`);const w=await m.getPostsByTribe(f);console.log(`Retrieved ${w.length} posts for tribe ${f}:`,w);const g=w.reduce((c,x)=>(c[x.id]=x,c),{});return t(c=>({...c,...g})),w}catch(m){console.error("Error fetching tribe posts:",m);const w=m instanceof Error?m:new Error("Failed to fetch tribe posts");return o(w),[]}finally{a(!1)}},[]),b=p.useCallback(async()=>{if(!s)return console.error("Cannot fetch feed: Wallet not connected"),o(new Error("Wallet not connected")),[];try{a(!0);const f=u();console.log(`Fetching feed for address: ${s}`);const m=await f.getUserFeed(s);console.log(`Retrieved ${m.length} posts for feed:`,m);const w=m.reduce((g,c)=>(g[c.id]=c,g),{});return t(g=>({...g,...w})),m}catch(f){console.error("Error fetching feed:",f);const m=f instanceof Error?f:new Error("Failed to fetch feed");return o(m),[]}finally{a(!1)}},[s]);return{posts:n,loading:r,error:i,fetchPost:h,fetchPostsByTribe:d,fetchFeed:b}}function oo(){const s=ce(),n=as();Pe();const{posts:t,loading:r,error:a,fetchFeed:i}=ao(),{profile:o}=Ze(),{address:l}=js(),{tribes:u,isLoading:h}=Is();p.useEffect(()=>{(u==null?void 0:u.length)>0?console.log("Dashboard - Loaded Tribes:",u):console.log(h?"Dashboard - Tribes still loading...":"Dashboard - No tribes available or loading error")},[u,h]),p.useEffect(()=>{l&&(console.log("Fetching feed for address:",l),i().catch(w=>{console.error("Error fetching feed:",w)}))},[i,l]);const d=p.useMemo(()=>t?(console.log("Dashboard posts:",Object.values(t)),Object.values(t).map(w=>w.type===void 0?(console.warn(`Post ${w.id} has no type, defaulting to TEXT`),{...w,type:S.TEXT}):w)):[],[t]),b=p.useCallback(w=>{"type"in w&&s(`/post/${w.id}`)},[s]),f=p.useCallback(()=>{n(rs(!0))},[n]),m=()=>r?e.jsxDEV("div",{children:"Loading..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:81,columnNumber:14},this):a?e.jsxDEV("div",{children:["Error: ",a.toString()]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:85,columnNumber:14},this):d.length===0?e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-2",children:"No posts yet"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:91,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-400 mb-6",children:"Your feed is empty. Start by creating a post or joining tribes."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:92,columnNumber:11},this),e.jsxDEV("button",{onClick:f,className:"inline-flex items-center px-4 py-2 bg-[#4ADE80] text-black rounded-lg hover:bg-[#4ADE80]/90 transition-colors",children:[e.jsxDEV(we,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:99,columnNumber:13},this),"Create Post"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:95,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:90,columnNumber:9},this):e.jsxDEV(to,{items:d,loading:r,showCreateButton:!0,onItemClick:b},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:107,columnNumber:7},this);return e.jsxDEV(cn,{children:[m(),e.jsxDEV("div",{className:"fixed bottom-20 right-6 z-10",children:e.jsxDEV("button",{onClick:f,className:"flex items-center justify-center w-14 h-14 rounded-full bg-[#4ADE80] text-black shadow-lg hover:bg-[#4ADE80]/90 transition-colors","aria-label":"Create post",children:e.jsxDEV(we,{className:"w-6 h-6"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:127,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:122,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:121,columnNumber:7},this),e.jsxDEV(nn,{tribeId:(o==null?void 0:o.tokenId)||"1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:131,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Dashboard.tsx",lineNumber:117,columnNumber:5},this)}const Ns={ETHEREUM_MAINNET:1,GOERLI:5,MONAD_DEVNET:20143,FUSE_EMBER:1264453517},io={tribes:"0x54812005171F747f5E69afA08989F41Cf06eeE48"};function lo(s){switch(console.log(`Getting contract addresses for chain ID: ${s}`),s){case Ns.ETHEREUM_MAINNET:return{tribes:"0x1234567890123456789012345678901234567890"};case Ns.GOERLI:return{tribes:"0x1234567890123456789012345678901234567890"};case Ns.MONAD_DEVNET:return{tribes:"0x16C4F870B59E55bB80A620547987Bd9302FC567d"};case Ns.FUSE_EMBER:return{tribes:"0x54812005171F747f5E69afA08989F41Cf06eeE48"};default:return console.warn(`Using fallback addresses for unsupported chain ID: ${s}`),io}}const uo=[{inputs:[{name:"postId",type:"uint256"}],name:"getPost",outputs:[{name:"id",type:"uint256"},{name:"creator",type:"address"},{name:"tribeId",type:"uint256"},{name:"type",type:"string"},{name:"content",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"tags",type:"string[]"},{name:"images",type:"string[]"},{name:"videos",type:"string[]"},{name:"timestamp",type:"uint256"},{name:"likes",type:"uint256"},{name:"comments",type:"uint256"},{name:"shares",type:"uint256"},{name:"views",type:"uint256"},{name:"engagement",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"tribeId",type:"uint256"}],name:"getPostsByTribe",outputs:[{components:[{name:"id",type:"uint256"},{name:"creator",type:"address"},{name:"tribeId",type:"uint256"},{name:"type",type:"string"},{name:"content",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"tags",type:"string[]"},{name:"images",type:"string[]"},{name:"videos",type:"string[]"},{name:"timestamp",type:"uint256"},{name:"likes",type:"uint256"},{name:"comments",type:"uint256"},{name:"shares",type:"uint256"},{name:"views",type:"uint256"},{name:"engagement",type:"uint256"}],name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{name:"userId",type:"address"}],name:"getUserPosts",outputs:[{components:[{name:"id",type:"uint256"},{name:"creator",type:"address"},{name:"tribeId",type:"uint256"},{name:"type",type:"string"},{name:"content",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"tags",type:"string[]"},{name:"images",type:"string[]"},{name:"videos",type:"string[]"},{name:"timestamp",type:"uint256"},{name:"likes",type:"uint256"},{name:"comments",type:"uint256"},{name:"shares",type:"uint256"},{name:"views",type:"uint256"},{name:"engagement",type:"uint256"}],name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{name:"tribeId",type:"uint256"},{name:"metadata",type:"string"}],name:"createPost",outputs:[{name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"postId",type:"uint256"},{name:"metadata",type:"string"}],name:"updatePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"postId",type:"uint256"}],name:"deletePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"postId",type:"uint256"}],name:"likePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"postId",type:"uint256"},{name:"content",type:"string"}],name:"commentPost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"postId",type:"uint256"}],name:"sharePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getLastPostId",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}];function co(){const s=ce(),{isConnected:n,address:t}=js(),{chainId:r}=Pe(),{getProfileByAddress:a}=Ze(),{showNotification:i}=ot(),[o,l]=p.useState(!1),[u,h]=p.useState(!0),[d,b]=p.useState(null),[f,m]=p.useState([]),[w,g]=p.useState(!1),[c,x]=p.useState(null),k=Se.getInstance(),v=async()=>{try{if(!n||!t){console.log("[Profile] Not connected or no address, redirecting to connect"),s("/connect");return}if(!r){console.log("[Profile] No chain ID, showing network error"),i("Please connect to a supported network","error");return}if(h(!0),x(null),console.log("🔍 Fetching profile from blockchain:",{address:t,chainId:r}),!a){console.error("[Profile] Profile service not available"),i("Profile service not available","error"),h(!1);return}const{profile:P,error:y}=await a(t);if((y==null?void 0:y.code)==="WRONG_CHAIN"){console.log("[Profile] Wrong chain detected"),i("Please connect to a supported network","error");return}if(P){console.log("[Profile] Profile found:",P);const T={avatar:"",bio:"",createdAt:Date.now()};let j;try{j=typeof P.metadata=="string"?JSON.parse(P.metadata):P.metadata||T}catch(D){console.warn("[Profile] Failed to parse metadata:",D),j=T}const I={tokenId:BigInt(P.tokenId),username:P.username,metadata:JSON.stringify(j),nftUri:j.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${P.username}`,owner:P.owner.toLowerCase()};console.log("[Profile] Setting profile data:",I),b(I),x(null);return}console.log("[Profile] No profile found, redirecting to setup"),s("/username-setup")}catch(P){console.error("[Profile] Error loading profile:",P),x(P instanceof Error?P.message:"Failed to load profile"),i("Failed to load profile","error")}finally{h(!1)}};p.useEffect(()=>{v()},[n,t,r]);const N=P=>P?`${P.slice(0,6)}...${P.slice(-4)}`:"";if(p.useEffect(()=>{async function P(){if(t){g(!0),x(null);try{console.log("Connecting to blockchain to fetch posts"),await he.connect();const y=r||1264453517;console.log("Using chain ID:",y);const T=lo(y),j=he.getSigner(),I=new hr(T.tribes,uo);console.log("Fetching posts for user",t);const D=await I.getUserPosts(t);if(D&&Array.isArray(D)&&D.length>0){console.log("Found posts:",D);const U=D.map(E=>{try{}catch(V){return console.error("Failed to map post:",V),null}}).filter(Boolean);console.log("Processed posts:",U),m(U)}else console.log("No posts found"),m([])}catch(y){console.error("Error fetching user posts:",y),x("Failed to fetch posts")}finally{g(!1)}}}P()},[t,r,k]),u)return e.jsxDEV("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-monad-purple"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:175,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:174,columnNumber:7},this);if(!d||!d.owner)return e.jsxDEV("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[e.jsxDEV("p",{className:"text-gray-400 mb-4",children:"No profile found"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:183,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>s("/username-setup"),className:"px-6 py-3 bg-theme-primary text-white rounded-lg font-medium hover:bg-theme-primary/90 transition-colors",children:"Create Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:184,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:182,columnNumber:7},this);const C=d.metadata?JSON.parse(d.metadata):{bio:""};return e.jsxDEV("div",{className:"max-w-6xl mx-auto px-4 pb-20",children:[e.jsxDEV("div",{className:"relative py-6 border-b border-white/10",children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-8 items-center",children:[e.jsxDEV("div",{className:"flex items-start space-x-4",children:[e.jsxDEV("img",{src:d.nftUri||`https://api.dicebear.com/7.x/avataaars/svg?seed=${d.username}`,alt:"Profile",className:"w-20 h-20 rounded-full border-4 border-[#4ADE80]/20"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:203,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col space-y-2",children:[e.jsxDEV("h1",{className:"text-xl font-bold text-white",children:["@",d.username]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:209,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("p",{className:"text-gray-400 text-sm",children:N(d.owner)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:211,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>{d.owner&&(navigator.clipboard.writeText(d.owner),i("Address copied!","success"))},className:"text-gray-400 hover:text-white transition-colors",children:e.jsxDEV(mr,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:221,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:212,columnNumber:17},this),e.jsxDEV("a",{href:`https://explorer-devnet.monadinfra.com/address/${d.owner}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors",children:e.jsxDEV(ns,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:229,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:223,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:210,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-200 text-sm",children:C.bio||"No bio yet"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:232,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:208,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:202,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center justify-center space-x-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(fr,{className:"w-5 h-5 text-[#4ADE80]"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:239,columnNumber:15},this),e.jsxDEV("span",{className:"text-lg font-bold text-white",children:"0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:240,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:238,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(pr,{className:"w-5 h-5 text-[#4ADE80]"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:243,columnNumber:15},this),e.jsxDEV("span",{className:"text-lg font-bold text-white",children:"0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:244,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:242,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Jt,{className:"w-5 h-5 text-yellow-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:247,columnNumber:15},this),e.jsxDEV("span",{className:"text-lg font-bold text-white",children:"0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:248,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:246,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:237,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#4ADE80] text-black rounded-lg hover:bg-[#4ADE80]/90 transition-colors",children:[e.jsxDEV(br,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:258,columnNumber:15},this),e.jsxDEV("span",{children:"Edit Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:259,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:254,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:253,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:200,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:199,columnNumber:7},this),e.jsxDEV("div",{className:"mt-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h2",{className:"text-lg font-bold text-white",children:"Your Collectibles"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:268,columnNumber:11},this),e.jsxDEV("button",{className:"text-[#4ADE80] hover:text-[#4ADE80]/80 transition-colors text-sm",children:"View All"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:269,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:267,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:e.jsxDEV("div",{className:"aspect-square bg-white/5 backdrop-blur-xl rounded-lg border border-white/10 flex items-center justify-center",children:e.jsxDEV("p",{className:"text-gray-400 text-sm",children:"No collectibles"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:276,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:275,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:273,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:266,columnNumber:7},this),e.jsxDEV("div",{className:"mt-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h2",{className:"text-lg font-bold text-white",children:"Recent Activity"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:284,columnNumber:11},this),e.jsxDEV("button",{className:"text-[#4ADE80] hover:text-[#4ADE80]/80 transition-colors text-sm",children:"View All"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:285,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:283,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.jsxDEV("div",{className:"bg-white/5 backdrop-blur-xl rounded-lg p-3 border border-white/10",children:e.jsxDEV("p",{className:"text-gray-400 text-sm text-center",children:"No recent activity"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:292,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:291,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:289,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:282,columnNumber:7},this),e.jsxDEV("div",{className:"mt-8",children:[e.jsxDEV("h2",{className:"text-2xl font-bold mb-4",children:"Your Posts"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:299,columnNumber:9},this),w&&e.jsxDEV("p",{children:"Loading posts..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:301,columnNumber:21},this),c&&e.jsxDEV("p",{className:"text-red-500",children:c},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:302,columnNumber:19},this),f.length===0&&!w&&!c&&e.jsxDEV("p",{className:"text-gray-500",children:"No posts found. Create your first post!"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:305,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-4",children:f.map(P=>e.jsxDEV("div",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsxDEV("p",{className:"text-lg",children:P.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:311,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-gray-400 mt-2",children:["Posted on ",new Date(P.createdAt).toLocaleDateString()]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:312,columnNumber:15},this)]},P.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:310,columnNumber:13},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:308,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:298,columnNumber:7},this),o&&e.jsxDEV("div",{className:"fixed inset-y-0 right-0 w-full max-w-md bg-gray-900 shadow-xl transform transition-transform duration-300 ease-in-out z-50",children:e.jsxDEV("div",{className:"h-full overflow-y-auto p-6",children:[e.jsxDEV("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsxDEV("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:329,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:328,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:324,columnNumber:13},this),e.jsxDEV(dn,{mode:"edit",existingProfile:d,onSuccess:()=>{l(!1),v()},onCancel:()=>l(!1)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:332,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:323,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:322,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Profile.tsx",lineNumber:197,columnNumber:5},this)}function mo({tribe:s,showJoinButton:n=!0}){const t=ce(),{joinTribe:r,requestToJoinTribe:a}=Cs(),[i,o]=p.useState(!1),[l,u]=p.useState(null),[h,d]=p.useState(""),[b,f]=p.useState(""),[m,w]=p.useState(!1),[g,c]=p.useState(!1);p.useEffect(()=>{if(s){console.log("TribeCardEnhanced processing tribe:",{id:s.id,name:s.name,metadata:typeof s.metadata=="string"?s.metadata.length>100?`${s.metadata.substring(0,100)}...`:s.metadata:"Not a string",memberCount:s.memberCount});try{const E=nt(s);d(E),w(!1);const V=on(s);f(V),c(!1)}catch(E){console.error("Error loading tribe media:",E)}}},[s]);const x=async E=>{if(E.stopPropagation(),!i){o(!0),u(null);try{if(Js(s)==="public")await r(Number(s.id));else{const F=s.entryFee||BigInt(0);await a(Number(s.id),F)}}catch(V){console.error("Failed to join tribe:",V),u(V instanceof Error?V.message:"Failed to join tribe")}finally{o(!1)}}},v=(()=>{const E=s.memberCount||0,F=E>0?0/E:0;return F>.3?"high":F>.1?"medium":"low"})(),N={low:"text-gray-400",medium:"text-yellow-500",high:"text-green-500"},{isMember:C,isPending:P,isAdmin:y}=Pa(s),T=Js(s),j=an(s),I=rt(s),D=()=>{console.warn(`Avatar load failed for tribe ${s.id}`),w(!0),d("/images/default-avatar.png")},U=()=>{console.warn(`Cover image load failed for tribe ${s.id}`),c(!0),f("/images/default-cover.png")};return e.jsxDEV(We,{className:"overflow-hidden hover:border-theme-primary/30 transition-colors cursor-pointer h-full flex flex-col",onClick:()=>t(`/tribes/${s.id}`),children:[b&&!g&&e.jsxDEV("div",{className:"h-28 relative",children:[e.jsxDEV("img",{src:b,alt:`${s.name} banner`,className:"w-full h-full object-cover",onError:U},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:143,columnNumber:11},this),T==="private"&&e.jsxDEV("div",{className:"absolute top-2 right-2 bg-black/60 text-white px-2 py-1 rounded-full text-xs flex items-center",children:[e.jsxDEV(qe,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:153,columnNumber:15},this),"Private"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:152,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:142,columnNumber:9},this),e.jsxDEV(Ge,{className:"flex-1 flex flex-col px-4 py-3",children:[e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV("div",{className:"relative -mt-6 mr-3",children:[e.jsxDEV("img",{src:h,alt:s.name,className:"w-14 h-14 rounded-xl ring-2 ring-theme-bg shadow-lg bg-theme-bg",onError:D},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:164,columnNumber:13},this),C&&e.jsxDEV("div",{className:"absolute -bottom-1 -right-1 bg-green-500 text-white p-1 rounded-full",children:e.jsxDEV(wr,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:174,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:173,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:163,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1 mt-1",children:[e.jsxDEV("h3",{className:"font-bold text-lg text-white leading-tight flex items-center",children:s.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:180,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center space-x-3 mt-1 text-xs text-gray-400",children:[e.jsxDEV("div",{className:"flex items-center space-x-1",children:[T==="public"?e.jsxDEV(Je,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:188,columnNumber:19},this):e.jsxDEV(qe,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:190,columnNumber:19},this),e.jsxDEV("span",{children:T==="public"?"Public":"Private"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:192,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:186,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Ee,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:195,columnNumber:17},this),e.jsxDEV("span",{children:s.memberCount.toLocaleString()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:196,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:194,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(xr,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:199,columnNumber:17},this),e.jsxDEV("span",{children:"0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:200,columnNumber:17},this)," "]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:198,columnNumber:15},this),e.jsxDEV("div",{className:`flex items-center space-x-1 ${N[v]}`,children:[e.jsxDEV(Nr,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("span",{className:"capitalize",children:v},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:202,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:185,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:179,columnNumber:11},this),n&&!C&&!P&&!y&&e.jsxDEV("button",{onClick:x,disabled:i,className:`
                flex items-center rounded-lg px-3 py-1.5 text-sm font-medium 
                ${i?"bg-gray-700 text-gray-400":"bg-theme-primary text-black hover:bg-theme-primary/90"}
                transition-colors
              `,children:i?e.jsxDEV("span",{children:"Joining..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:221,columnNumber:17},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(we,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:224,columnNumber:19},this),e.jsxDEV("span",{children:"Join"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:225,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:223,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:211,columnNumber:13},this),P&&e.jsxDEV(Q,{variant:"outline",className:"border-yellow-500 text-yellow-500 ml-auto",children:"Pending"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:233,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:162,columnNumber:9},this),e.jsxDEV("p",{className:"mt-3 text-gray-300 line-clamp-2 text-sm",children:j},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:239,columnNumber:9},this),e.jsxDEV("div",{className:"mt-4 flex flex-wrap gap-2",children:I.length>0?e.jsxDEV(e.Fragment,{children:[I.slice(0,3).map(E=>e.jsxDEV(Q,{variant:"secondary",className:"bg-gray-800/80 text-gray-300 text-xs",children:E.name},E.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:245,columnNumber:17},this)),I.length>3&&e.jsxDEV(Q,{variant:"secondary",className:"bg-gray-800/80 text-gray-300 text-xs",children:["+",I.length-3," more"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:254,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:243,columnNumber:13},this):e.jsxDEV(Q,{variant:"secondary",className:"bg-gray-800/80 text-gray-300 text-xs",children:"No topics"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:263,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:241,columnNumber:9},this),l&&e.jsxDEV("div",{className:"mt-3 text-red-500 text-xs",children:l},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:274,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:160,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeCardEnhanced.tsx",lineNumber:136,columnNumber:5},this)}function fo(s){return{id:s.id,name:s.name,metadata:s.metadata,owner:s.owner,admins:s.admins,memberCount:s.memberCount,createdAt:s.createdAt,joinType:s.joinType,entryFee:s.entryFee.toString(),nftRequirements:s.nftRequirements,privacy:"public",onlineCount:0,postCount:0,description:"",topics:[],userMembershipStatus:{isMember:!1,isPending:!1,isAdmin:!1}}}function po(){const{tribes:s,isLoading:n,error:t,refreshTribes:r}=Is();if(p.useEffect(()=>{console.log("TribeList - Tribes data:",{tribes:s,loading:n,error:t,tribesLength:s==null?void 0:s.length,tribesEmpty:!(s!=null&&s.length)}),!(s!=null&&s.length)&&!n&&!t&&(console.log("TribeList - No tribes found, triggering refresh"),r().catch(i=>{console.error("Failed to refresh tribes:",i)}))},[s,n,t,r]),n)return e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((i,o)=>e.jsxDEV("div",{className:"animate-pulse bg-gray-800/30 rounded-xl h-48"},o,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:85,columnNumber:11},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:83,columnNumber:7},this);if(t)return console.error("TribeList - Error loading tribes:",t),e.jsxDEV("div",{className:"text-center text-gray-400 py-8",children:["Failed to load tribes. Please try again later.",e.jsxDEV("pre",{className:"mt-2 text-xs text-left bg-gray-800/30 p-2 rounded overflow-auto",children:typeof t=="string"?t:JSON.stringify(t,null,2)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:96,columnNumber:9},this),e.jsxDEV("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>r(),children:"Retry"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:99,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:94,columnNumber:7},this);if(!(s!=null&&s.length))return e.jsxDEV("div",{className:"text-center text-gray-400 py-8",children:["No tribes found on this network.",e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>r(),children:"Refresh"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:114,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:113,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:111,columnNumber:7},this);console.log("TribeList - Rendering tribes:",s.map(i=>({id:i.id,name:i.name})));const a=s.map(fo);return e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(i=>e.jsxDEV(mo,{tribe:i},i.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:133,columnNumber:9},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/tribes/TribeList.tsx",lineNumber:131,columnNumber:5},this)}function bo(){const s=ce();Cs();const[n,t]=p.useState(""),[r,a]=p.useState("all"),i=()=>{s("/tribes/create")};return e.jsxDEV("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxDEV("div",{className:"relative mb-10 rounded-2xl overflow-hidden",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/90 to-purple-900/90 z-0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:22,columnNumber:9},this),e.jsxDEV("div",{className:"absolute inset-0 bg-[url('/images/tribes-pattern.svg')] opacity-10 z-0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:23,columnNumber:9},this),e.jsxDEV("div",{className:"relative z-10 px-6 py-12 md:py-16 md:px-10",children:[e.jsxDEV("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:"Discover Tribes"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:26,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-300 text-lg max-w-2xl mb-6",children:"Join communities of like-minded individuals, share ideas, and collaborate on projects that matter to you."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:27,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxDEV("div",{className:"relative flex-1 max-w-xl",children:[e.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsxDEV(yr,{className:"h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:34,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:33,columnNumber:15},this),e.jsxDEV("input",{type:"text",placeholder:"Search tribes by name or description...",className:"block w-full pl-10 pr-3 py-2.5 bg-gray-900/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:n,onChange:o=>t(o.target.value)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:36,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:32,columnNumber:13},this),e.jsxDEV("button",{onClick:i,className:"flex items-center justify-center space-x-2 px-5 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsxDEV(we,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:49,columnNumber:15},this),e.jsxDEV("span",{children:"Create Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:50,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:45,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:31,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:25,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:21,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center justify-between mb-8",children:[e.jsxDEV("div",{className:"flex items-center space-x-2 overflow-x-auto scrollbar-hide",children:[e.jsxDEV("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="all"?"bg-blue-600 text-white":"bg-gray-800/30 text-gray-300 hover:bg-gray-800/50"}`,children:"All Tribes"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:59,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>a("popular"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2 ${r==="popular"?"bg-blue-600 text-white":"bg-gray-800/30 text-gray-300 hover:bg-gray-800/50"}`,children:[e.jsxDEV(gr,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:77,columnNumber:13},this),e.jsxDEV("span",{children:"Popular"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:78,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:69,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>a("new"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="new"?"bg-blue-600 text-white":"bg-gray-800/30 text-gray-300 hover:bg-gray-800/50"}`,children:"Newest"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:80,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>a("joined"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2 ${r==="joined"?"bg-blue-600 text-white":"bg-gray-800/30 text-gray-300 hover:bg-gray-800/50"}`,children:[e.jsxDEV(Ee,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:98,columnNumber:13},this),e.jsxDEV("span",{children:"Joined"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:99,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:90,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:58,columnNumber:9},this),e.jsxDEV("button",{className:"p-2 bg-gray-800/30 border border-gray-700/50 rounded-lg text-gray-400 hover:text-white hover:bg-gray-700/50 transition-colors",children:e.jsxDEV(Ht,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:104,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:103,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:57,columnNumber:7},this),e.jsxDEV(po,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:109,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Tribes.tsx",lineNumber:19,columnNumber:5},this)}const pn=20143,bn=1264453517,ho=s=>{switch(s){case pn:return"Monad";case bn:return"Fuse";default:return"Unknown"}},Ae=s=>{switch(s){case pn:return"var(--monad-green)";case bn:return"var(--fuse-gold)";default:return"#6B7280"}};function Ke({item:s,children:n,className:t="",onClick:r}){const a=Ae(s.chainId),i=ho(s.chainId);return e.jsxDEV(We,{variant:"enhanced",className:`cursor-pointer hover:translate-y-[-2px] transition-transform ${t}`,onClick:r,children:e.jsxDEV(Ge,{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[s.creator.avatar&&e.jsxDEV("img",{src:s.creator.avatar,alt:s.creator.username||s.creator.address,className:"w-10 h-10 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/FeedCard.tsx",lineNumber:28,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{className:"font-medium",children:s.creator.username||s.creator.address},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/FeedCard.tsx",lineNumber:36,columnNumber:17},this),e.jsxDEV(Q,{style:{backgroundColor:`${a}20`,color:a},className:"text-xs",children:i},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/FeedCard.tsx",lineNumber:39,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/FeedCard.tsx",lineNumber:35,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/FeedCard.tsx",lineNumber:46,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/FeedCard.tsx",lineNumber:34,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/FeedCard.tsx",lineNumber:26,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/FeedCard.tsx",lineNumber:25,columnNumber:9},this),n]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/FeedCard.tsx",lineNumber:23,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/FeedCard.tsx",lineNumber:18,columnNumber:5},this)}const wo=s=>{const n=Date.now(),t=s-n;if(t<=0)return"Ended";const r=Math.floor(t/(1e3*60*60*24)),a=Math.floor(t%(1e3*60*60*24)/(1e3*60*60));if(r>0)return`${r}d ${a}h left`;const i=Math.floor(t%(1e3*60*60)/(1e3*60));return a>0?`${a}h ${i}m left`:`${i}m left`},jt={active:{bg:"bg-success-main/20",text:"text-success-main"},passed:{bg:"bg-blue-500/20",text:"text-blue-500"},failed:{bg:"bg-destructive/20",text:"text-destructive"}};function xo({item:s,onClick:n}){const t=Ae(s.chainId),a=Date.now()<s.endTime,i=s.votesFor+s.votesAgainst,o=i>0?s.votesFor/i*100:0,l=i>0?s.votesAgainst/i*100:0,u=s.minVotes?i/s.minVotes*100:0;return e.jsxDEV(Ke,{item:s,onClick:n,children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:s.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:59,columnNumber:13},this),e.jsxDEV(Q,{className:`${jt[s.status].bg} ${jt[s.status].text}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:60,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:58,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:s.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:66,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:57,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsxDEV("span",{children:"For"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:73,columnNumber:15},this),e.jsxDEV("span",{children:[o.toFixed(1),"%"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:74,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:72,columnNumber:13},this),e.jsxDEV("div",{className:"h-2 rounded-full bg-muted overflow-hidden",children:e.jsxDEV("div",{className:"h-full rounded-full bg-success-main transition-all duration-500",style:{width:`${o}%`}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:77,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:76,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[s.votesFor.toLocaleString()," votes"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:82,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:71,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsxDEV("span",{children:"Against"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:89,columnNumber:15},this),e.jsxDEV("span",{children:[l.toFixed(1),"%"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:90,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:88,columnNumber:13},this),e.jsxDEV("div",{className:"h-2 rounded-full bg-muted overflow-hidden",children:e.jsxDEV("div",{className:"h-full rounded-full bg-destructive transition-all duration-500",style:{width:`${l}%`}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:93,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:92,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[s.votesAgainst.toLocaleString()," votes"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:98,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:87,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:70,columnNumber:9},this),s.minVotes&&e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsxDEV("span",{children:"Quorum"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:108,columnNumber:15},this),e.jsxDEV("span",{children:[u.toFixed(1),"%"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:109,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:107,columnNumber:13},this),e.jsxDEV("div",{className:"h-1.5 rounded-full bg-muted overflow-hidden",children:e.jsxDEV("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${Math.min(u,100)}%`,backgroundColor:t}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:112,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:111,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[i.toLocaleString()," of ",s.minVotes.toLocaleString()," votes needed"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:120,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:106,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center text-sm text-muted-foreground",children:e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(is,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:129,columnNumber:13},this),e.jsxDEV("span",{children:wo(s.endTime)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:130,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:128,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:127,columnNumber:9},this),a&&e.jsxDEV("div",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full",style:{backgroundColor:`${t}20`,color:t},children:"Vote Now"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:136,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:56,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProposalFeedItem.tsx",lineNumber:55,columnNumber:5},this)}const No=s=>{const n=Date.now(),t=s-n;if(t<=0)return"Ended";const r=Math.floor(t/(1e3*60*60*24)),a=Math.floor(t%(1e3*60*60*24)/(1e3*60*60));if(r>0)return`${r}d ${a}h left`;const i=Math.floor(t%(1e3*60*60)/(1e3*60));return a>0?`${a}h ${i}m left`:`${i}m left`},Ct={easy:{bg:"bg-green-500/20",text:"text-green-500"},medium:{bg:"bg-yellow-500/20",text:"text-yellow-500"},hard:{bg:"bg-red-500/20",text:"text-red-500"}},Vt={open:{bg:"bg-success-main/20",text:"text-success-main"},"in-progress":{bg:"bg-blue-500/20",text:"text-blue-500"},completed:{bg:"bg-muted",text:"text-muted-foreground"}};function yo({item:s,onClick:n}){const t=Ae(s.chainId),r=Date.now(),a=s.deadline?r<s.deadline:!1;return e.jsxDEV(Ke,{item:s,onClick:n,children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:s.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:70,columnNumber:13},this),e.jsxDEV(Q,{className:"text-xs",style:{backgroundColor:`${t}20`,color:t},children:"Bounty"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:71,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:69,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:s.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:81,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:68,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-wrap gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Reward"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:87,columnNumber:13},this),e.jsxDEV("p",{className:"font-medium",children:[s.reward.amount," ",s.reward.token]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:88,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:86,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Difficulty"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:93,columnNumber:13},this),e.jsxDEV(Q,{className:`${Ct[s.difficulty].bg} ${Ct[s.difficulty].text}`,children:s.difficulty},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:92,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Status"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:101,columnNumber:13},this),e.jsxDEV(Q,{className:`${Vt[s.status].bg} ${Vt[s.status].text}`,children:s.status==="in-progress"?"In Progress":s.status},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:102,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:100,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:85,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center text-sm text-muted-foreground",children:e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(is,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:113,columnNumber:13},this),e.jsxDEV("span",{children:s.deadline?No(s.deadline):"No deadline"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:114,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:112,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:111,columnNumber:9},this),a&&s.status==="open"&&e.jsxDEV("div",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full",style:{backgroundColor:`${t}20`,color:t},children:"Submit Solution"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:120,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:67,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/BountyFeedItem.tsx",lineNumber:66,columnNumber:5},this)}const go=(s,n)=>{const t=new Date(s),r=new Date(n),a=t.toDateString()===r.toDateString(),i={month:"short",day:"numeric"},o={hour:"numeric",minute:"2-digit"};return a?`${t.toLocaleDateString(void 0,i)} · ${t.toLocaleTimeString(void 0,o)} - ${r.toLocaleTimeString(void 0,o)}`:`${t.toLocaleDateString(void 0,i)} - ${r.toLocaleDateString(void 0,i)}`};function Do({item:s,onClick:n}){const t=Ae(s.chainId),r=Date.now(),a=r<s.startTime,i=r>=s.startTime&&r<=s.endTime,o=r>s.endTime,l=()=>i?e.jsxDEV(Q,{className:"bg-success-main/20 text-success-main",children:"Live Now"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:37,columnNumber:14},this):o?e.jsxDEV(Q,{className:"bg-muted text-muted-foreground",children:"Ended"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:40,columnNumber:14},this):s.maxAttendees&&s.attendees>=s.maxAttendees?e.jsxDEV(Q,{className:"bg-destructive/20 text-destructive",children:"Sold Out"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:43,columnNumber:14},this):e.jsxDEV(Q,{className:"bg-blue-500/20 text-blue-500",children:"Upcoming"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:45,columnNumber:12},this);return e.jsxDEV(Ke,{item:s,onClick:n,children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:s.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:53,columnNumber:13},this),l()]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:52,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:s.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:56,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:51,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col space-y-3",children:[e.jsxDEV("div",{className:"flex items-center text-sm space-x-2",children:[e.jsxDEV(Es,{className:"w-4 h-4",style:{color:t}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:62,columnNumber:13},this),e.jsxDEV("span",{children:go(s.startTime,s.endTime)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:63,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:61,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center text-sm space-x-2",children:[s.virtual?e.jsxDEV(Dr,{className:"w-4 h-4",style:{color:t}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:68,columnNumber:15},this):e.jsxDEV(Bt,{className:"w-4 h-4",style:{color:t}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:70,columnNumber:15},this),e.jsxDEV("span",{children:s.virtual?"Virtual Event":s.location||"Location TBA"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:72,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:66,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center text-sm space-x-2",children:[e.jsxDEV(Ee,{className:"w-4 h-4",style:{color:t}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:76,columnNumber:13},this),e.jsxDEV("span",{children:[s.attendees.toLocaleString()," attending",s.maxAttendees&&` · ${s.maxAttendees-s.attendees} spots left`]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:77,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:75,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:60,columnNumber:9},this),a&&(!s.maxAttendees||s.attendees<s.maxAttendees)&&e.jsxDEV("div",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full mt-2",style:{backgroundColor:`${t}20`,color:t},children:"Register Now"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:86,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:50,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/EventFeedItem.tsx",lineNumber:49,columnNumber:5},this)}function Eo({item:s,onClick:n}){const t=Ae(s.chainId);return e.jsxDEV(Ke,{item:s,onClick:n,children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:s.collection},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:21,columnNumber:13},this),e.jsxDEV(Q,{className:"text-xs",style:{backgroundColor:`${t}20`,color:t},children:"NFT"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:22,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:20,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:s.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:32,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:19,columnNumber:9},this),e.jsxDEV("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:s.image?e.jsxDEV("img",{src:s.image,alt:s.collection,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:38,columnNumber:13},this):e.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxDEV(ts,{className:"w-12 h-12 text-muted-foreground/50"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:45,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:44,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:36,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center",children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Price"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:53,columnNumber:13},this),e.jsxDEV("p",{className:"font-medium",children:s.price?`${s.price.amount} ${s.price.token}`:"Not listed"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:54,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:52,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:51,columnNumber:9},this),e.jsxDEV("div",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full",style:{backgroundColor:`${t}20`,color:t},children:"View Collection"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:61,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:18,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/NFTFeedItem.tsx",lineNumber:17,columnNumber:5},this)}function vo({item:s,onClick:n}){const t=Ae(s.chainId);return e.jsxDEV(Ke,{item:s,onClick:n,children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:s.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:21,columnNumber:13},this),e.jsxDEV(Q,{className:"text-xs",style:{backgroundColor:`${t}20`,color:t},children:"Project"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:22,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:20,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:s.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:32,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:19,columnNumber:9},this),s.tags&&s.tags.length>0&&e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:s.tags.map((r,a)=>e.jsxDEV(Q,{className:"bg-muted text-muted-foreground text-xs",children:r},a,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:39,columnNumber:15},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:37,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[s.repository&&e.jsxDEV("a",{href:s.repository,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-sm hover:underline",style:{color:t},children:[e.jsxDEV(Gt,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:59,columnNumber:15},this),e.jsxDEV("span",{children:"View Repository"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:60,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:52,columnNumber:13},this),s.website&&e.jsxDEV("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-sm hover:underline",style:{color:t},children:[e.jsxDEV(Je,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:71,columnNumber:15},this),e.jsxDEV("span",{children:"Visit Website"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:72,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:64,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:50,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:18,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/ProjectFeedItem.tsx",lineNumber:17,columnNumber:5},this)}const ko=s=>{const n=new Date(s),t={month:"short",day:"numeric"},r={hour:"numeric",minute:"2-digit"};return`${n.toLocaleDateString(void 0,t)} · ${n.toLocaleTimeString(void 0,r)}`};function To({item:s,onClick:n}){var o;const t=Ae(s.chainId),r=Date.now(),a=r>=s.startTime&&s.endTime?r<=s.endTime:!1,i=r<s.startTime;return e.jsxDEV(Ke,{item:s,onClick:n,children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:s.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:32,columnNumber:13},this),a?e.jsxDEV(Q,{className:"bg-success-main/20 text-success-main",children:"Live Now"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:34,columnNumber:15},this):e.jsxDEV(Q,{className:"text-xs",style:{backgroundColor:`${t}20`,color:t},children:"Upcoming"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:36,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:31,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:s.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:47,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:30,columnNumber:9},this),s.thumbnail&&e.jsxDEV("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-muted",children:[e.jsxDEV("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:53,columnNumber:13},this),a&&e.jsxDEV("div",{className:"absolute top-2 left-2",children:e.jsxDEV(Q,{className:"bg-destructive text-destructive-foreground",children:"LIVE"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:60,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:59,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:52,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col space-y-2",children:[e.jsxDEV("div",{className:"flex items-center text-sm space-x-2",children:[e.jsxDEV(Es,{className:"w-4 h-4",style:{color:t}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:69,columnNumber:13},this),e.jsxDEV("span",{children:ko(s.startTime)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:70,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:68,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center text-sm space-x-2",children:[e.jsxDEV(Ee,{className:"w-4 h-4",style:{color:t}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:74,columnNumber:13},this),e.jsxDEV("span",{children:[((o=s.viewers)==null?void 0:o.toLocaleString())??"0"," ",a?"watching":"interested"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:75,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:73,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:67,columnNumber:9},this),i&&e.jsxDEV("div",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full",style:{backgroundColor:`${t}20`,color:t},children:"Set Reminder"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:83,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:29,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/LivestreamFeedItem.tsx",lineNumber:28,columnNumber:5},this)}const Uo=s=>{const n=Date.now(),t=s-n;if(t<=0)return"Ended";const r=Math.floor(t/(1e3*60*60*24)),a=Math.floor(t%(1e3*60*60*24)/(1e3*60*60));if(r>0)return`${r}d ${a}h left`;const i=Math.floor(t%(1e3*60*60)/(1e3*60));return a>0?`${a}h ${i}m left`:`${i}m left`};function Po({item:s,onClick:n}){const t=Ae(s.chainId),a=Date.now()<s.endTime,i=s.options.reduce((o,l)=>o+l.votes,0);return e.jsxDEV(Ke,{item:s,onClick:n,children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:e.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:s.question},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:41,columnNumber:13},this),e.jsxDEV(Q,{className:"text-xs",style:{backgroundColor:`${t}20`,color:t},children:"Poll"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:42,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:40,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:39,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-2",children:s.options.map((o,l)=>{const u=i>0?o.votes/i*100:0;return e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:[e.jsxDEV("span",{children:o.text},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:62,columnNumber:19},this),e.jsxDEV("span",{children:[u.toFixed(1),"%"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:63,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:61,columnNumber:17},this),e.jsxDEV("div",{className:"h-2 rounded-full bg-muted overflow-hidden",children:e.jsxDEV("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${u}%`,backgroundColor:t}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:66,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:65,columnNumber:17},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:[o.votes.toLocaleString()," votes"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:74,columnNumber:17},this)]},l,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:60,columnNumber:15},this)})},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:55,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(is,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:85,columnNumber:13},this),e.jsxDEV("span",{children:Uo(s.endTime)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:86,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:84,columnNumber:11},this),e.jsxDEV("span",{children:[i.toLocaleString()," total votes"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:83,columnNumber:9},this),a&&e.jsxDEV("div",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-full",style:{backgroundColor:`${t}20`,color:t},children:"Vote Now"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:93,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:38,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PollFeedItem.tsx",lineNumber:37,columnNumber:5},this)}function jo({post:s,onClick:n}){var o,l,u,h,d,b,f;const t=m=>{m.stopPropagation()},r=m=>{m.stopPropagation()},a=m=>{m.stopPropagation()},i=m=>{m.stopPropagation()};return e.jsxDEV("div",{onClick:n,className:"bg-card hover:bg-card/90 transition-colors p-4 rounded-xl cursor-pointer",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-accent/10"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:39,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:typeof s.author=="object"?s.author.username||s.author.id||"Unknown":s.author||s.creator||"Unknown"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:41,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:Fe(new Date(s.createdAt||s.timestamp||Date.now()),{addSuffix:!0})},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:46,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:40,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:38,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-3",children:[((o=s.metadata)==null?void 0:o.title)&&e.jsxDEV("h3",{className:"text-lg font-medium",children:s.metadata.title},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:55,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:s.content},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:57,columnNumber:9},this),((l=s.metadata)==null?void 0:l.mediaContent)&&s.metadata.mediaContent.length>0&&e.jsxDEV("div",{className:"grid grid-cols-2 gap-2 mt-3",children:s.metadata.mediaContent.map((m,w)=>e.jsxDEV("div",{className:"relative aspect-square rounded-lg overflow-hidden",children:m.type==="image"?e.jsxDEV("img",{src:m.url,alt:m.name||"Media content",className:"w-full h-full object-cover"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:65,columnNumber:19},this):e.jsxDEV("div",{className:"w-full h-full flex items-center justify-center bg-accent/10",children:"Unsupported Media"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:71,columnNumber:19},this)},w,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:63,columnNumber:15},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:61,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:53,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center space-x-4 mt-4",children:[e.jsxDEV("button",{onClick:t,className:"flex items-center space-x-1 text-muted-foreground hover:text-primary transition-colors",children:[e.jsxDEV(He,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:87,columnNumber:11},this),e.jsxDEV("span",{children:((u=s.stats)==null?void 0:u.likeCount)||s.likes||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:83,columnNumber:9},this),e.jsxDEV("button",{onClick:r,className:"flex items-center space-x-1 text-muted-foreground hover:text-primary transition-colors",children:[e.jsxDEV(Xe,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:95,columnNumber:11},this),e.jsxDEV("span",{children:((h=s.stats)==null?void 0:h.commentCount)||s.comments||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:96,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:91,columnNumber:9},this),e.jsxDEV("button",{onClick:a,className:"flex items-center space-x-1 text-muted-foreground hover:text-primary transition-colors",children:[e.jsxDEV(Ye,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:103,columnNumber:11},this),e.jsxDEV("span",{children:((d=s.stats)==null?void 0:d.shareCount)||s.shares||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:104,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:99,columnNumber:9},this),e.jsxDEV("button",{onClick:i,className:"flex items-center space-x-1 text-muted-foreground hover:text-primary transition-colors",children:[e.jsxDEV(Er,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:111,columnNumber:11},this),e.jsxDEV("span",{children:((b=s.stats)==null?void 0:b.saveCount)||((f=s.stats)==null?void 0:f.engagement)||0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:112,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:107,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:82,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/PostFeedItem.tsx",lineNumber:33,columnNumber:5},this)}function Co({items:s,onItemClick:n}){const t=r=>{const a=()=>n==null?void 0:n(r);if("content"in r&&"metadata"in r)return e.jsxDEV(jo,{post:r,onClick:a},r.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/Feed.tsx",lineNumber:23,columnNumber:14},this);switch(r.type){case"proposal":return e.jsxDEV(xo,{item:r,onClick:a},r.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/Feed.tsx",lineNumber:29,columnNumber:16},this);case"bounty":return e.jsxDEV(yo,{item:r,onClick:a},r.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/Feed.tsx",lineNumber:31,columnNumber:16},this);case"event":return e.jsxDEV(Do,{item:r,onClick:a},r.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/Feed.tsx",lineNumber:33,columnNumber:16},this);case"nft":return e.jsxDEV(Eo,{item:r,onClick:a},r.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/Feed.tsx",lineNumber:35,columnNumber:16},this);case"project":return e.jsxDEV(vo,{item:r,onClick:a},r.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/Feed.tsx",lineNumber:37,columnNumber:16},this);case"livestream":return e.jsxDEV(To,{item:r,onClick:a},r.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/Feed.tsx",lineNumber:39,columnNumber:16},this);case"poll":return e.jsxDEV(Po,{item:r,onClick:a},r.id,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/Feed.tsx",lineNumber:41,columnNumber:16},this);default:return null}};return e.jsxDEV("div",{className:"space-y-4",children:s.map(t)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/feed/Feed.tsx",lineNumber:48,columnNumber:5},this)}function Vo({members:s=[],topics:n=[],onTopicSelect:t,selectedTopicId:r}){const a=Array.isArray(s)?s:[],i=Array.isArray(n)?n:[];return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(We,{children:e.jsxDEV(Ge,{className:"p-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[e.jsxDEV(vr,{className:"w-4 h-4 text-green-500"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:29,columnNumber:13},this),"Top Members"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:28,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:a.slice(0,5).map(o=>e.jsxDEV(Xt,{to:`/profile/${o.username}`,className:"flex items-center space-x-3 group p-2 hover:bg-green-100/20 rounded-lg transition-colors",children:[e.jsxDEV("div",{className:"relative flex-shrink-0",children:[e.jsxDEV("img",{src:o.avatar,alt:o.username,className:"w-10 h-10 rounded-full object-cover"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:40,columnNumber:19},this),o.role==="admin"&&e.jsxDEV(kr,{className:"w-3.5 h-3.5 text-green-500 absolute -right-0.5 -bottom-0.5 bg-black rounded-full p-0.5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:46,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:39,columnNumber:17},this),e.jsxDEV("div",{className:"flex-grow min-w-0 pr-1",children:[e.jsxDEV("p",{className:"font-medium text-sm group-hover:text-green-500 truncate max-w-full",children:["@",o.username]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:50,columnNumber:19},this),o.role&&e.jsxDEV("p",{className:"text-xs text-gray-400 truncate max-w-full",children:o.role==="admin"?"Admin":o.role},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:54,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:49,columnNumber:17},this)]},o.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:34,columnNumber:15},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:32,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:27,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:26,columnNumber:7},this),e.jsxDEV(We,{children:e.jsxDEV(Ge,{className:"p-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[e.jsxDEV(Ds,{className:"w-4 h-4 text-green-500"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:69,columnNumber:13},this),"Topics"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:68,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:i.map(o=>e.jsxDEV("button",{onClick:()=>t==null?void 0:t(o),className:`w-full flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${r===o.id?"bg-green-500 text-white":"hover:bg-green-100/20 text-gray-400 hover:text-white"}`,children:[e.jsxDEV(Ds,{className:"w-4 h-4 flex-shrink-0"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:83,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm truncate text-left",children:o.name},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:84,columnNumber:17},this),o.postCount&&e.jsxDEV("span",{className:`text-xs ml-auto flex-shrink-0 px-1.5 py-0.5 rounded-full ${r===o.id?"bg-green-600 text-white":"bg-green-200/10 text-gray-400"}`,children:o.postCount},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:86,columnNumber:19},this)]},o.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:74,columnNumber:15},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:72,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:67,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:66,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/sidebars/TribeSidebar.tsx",lineNumber:24,columnNumber:5},this)}function Io({isOpen:s,onClose:n,tribeId:t}){return e.jsxDEV(tn,{mode:"dialog",isOpen:s,onClose:n,tribeId:t||""},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/CreatePost.tsx",lineNumber:15,columnNumber:5},this)}function So(){const[s,n]=p.useState([]),[t,r]=p.useState({}),[a,i]=p.useState({}),[o,l]=p.useState(!1),[u,h]=p.useState(null),[d,b]=p.useState({isSyncing:!1,progress:0,total:0,lastSyncTime:0,errorCount:0}),f=p.useRef(null);p.useEffect(()=>{console.log("Initializing posts service"),f.current||(f.current=Pt());const k=f.current;if(!k)return console.error("Failed to initialize posts service"),()=>{};const v=k.addSyncListener(function(){const C=k.getSyncStatus()||{isSyncing:!1,progress:0,total:0,lastSyncTime:0,errorCount:0};b(C)});return b(k.getSyncStatus()),()=>{v()}},[]);const m=p.useCallback(()=>(f.current||(f.current=Pt()),f.current),[]),w=p.useCallback(async k=>{try{if(!k)return console.warn("getPostById called with invalid postId"),null;const v=m();if(!v)throw new Error("Posts service not initialized");const N=await v.getPost(k);return N?(r(C=>({...C,[k]:N})),N):null}catch(v){const N=v instanceof Error?v.message:String(v);return console.error("Error fetching post:",N),h(N),null}},[m]),g=p.useCallback(async(k,v,N)=>{try{if(!k)return console.warn("getPostsByTribe called with invalid tribeId"),[];l(!0);const C=m();if(!C)throw new Error("Posts service not initialized");const P=await C.getPostsByTribe(k,v,N);i(T=>({...T,[k]:P}));const y={...t};return P.forEach(T=>{y[T.id]=T}),r(y),P}catch(C){const P=C instanceof Error?C.message:String(C);return console.error("Error fetching tribe posts:",P),h(P),[]}finally{l(!1)}},[t,m]),c=p.useCallback(async k=>{try{if(!k)return console.warn("refreshPost called with invalid postId"),null;const v=m();if(!v)throw new Error("Posts service not initialized");v.clearPostFromCache(k);const N=await v.getPost(k);return N?(r(C=>({...C,[k]:N})),N.tribeId&&i(C=>{const y=(C[N.tribeId]||[]).map(T=>T.id===N.id?N:T);return{...C,[N.tribeId]:y}}),N):null}catch(v){const N=v instanceof Error?v.message:String(v);return console.error("Error refreshing post:",N),h(N),null}},[m]),x=p.useCallback(async k=>{try{if(!k){console.warn("refreshTribePosts called with invalid tribeId");return}const v=m();if(!v)throw new Error("Posts service not initialized");v.clearTribeCache(k);const N=await v.getPostsByTribe(k);i(P=>({...P,[k]:N}));const C={...t};N.forEach(P=>{C[P.id]=P}),r(C)}catch(v){const N=v instanceof Error?v.message:String(v);console.error("Error refreshing tribe posts:",N),h(N)}},[t,m]);return{posts:s,postsByTribe:a,postsById:t,isLoading:o,error:u,syncStatus:d,getPostById:w,getPostsByTribe:g,refreshPost:c,refreshTribePosts:x}}function Fo(){const{tribeId:s}=Yt(),{tribes:n,isLoading:t}=Is(),{postsByTribe:r}=So(),[a,i]=p.useState(null),[o,l]=p.useState(!1),[u,h]=p.useState(!1),[d,b]=p.useState("all"),f=p.useMemo(()=>n==null?void 0:n.find(x=>x.id.toString()===(s==null?void 0:s.toString())),[n,s]),m=p.useMemo(()=>f?{id:f.id,name:f.name,description:an(f),avatar:nt(f),coverImage:on(f),memberCount:f.memberCount,isVerified:f.isVerified||!1,members:f.members||[],topics:rt(f)}:null,[f]);p.useEffect(()=>{f?(console.log("Found tribe:",f),console.log("Formatted tribe display:",m)):(n==null?void 0:n.length)>0&&(console.log("Tribes available but none match ID:",s),console.log("Available tribe IDs:",n.map(x=>x.id)))},[f,n,s]);const w=p.useMemo(()=>!f||!f.id?[]:r[f.id]||[],[f,r]);if(t)return e.jsxDEV("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxDEV("div",{className:"animate-pulse bg-accent/10 rounded-xl h-48 w-96"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:79,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:78,columnNumber:7},this);if(!f||!m)return e.jsxDEV("div",{className:"text-center py-12 text-muted-foreground",children:"Tribe not found"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:86,columnNumber:7},this);const g=x=>{console.log("Clicked item:",x)},c=e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"bg-card rounded-xl overflow-hidden",children:[e.jsxDEV("div",{className:"h-24 relative",children:[m.coverImage&&e.jsxDEV("img",{src:m.coverImage,alt:m.name,className:"w-full h-full object-cover",onError:x=>{x.target.src="/images/default-cover.png"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:104,columnNumber:13},this),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-t from-background/60 to-transparent"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:113,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:102,columnNumber:9},this),e.jsxDEV("div",{className:"p-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mt-2",children:[e.jsxDEV("img",{src:m.avatar,alt:m.name,className:"w-16 h-16 rounded-xl border-4 border-background",onError:x=>{x.target.src="/images/default-avatar.png"}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:119,columnNumber:13},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h3",{className:"font-semibold flex items-center gap-1",children:[m.name,m.isVerified&&e.jsxDEV("span",{className:"text-theme-primary text-sm",children:"✓"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:131,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:128,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsxDEV(Ee,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:135,columnNumber:17},this),e.jsxDEV("span",{children:[m.memberCount.toLocaleString()," members"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:136,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:134,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:127,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:118,columnNumber:11},this),e.jsxDEV("p",{className:"mt-3 text-sm text-muted-foreground",children:m.description},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:140,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>l(!o),className:Y("w-full mt-4 px-4 py-2 rounded-lg text-sm font-medium transition-colors",o?"bg-gray-700/10 hover:bg-gray-700/20 text-white":"bg-theme-primary hover:bg-theme-primary/90 text-white"),children:o?"Joined":"Join Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:141,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:117,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:100,columnNumber:7},this),e.jsxDEV(Vo,{members:m.members,topics:m.topics,onTopicSelect:i,selectedTopicId:a==null?void 0:a.id},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:156,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:98,columnNumber:5},this);return e.jsxDEV(cn,{rightSidebar:c,children:[e.jsxDEV("div",{className:"min-w-[320px] overflow-x-hidden",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxDEV("div",{className:"flex space-x-4 overflow-x-auto",children:[e.jsxDEV("button",{onClick:()=>b("all"),className:Y("px-4 py-2 rounded-full whitespace-nowrap",d==="all"?"bg-foreground/10 text-foreground":"text-muted-foreground hover:text-foreground"),children:"All Posts"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:171,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>b("media"),className:Y("px-4 py-2 rounded-full whitespace-nowrap",d==="media"?"bg-foreground/10 text-foreground":"text-muted-foreground hover:text-foreground"),children:"Media"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:182,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>b("events"),className:Y("px-4 py-2 rounded-full whitespace-nowrap",d==="events"?"bg-foreground/10 text-foreground":"text-muted-foreground hover:text-foreground"),children:"Events"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:193,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:170,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>h(!0),className:"flex items-center justify-center space-x-2 px-4 py-2 bg-theme-primary text-white rounded-full font-medium hover:bg-theme-primary/90 transition-colors w-full sm:w-auto",children:[e.jsxDEV(we,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:209,columnNumber:13},this),e.jsxDEV("span",{children:"Create Post"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:210,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:205,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:169,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:w.length>0?e.jsxDEV(Co,{items:w,onItemClick:g},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:217,columnNumber:13},this):e.jsxDEV("div",{className:"text-center py-12 text-muted-foreground",children:"No posts available in this tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:222,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:215,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:167,columnNumber:7},this),u&&e.jsxDEV("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-end sm:items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-card w-full max-w-[600px] rounded-t-xl sm:rounded-xl",children:e.jsxDEV(Io,{onClose:()=>h(!1),isOpen:u,tribeId:f.id},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:233,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:232,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:231,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeView.tsx",lineNumber:166,columnNumber:5},this)}function Ao(){return e.jsxDEV(Fo,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TribeDetails.tsx",lineNumber:8,columnNumber:10},this)}function Mo(){const s=ce(),{createTribe:n}=Cs(),[t,r]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(!1),[u,h]=p.useState(null),[d,b]=p.useState(null),[f,m]=p.useState(null),[w,g]=p.useState(null),[c,x]=p.useState([]),[k,v]=p.useState(""),[N,C]=p.useState(null),[P,y]=p.useState(!1),[T,j]=p.useState(!1),I=F=>{if(F.target.files&&F.target.files[0]){const L=F.target.files[0];h(L);const X=new FileReader;X.onload=te=>{var A;b((A=te.target)==null?void 0:A.result)},X.readAsDataURL(L)}},D=F=>{if(F.target.files&&F.target.files[0]){const L=F.target.files[0];m(L);const X=new FileReader;X.onload=te=>{var A;g((A=te.target)==null?void 0:A.result)},X.readAsDataURL(L)}},U=()=>{k&&!c.includes(k)&&c.length<5&&(x([...c,k]),v(""))},E=F=>{x(c.filter(L=>L!==F))},V=async F=>{if(F.preventDefault(),C(null),!t.trim()){C("Tribe name is required");return}if(!a.trim()){C("Description is required");return}y(!0);try{const L={name:t.trim(),description:a,privacy:o?"private":"public",tags:c,avatar:d,coverImage:w,createdAt:new Date().toISOString()};console.log("Creating tribe with metadata:",L);const X=JSON.stringify(L),te=o?1:0;await n(t,X),j(!0),setTimeout(()=>{s("/tribes")},2e3)}catch(L){console.error("Error creating tribe:",L),C(L instanceof Error?L.message:"Failed to create tribe")}finally{y(!1)}};return e.jsxDEV("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[e.jsxDEV("div",{className:"mb-8",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-white",children:"Create a New Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:112,columnNumber:9},this),e.jsxDEV("p",{className:"text-gray-400 mt-2",children:"Create a community around your interests, project, or organization."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:113,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:111,columnNumber:7},this),T?e.jsxDEV("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4 text-center",children:[e.jsxDEV("h3",{className:"text-xl font-semibold text-white mb-2",children:"Tribe Created Successfully!"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:118,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-300",children:"Redirecting you to the tribes page..."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:119,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:117,columnNumber:9},this):e.jsxDEV("form",{onSubmit:V,className:"space-y-6",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:`h-48 w-full rounded-xl overflow-hidden bg-gray-800/50 border-2 border-dashed ${w?"border-transparent":"border-gray-700"}`,children:w?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("img",{src:w,alt:"Cover Preview",className:"w-full h-full object-cover"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:128,columnNumber:19},this),e.jsxDEV("button",{type:"button",onClick:()=>{m(null),g(null)},className:"absolute top-2 right-2 bg-black/70 text-white p-1.5 rounded-full hover:bg-black/90",children:e.jsxDEV(Ue,{size:18},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:137,columnNumber:21},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:129,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:127,columnNumber:17},this):e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[e.jsxDEV(ts,{className:"w-10 h-10 mb-2"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:142,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm",children:"Upload cover image (optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:143,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:141,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:125,columnNumber:13},this),e.jsxDEV("input",{type:"file",id:"cover-image",accept:"image/*",onChange:D,className:"hidden"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:148,columnNumber:13},this),!w&&e.jsxDEV("label",{htmlFor:"cover-image",className:"absolute bottom-4 right-4 bg-gray-800 text-white px-3 py-2 rounded-lg flex items-center cursor-pointer hover:bg-gray-700",children:[e.jsxDEV(Ws,{size:16,className:"mr-2"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:161,columnNumber:17},this),e.jsxDEV("span",{children:"Upload Cover"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:162,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:157,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:124,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxDEV("div",{className:"col-span-1",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Avatar"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:171,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:`w-24 h-24 rounded-xl overflow-hidden bg-gray-800/50 border-2 border-dashed ${d?"border-transparent":"border-gray-700"}`,children:d?e.jsxDEV("img",{src:d,alt:"Avatar Preview",className:"w-full h-full object-cover"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:175,columnNumber:21},this):e.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxDEV(we,{size:24},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:178,columnNumber:23},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:177,columnNumber:21},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:173,columnNumber:17},this),e.jsxDEV("input",{type:"file",id:"avatar",accept:"image/*",onChange:I,className:"hidden"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:183,columnNumber:17},this),e.jsxDEV("label",{htmlFor:"avatar",className:"absolute -bottom-1 -right-1 bg-blue-600 text-white p-1.5 rounded-full cursor-pointer hover:bg-blue-700",children:e.jsxDEV(we,{size:14},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:195,columnNumber:19},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:191,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:172,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:170,columnNumber:13},this),e.jsxDEV("div",{className:"col-span-3 space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Tribe Name*"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("input",{type:"text",id:"name",value:t,onChange:F=>r(F.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter a name for your tribe",maxLength:50},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:202,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300 mb-2",children:"Description*"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:216,columnNumber:17},this),e.jsxDEV("textarea",{id:"description",value:a,onChange:F=>i(F.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"What is your tribe about?",rows:3,maxLength:300},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:217,columnNumber:17},this),e.jsxDEV("p",{className:"text-gray-400 text-xs mt-1",children:[a.length,"/300 characters"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:226,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:215,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:201,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:168,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Privacy"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:233,columnNumber:13},this),e.jsxDEV("div",{className:"flex space-x-4",children:[e.jsxDEV("button",{type:"button",onClick:()=>l(!1),className:`flex items-center space-x-3 p-3 rounded-lg border ${o?"border-gray-700 bg-gray-800/50 hover:bg-gray-800":"border-blue-500 bg-blue-500/10"}`,children:[e.jsxDEV(Je,{className:`w-5 h-5 ${o?"text-gray-400":"text-blue-500"}`},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:244,columnNumber:17},this),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("div",{className:`font-medium ${o?"text-white":"text-blue-500"}`,children:"Public"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:246,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-gray-400",children:"Anyone can join and view content"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:247,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:245,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:235,columnNumber:15},this),e.jsxDEV("button",{type:"button",onClick:()=>l(!0),className:`flex items-center space-x-3 p-3 rounded-lg border ${o?"border-blue-500 bg-blue-500/10":"border-gray-700 bg-gray-800/50 hover:bg-gray-800"}`,children:[e.jsxDEV(qe,{className:`w-5 h-5 ${o?"text-blue-500":"text-gray-400"}`},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:260,columnNumber:17},this),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("div",{className:`font-medium ${o?"text-blue-500":"text-white"}`,children:"Private"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:262,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-gray-400",children:"Members must be approved to join"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:263,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:261,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:251,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:234,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:232,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (up to 5)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:271,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2 mb-2",children:c.map(F=>e.jsxDEV("div",{className:"flex items-center bg-gray-800 text-white px-3 py-1 rounded-full",children:[e.jsxDEV("span",{className:"text-sm",children:F},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:275,columnNumber:19},this),e.jsxDEV("button",{type:"button",onClick:()=>E(F),className:"ml-2 text-gray-400 hover:text-white",children:e.jsxDEV(Ue,{size:14},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:281,columnNumber:21},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:276,columnNumber:19},this)]},F,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:274,columnNumber:17},this))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:272,columnNumber:13},this),e.jsxDEV("div",{className:"flex",children:[e.jsxDEV("input",{type:"text",value:k,onChange:F=>v(F.target.value),onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),U())},className:"flex-1 px-3 py-2 bg-gray-800/50 border border-r-0 border-gray-700 rounded-l-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add a tag",disabled:c.length>=5},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:288,columnNumber:15},this),e.jsxDEV("button",{type:"button",onClick:U,disabled:c.length>=5||!k.trim(),className:"px-3 py-2 bg-gray-700 text-white rounded-r-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:302,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:287,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-400 text-xs mt-1",children:"Tags help people discover your tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:311,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:270,columnNumber:11},this),N&&e.jsxDEV("div",{className:"bg-red-500/20 border border-red-500/30 text-red-200 px-4 py-3 rounded-lg",children:N},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:316,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center justify-end space-x-4 mt-8",children:[e.jsxDEV("button",{type:"button",onClick:()=>s("/tribes"),className:"px-4 py-2 text-gray-300 hover:text-white",children:"Cancel"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:323,columnNumber:13},this),e.jsxDEV("button",{type:"submit",disabled:P,className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:P?"Creating...":"Create Tribe"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:330,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:322,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:122,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/CreateTribe.tsx",lineNumber:110,columnNumber:5},this)}var ae=(s=>(s.WALLET_CONNECTION="WALLET_CONNECTION",s.PROFILE_CREATION="PROFILE_CREATION",s.FOLLOW_SUGGESTIONS="FOLLOW_SUGGESTIONS",s.COMPLETED="COMPLETED",s))(ae||{});const ys="tribes_onboarding",zs={currentStep:"WALLET_CONNECTION",isCompleted:!1};async function It(s,n){if(!n){console.error("❌ Chain ID is undefined in getProfileByAddress, using fallback");try{const a=window.ethereum;if(a){const i=await a.request({method:"eth_chainId"});n=parseInt(i,16),console.log("🔄 Retrieved chainId from provider:",n)}else n=20143,console.warn("⚠️ No provider, using fallback chainId:",n)}catch(a){console.error("❌ Failed to get chainId, using fallback:",a),n=20143}}const t=K(n),r=se(n);try{const a=n;console.log("🔍 Checking profile on chain:",{chainId:a,address:s,contractAddress:t.profileNFTMinter.address,rpcUrl:r.transport.url});const i=await r.readContract({address:t.profileNFTMinter.address,abi:t.profileNFTMinter.abi,functionName:"balanceOf",args:[s]});if(console.log("📊 Balance check result:",{balance:i.toString(),chainId:a,address:s}),i===BigInt(0))return console.log("❌ No profile found - balance is 0",{chainId:a,address:s}),null;let o=null;for(let m=0;m<10;m++)try{console.log("🔍 Checking token ownership:",{tokenId:m,chainId:a});const w=await r.readContract({address:t.profileNFTMinter.address,abi:t.profileNFTMinter.abi,functionName:"ownerOf",args:[BigInt(m)]});if(console.log("👤 Token owner:",{tokenId:m,owner:w,chainId:a}),w.toLowerCase()===s.toLowerCase()){o=m,console.log("✅ Found matching token:",{tokenId:m,chainId:a});break}}catch(w){console.log("⚠️ Token check error:",{tokenId:m,chainId:a,error:w});continue}if(o===null)return console.log("❌ No owned token found",{chainId:a,address:s}),null;console.log("🔍 Fetching profile data:",{tokenId:o,chainId:a});const l=await r.readContract({address:t.profileNFTMinter.address,abi:t.profileNFTMinter.abi,functionName:"getProfileByTokenId",args:[BigInt(o)]}),[u,h,d]=l;if(console.log("📦 Raw profile data:",{username:u,metadataURI:h,owner:d,chainId:a}),d.toLowerCase()!==s.toLowerCase())return console.log("❌ Owner mismatch:",{expectedOwner:s.toLowerCase(),actualOwner:d.toLowerCase(),chainId:a}),null;let b;try{const m=JSON.parse(h);b={avatar:m.avatar||"",bio:m.bio||"",createdAt:m.createdAt||Date.now()},console.log("✅ Parsed metadata:",{metadata:b,chainId:a})}catch(m){console.warn("⚠️ Failed to parse metadata:",{metadataURI:h,error:m,chainId:a}),b={avatar:"",bio:"",createdAt:Date.now()}}const f={tokenId:o.toString(),owner:s,username:u,metadata:b};return console.log("✅ Profile found:",{profile:f,chainId:a}),f}catch(a){return console.error("❌ Profile fetch error:",{error:a,chainId:n,address:s,contractAddress:t.profileNFTMinter.address,rpcUrl:r.transport.url}),null}}const Oo=3e3,Ro=3,lt=()=>{const[s,n]=p.useState(()=>{const d=localStorage.getItem(ys);return d?JSON.parse(d):zs}),t=p.useRef(0),r=p.useRef();p.useEffect(()=>{const d=async()=>{if(!window.ethereum){console.log("❌ No ethereum provider found");return}try{const b=new Promise((c,x)=>{r.current=setTimeout(()=>{x(new Error("Wallet check timeout"))},Oo)}),f=await Promise.race([window.ethereum.request({method:"eth_accounts"}),b]);clearTimeout(r.current);const m=f&&f.length>0,w=m?f[0]:void 0,g=m?await window.ethereum.request({method:"eth_chainId"}):void 0;if(m&&w){const c=await It(w,g);n(k=>({...k,walletAddress:w,chainId:g?parseInt(g):void 0,currentStep:c?ae.COMPLETED:ae.PROFILE_CREATION,isCompleted:!!c,profileId:c==null?void 0:c.tokenId}));const x={isConnected:m,address:w,chainId:g,profileId:c==null?void 0:c.tokenId};localStorage.setItem("wallet_data",JSON.stringify(x)),t.current=0}else throw new Error("No wallet connected")}catch(b){console.error("❌ Error checking wallet connection:",b),r.current&&clearTimeout(r.current),t.current<Ro?(t.current++,setTimeout(d,1e3)):(console.log("❌ Max retries reached, resetting to initial state"),n(f=>({...f,walletAddress:void 0,chainId:void 0,currentStep:ae.WALLET_CONNECTION})))}};if(d(),window.ethereum)return window.ethereum.on("accountsChanged",d),window.ethereum.on("chainChanged",d),()=>{r.current&&clearTimeout(r.current),window.ethereum.removeListener("accountsChanged",d),window.ethereum.removeListener("chainChanged",d)}},[]),p.useEffect(()=>{localStorage.setItem(ys,JSON.stringify(s))},[s]),p.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]);const a=p.useCallback(()=>{const d=localStorage.getItem("wallet_data"),{isConnected:b,address:f,profileId:m}=d?JSON.parse(d):{};return!b||!f?ae.WALLET_CONNECTION:m?s.isCompleted?ae.COMPLETED:ae.FOLLOW_SUGGESTIONS:ae.PROFILE_CREATION},[s]),i=p.useCallback(async(d,b)=>{const f=await It(d,b);n(m=>({...m,walletAddress:d,chainId:b,currentStep:f?ae.COMPLETED:ae.PROFILE_CREATION,isCompleted:!!f,profileId:f==null?void 0:f.tokenId})),localStorage.setItem("wallet_data",JSON.stringify({isConnected:!0,address:d,chainId:b,profileId:f==null?void 0:f.tokenId}))},[]),o=p.useCallback(()=>{n(zs),localStorage.removeItem("wallet_data"),localStorage.removeItem(ys)},[]),l=p.useCallback(d=>{n(b=>({...b,profileId:d,currentStep:ae.FOLLOW_SUGGESTIONS}))},[]),u=p.useCallback(()=>{n(d=>({...d,currentStep:ae.COMPLETED,isCompleted:!0}))},[]),h=p.useCallback(()=>{n(zs),localStorage.removeItem("wallet_data"),localStorage.removeItem(ys)},[]);return{...s,getCurrentStep:a,updateWalletInfo:i,clearWalletInfo:o,updateProfileId:l,completeOnboarding:u,resetOnboarding:h}},Oe={base:`block w-full rounded-lg border-2 shadow-sm 
    focus:ring-2 focus:ring-opacity-50 focus:outline-none
    transition-colors duration-200`,default:`border-gray-700 bg-gray-900 text-white placeholder-gray-500
    focus:border-green-500 focus:ring-green-500/20`,disabled:"border-gray-600 bg-gray-800 text-gray-400 cursor-not-allowed"},Re={base:`w-full flex justify-center items-center py-3 px-6 rounded-lg font-medium
    transition-all duration-200 ease-in-out transform`,primary:`bg-green-500 hover:bg-green-600 active:bg-green-700 
    text-white shadow-lg shadow-green-500/20 
    hover:shadow-green-500/30 hover:-translate-y-0.5`,secondary:`bg-gray-800 hover:bg-gray-700 active:bg-gray-600
    text-gray-300 hover:text-white border border-gray-700
    hover:border-gray-600`,disabled:"bg-gray-600 text-gray-300 cursor-not-allowed opacity-50"},Lo=()=>{const s=ce(),{createProfile:n,skipProfileCreation:t,hasSkippedProfileCreation:r,checkProfileOwnership:a}=Ze(),{updateProfileId:i,completeOnboarding:o}=lt(),[l,u]=p.useState(!1),[h,d]=p.useState(!1),[b,f]=p.useState(null),[m,w]=p.useState({username:"",avatar:"",bio:""});p.useEffect(()=>{(async()=>{var N;const v=await((N=window.ethereum)==null?void 0:N.request({method:"eth_requestAccounts"}));if(v!=null&&v[0]){if(await r(v[0])){o(),s("/dashboard");return}const P=await a(v[0]);P&&(f({tokenId:P.tokenId,username:P.username}),w(y=>{var T,j;return{...y,username:P.username,avatar:((T=P.metadata)==null?void 0:T.avatar)||"",bio:((j=P.metadata)==null?void 0:j.bio)||""}}),i(P.tokenId),o(),s("/dashboard"))}})()},[r,a,o,s,i]);const g=async k=>{k.preventDefault(),u(!0);try{const v=JSON.stringify({avatar:m.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${m.username}`,bio:m.bio,createdAt:Date.now()}),N=await n(m.username,v);N&&(i(N.toString()),s("/onboarding/follow"))}finally{u(!1)}},c=async()=>{d(!0);try{await t()&&(o(),s("/dashboard"))}finally{d(!1)}},x=k=>{const{name:v,value:N}=k.target;w(C=>({...C,[v]:N}))};return b?e.jsxDEV("div",{className:"w-full max-w-lg mx-auto px-4 py-8",children:e.jsxDEV("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-xl border border-gray-700/50 shadow-xl",children:[e.jsxDEV("h2",{className:"text-3xl font-bold mb-8 text-white text-center",children:"Profile Already Exists"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:124,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-300 text-center mb-6",children:["You already have a profile with username: ",e.jsxDEV("span",{className:"text-green-500 font-semibold",children:b.username},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:128,columnNumber:55},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:127,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>s("/dashboard"),className:Re.primary,children:"Go to Dashboard"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:130,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:123,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:122,columnNumber:7},void 0):e.jsxDEV("div",{className:"w-full max-w-lg mx-auto px-4 py-8",children:e.jsxDEV("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-xl border border-gray-700/50 shadow-xl",children:[e.jsxDEV("h2",{className:"text-3xl font-bold mb-8 text-white text-center",children:"Create Your Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:144,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:g,className:"space-y-6",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-200",children:"Username"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:150,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",name:"username",id:"username",required:!0,value:m.username,onChange:x,disabled:!!b,className:`${Oe.base} ${b?Oe.disabled:Oe.default}`,placeholder:"Enter your username"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:156,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:149,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-200",children:"Avatar"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:171,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("img",{src:m.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${m.username||"default"}`,alt:"Avatar preview",className:"w-20 h-20 rounded-full bg-gray-700 ring-2 ring-green-500/20"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:178,columnNumber:17},void 0),e.jsxDEV("div",{className:"absolute inset-0 rounded-full shadow-inner"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:183,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:177,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",name:"avatar",value:m.avatar,onChange:x,className:`${Oe.base} ${Oe.default}`,placeholder:"Avatar URL (optional)"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:185,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:176,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:170,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-200",children:"Bio"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:198,columnNumber:13},void 0),e.jsxDEV("textarea",{name:"bio",id:"bio",rows:3,value:m.bio,onChange:x,className:`${Oe.base} ${Oe.default} resize-none`,placeholder:"Tell us about yourself"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:204,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:197,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("button",{type:"submit",disabled:l||!!b,className:`${Re.base} ${l||b?Re.disabled:Re.primary}`,children:l?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:227,columnNumber:21},void 0),e.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:228,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:226,columnNumber:19},void 0),"Creating Profile..."]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:225,columnNumber:17},void 0):"Create Profile"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:217,columnNumber:13},void 0),!b&&e.jsxDEV("button",{type:"button",onClick:c,disabled:h,className:`${Re.base} ${h?Re.disabled:Re.secondary}`,children:h?"Skipping...":"Skip for now"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:238,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:216,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:147,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:143,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/ProfileCreation.tsx",lineNumber:142,columnNumber:5},void 0)},Bo=[{id:"1",username:"alice",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=alice",bio:"Web3 Developer & DeFi enthusiast"},{id:"2",username:"bob",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=bob",bio:"NFT Artist & Collector"},{id:"3",username:"charlie",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=charlie",bio:"Blockchain Researcher"}],$o=()=>{const s=ce(),{completeOnboarding:n}=lt(),[t,r]=p.useState(new Set),a=o=>{r(l=>{const u=new Set(l);return u.has(o)?u.delete(o):u.add(o),u})},i=()=>{n(),s("/dashboard")};return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"Follow some interesting people"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:54,columnNumber:9},void 0),e.jsxDEV("p",{className:"mt-2 text-sm text-gray-600",children:"Follow at least 3 people to get started"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:57,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:53,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-4",children:Bo.map(o=>e.jsxDEV("div",{className:`flex items-center justify-between p-4 rounded-lg border ${t.has(o.id)?"border-green-500 bg-green-50":"border-gray-200"}`,children:[e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("img",{src:o.avatar,alt:o.username,className:"w-12 h-12 rounded-full"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:73,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-medium text-gray-900",children:["@",o.username]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:79,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500",children:o.bio},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:80,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:78,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:72,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>a(o.id),className:`px-4 py-2 rounded-full text-sm font-medium ${t.has(o.id)?"bg-green-500 text-white":"bg-gray-100 text-gray-900"}`,children:t.has(o.id)?"Following":"Follow"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:83,columnNumber:13},void 0)]},o.id,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:64,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:62,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("button",{onClick:()=>s("/dashboard"),className:"text-gray-600 hover:text-gray-900",children:"Skip for now"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:98,columnNumber:9},void 0),e.jsxDEV("button",{onClick:i,disabled:t.size<3,className:`px-6 py-2 rounded-full font-medium ${t.size>=3?"bg-green-500 text-white hover:bg-green-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:"Continue"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:104,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:97,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/FollowSuggestions.tsx",lineNumber:52,columnNumber:5},void 0)},_o=()=>{const{getCurrentStep:s}=lt(),n=s();if(n===ae.COMPLETED)return e.jsxDEV(Qt,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:16,columnNumber:12},void 0);const t=()=>{switch(n){case ae.WALLET_CONNECTION:return e.jsxDEV(un,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:23,columnNumber:16},void 0);case ae.PROFILE_CREATION:return e.jsxDEV(Lo,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:25,columnNumber:16},void 0);case ae.FOLLOW_SUGGESTIONS:return e.jsxDEV($o,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:27,columnNumber:16},void 0);default:return null}};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("style",{children:`
          body {
            background-color: #111827;
            min-height: 100vh;
            margin: 0;
          }
        `},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:35,columnNumber:7},void 0),e.jsxDEV("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-gray-900 to-black",children:[e.jsxDEV(tt,{onMenuClick:()=>{}},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:45,columnNumber:9},void 0),e.jsxDEV("main",{className:"flex-1 flex items-center justify-center",children:e.jsxDEV("div",{className:"w-full",children:t()},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:47,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:46,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:44,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/Onboarding.tsx",lineNumber:34,columnNumber:5},void 0)};function zo(){const{topicId:s}=Yt();return e.jsxDEV("div",{className:"min-h-screen",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxDEV("div",{className:"bg-gray-800/30 border border-gray-700/50 rounded-xl p-6 text-center",children:[e.jsxDEV(Rt,{className:"w-12 h-12 mx-auto text-blue-400 mb-4"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:20,columnNumber:11},this),e.jsxDEV("h1",{className:"text-2xl font-bold mb-2",children:"Topics View"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:21,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-300 mb-4",children:"This feature is currently under development. Topics will soon be mapped to post tags to provide a unified view of content across tribes."},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:22,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-400",children:["Topic ID: ",s||"None selected"]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:26,columnNumber:11},this),e.jsxDEV("div",{className:"mt-6",children:e.jsxDEV(Xt,{to:"/",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Home"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:30,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:29,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:19,columnNumber:9},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:18,columnNumber:7},this)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/topics/TopicsView.tsx",lineNumber:17,columnNumber:5},this)}function Ko(){return e.jsxDEV(zo,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/screens/TopicDetails.tsx",lineNumber:4,columnNumber:10},this)}const Ks="tribes_auth_state",B=(s,n)=>{const t=new Date().toISOString().split("T")[1].split(".")[0];n?console.log(`[AuthGuard:${t}] ${s}`,n):console.log(`[AuthGuard:${t}] ${s}`)},qo=({children:s})=>{const n=ce(),t=Ps(),{getProfileByAddress:r,isLoading:a}=Ze(),{chainId:i,switchNetwork:o}=Pe(),[l,u]=p.useState(!0),[h,d]=p.useState(),[b,f]=p.useState(0),m=p.useRef(!1),w=3,{sdk:g,isInitialized:c}=Vs(),x=p.useRef(new Map),k=3,v=p.useRef(),N=()=>{var y;try{const T=localStorage.getItem(Ks);if(T){const D=JSON.parse(T);if(Date.now()-D.timestamp<=36e5)return B("Found valid tribes_auth_state",{address:D.address,chainId:D.chainId}),D;localStorage.removeItem(Ks),B("Removed expired tribes_auth_state")}const j=localStorage.getItem("tribes_auth"),I=localStorage.getItem("tribes_profile");if(j){const D=JSON.parse(j),U=I?JSON.parse(I):null;if(D.isConnected&&D.address){const E={address:D.address,chainId:i||0,profile:U?{tokenId:((y=U.tokenId)==null?void 0:y.toString())||"0",username:U.username||"",metadata:{uri:U.avatarNFT||""}}:void 0,timestamp:Date.now()};return B("Created auth state from tribes_auth/profile",{address:E.address}),E}}return B("No valid auth state found"),null}catch(T){return console.error("Failed to load stored auth state:",T),null}},C=y=>{try{localStorage.setItem(Ks,JSON.stringify({...y,timestamp:Date.now()})),B("Saved auth state",{address:y.address,chainId:y.chainId})}catch(T){console.error("Failed to save auth state:",T)}},P=y=>{if(t.pathname===y){B(`Already at ${y}, not navigating`);return}const T=x.current.get(y)||0;if(T>=k){B(`Too many navigation attempts to ${y}, stopping`),u(!1);return}x.current.set(y,T+1),B(`Navigating to ${y} (attempt ${T+1})`),n(y)};return p.useEffect(()=>((async()=>{var T;if(t.pathname!=="/connect"&&x.current.delete("/connect"),a||!g||!c){B("SDK not ready, waiting...",{isSdkLoading:a,hasSdk:!!g,isInitialized:c});return}if(v.current&&clearTimeout(v.current),m.current){B("Profile check already in progress, skipping");return}try{if(m.current=!0,B(`Starting auth check on path: ${t.pathname}, chainId: ${i}`),["/connect","/create-profile","/username-setup"].includes(t.pathname)){B("On auth/profile page, skipping check"),u(!1);return}if(i===h&&b===0){B("Chain ID unchanged and not retrying, skipping check");return}u(!0);let j;try{B("Getting wallet client"),j=await st(i)}catch{B("No wallet connected, redirecting to connect"),P("/connect");return}const[I]=await j.getAddresses();if(!I){B("No address in wallet client, redirecting to connect"),P("/connect");return}B("Found wallet address",{address:I});const D=N();if(D!=null&&D.profile&&D.address===I&&D.chainId===i){B("Valid stored auth state found, proceeding"),(t.pathname==="/create-profile"||t.pathname==="/username-setup")&&(B("On profile creation page with valid profile, redirecting to dashboard"),P("/dashboard")),u(!1);return}if(!i){if(b<w){B("No chainId, retrying",{retryCount:b}),f(V=>V+1);return}B("No chainId after max retries, switching network"),await o(ee.id),f(0);return}d(i),B("Checking profile on chain",{chainId:i,address:I});const{profile:U,error:E}=await r(I);if(E&&(B("Profile check returned error",{code:E.code}),E.code==="SDK_NOT_INITIALIZED"&&b<w)){B("SDK not initialized, retrying",{retryCount:b}),f(V=>V+1),v.current=setTimeout(()=>{f(V=>V+1)},1e3);return}if((E==null?void 0:E.code)==="WRONG_CHAIN"){if(b<w){B("Wrong chain, retrying",{retryCount:b}),f(V=>V+1);return}B("Wrong chain after max retries, redirecting to connect"),P("/connect"),f(0);return}if(f(0),(E==null?void 0:E.code)==="NO_PROFILE"){B("No profile found, redirecting to create-profile"),t.pathname!=="/create-profile"&&P("/create-profile"),u(!1);return}if(!U){B("No profile and no specific error, redirecting to connect"),P("/connect");return}B("Profile found, saving auth state",{username:U.username}),C({address:I,chainId:i,profile:{tokenId:U.tokenId,username:U.username,metadata:{uri:((T=U.metadata)==null?void 0:T.avatar)||""}},timestamp:Date.now()}),t.pathname==="/create-profile"&&(B("On profile creation page with valid profile, redirecting to dashboard"),P("/dashboard")),u(!1)}catch(j){if(console.error("Auth check failed:",j),b<w){B("Auth check error, retrying",{retryCount:b}),f(I=>I+1);return}B("Auth check failed after max retries, redirecting to connect"),P("/connect"),f(0)}finally{m.current=!1,b>=w&&(B("Max retries reached, stopping loading"),u(!1),f(0))}})(),()=>{v.current&&clearTimeout(v.current)}),[i,t.pathname,a,g,c]),l||a||!g||!c?(B("Rendering loading state",{isLoading:l,isSdkLoading:a,hasSdk:!!g,isInitialized:c}),e.jsxDEV("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/AuthGuard.tsx",lineNumber:336,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/AuthGuard.tsx",lineNumber:335,columnNumber:7},void 0)):(B("Rendering children"),e.jsxDEV(e.Fragment,{children:s},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/components/AuthGuard.tsx",lineNumber:342,columnNumber:10},void 0))},Wo=`
:root {
  /* Blockchain brand colors */
  --monad-green: #4ADE80;
  --monad-dark-green: #22c55e;
  --monad-bg: #0F2416;
  --monad-bg-rgb: 15, 36, 22;
  --fuse-blue: #1E88FA;
  --fuse-gold: #F9C846;
  --fuse-dark-blue: #0D2B47;
  --fuse-bg: #0A1F35;
  --fuse-bg-rgb: 10, 31, 53;
  --text-primary: #FBFAF9;
  --text-secondary: rgba(251, 250, 249, 0.7);
  --text-disabled: rgba(251, 250, 249, 0.5);
  --success-main: #22c55e;
  --error-main: #ef4444;
  
  /* Set chain-specific colors - default to Monad */
  --chain-primary: var(--monad-green);
  --chain-secondary: var(--monad-dark-green);
  --chain-bg: var(--monad-bg);
  --chain-bg-rgb: var(--monad-bg-rgb);
  --chain-accent: rgba(74, 222, 128, 0.2);
}
`,hn=document.createElement("style");hn.textContent=Wo;document.head.appendChild(hn);const Go=20143,Jo=1264453517,Ho=s=>{if(s===Go){document.documentElement.style.setProperty("--chain-primary","var(--monad-green)"),document.documentElement.style.setProperty("--chain-secondary","var(--monad-dark-green)"),document.documentElement.style.setProperty("--chain-bg","var(--monad-bg)"),document.documentElement.style.setProperty("--chain-bg-rgb","var(--monad-bg-rgb)"),document.documentElement.style.setProperty("--chain-accent","rgba(74, 222, 128, 0.2)"),document.documentElement.style.setProperty("--theme-color","#4ADE80");const n=document.querySelector('meta[name="theme-color"]');n&&n.setAttribute("content","#4ADE80")}else if(s===Jo){document.documentElement.style.setProperty("--chain-primary","var(--fuse-gold)"),document.documentElement.style.setProperty("--chain-secondary","var(--fuse-dark-blue)"),document.documentElement.style.setProperty("--chain-bg","var(--fuse-bg)"),document.documentElement.style.setProperty("--chain-bg-rgb","var(--fuse-bg-rgb)"),document.documentElement.style.setProperty("--chain-accent","rgba(249, 200, 70, 0.2)"),document.documentElement.style.setProperty("--theme-color","#F9C846");const n=document.querySelector('meta[name="theme-color"]');n&&n.setAttribute("content","#F9C846")}},Xo=3e4;async function Yo(){if(typeof window>"u"){console.log("Initializing server-side services");return}const n=new Promise((t,r)=>{setTimeout(()=>r(new Error("Initialization timed out")),Xo)});try{await Promise.race([Zo(),n])}catch(t){console.error("App initialization failed:",t),await Qo()}}async function Qo(){console.log("Initializing in fallback mode...");const s=z.id;console.log("Using default chain ID:",s),Us(s);try{await new Qe(s).initialize().catch(t=>{console.warn("Failed to initialize TribesSDK in fallback mode",t)})}catch(n){console.warn("Error creating TribesSDK in fallback mode",n)}Se.getInstance(),console.log("Fallback initialization complete")}async function Zo(){try{console.log("Initializing client-side services");let s=z.id,n=Us(s);console.log("[IndexerService] Pre-initializing with default chainId:",s);try{console.log("Connecting to blockchain..."),await he.connect();const t=await he.getChainId();console.log("Successfully connected to blockchain with chainId:",t),s=t,n=Us(s),console.log("[IndexerService] Initializing with chainId:",s),new Qe(s).initialize().catch(i=>{console.warn("TribesSDK initialization had an error, but app will continue:",i)}),console.log("[TribesSDK] Initialization started with chainId:",s);const a=Se.getInstance();console.log("[PostsService] Initialized with chainId:",s),setTimeout(async()=>{try{const i=await he.getAddress();i&&n.setConnectedUser(i)}catch(i){console.warn("Failed to set connected user in indexer:",i)}},2e3)}catch(t){console.warn("Failed to connect to blockchain. Some features may not work:",t)}console.log("App services initialized successfully")}catch(s){throw console.error("Error initializing app services:",s),s}}const ei=()=>{const s=et(),[n,t]=p.useState(!1),[r,a]=p.useState(!0),[i,o]=p.useState(null);return p.useEffect(()=>{s&&Ho(s)},[s]),p.useEffect(()=>{(async()=>{try{a(!0),await Yo();const u=new Qe(s);await u.initialize(),o(u),t(!0)}catch(u){console.error("Failed to initialize app:",u),t(!0)}finally{a(!1)}})()},[s]),r?e.jsxDEV("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:64,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:63,columnNumber:7},void 0):e.jsxDEV(Ua,{sdk:i,isInitialized:n,children:e.jsxDEV(Tr,{children:e.jsxDEV(Ur,{children:[e.jsxDEV(me,{path:"/",element:e.jsxDEV(Ma,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:74,columnNumber:36},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:74,columnNumber:11},void 0),e.jsxDEV(me,{path:"/connect",element:e.jsxDEV(un,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:75,columnNumber:43},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:75,columnNumber:11},void 0),e.jsxDEV(me,{path:"/create-profile",element:e.jsxDEV(vt,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:76,columnNumber:50},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:76,columnNumber:11},void 0),e.jsxDEV(me,{path:"/username-setup",element:e.jsxDEV(vt,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:77,columnNumber:50},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:77,columnNumber:11},void 0),e.jsxDEV(me,{element:e.jsxDEV(qo,{children:e.jsxDEV(Ca,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:80,columnNumber:38},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:80,columnNumber:27},void 0),children:[e.jsxDEV(me,{path:"/dashboard",element:e.jsxDEV(oo,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:81,columnNumber:47},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:81,columnNumber:13},void 0),e.jsxDEV(me,{path:"/profile",element:e.jsxDEV(co,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:82,columnNumber:45},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:82,columnNumber:13},void 0),e.jsxDEV(me,{path:"/tribes",element:e.jsxDEV(bo,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:83,columnNumber:44},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:83,columnNumber:13},void 0),e.jsxDEV(me,{path:"/tribes/create",element:e.jsxDEV(Mo,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:84,columnNumber:51},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:84,columnNumber:13},void 0),e.jsxDEV(me,{path:"/tribes/:tribeId",element:e.jsxDEV(Ao,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:85,columnNumber:53},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:85,columnNumber:13},void 0),e.jsxDEV(me,{path:"/tribes/:tribeId/topics/:topicId",element:e.jsxDEV(Ko,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:86,columnNumber:69},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:86,columnNumber:13},void 0),e.jsxDEV(me,{path:"/onboarding",element:e.jsxDEV(_o,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:87,columnNumber:48},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:87,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:80,columnNumber:11},void 0),e.jsxDEV(me,{path:"*",element:e.jsxDEV(Qt,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:91,columnNumber:36},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:91,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:72,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:71,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/App.tsx",lineNumber:70,columnNumber:5},void 0)},si={chainId:void 0,isCorrectNetwork:!1,isChainSwitching:!1,lastValidChainId:z.id},wn=At({name:"chain",initialState:si,reducers:{setChainId:(s,n)=>{s.chainId=n.payload},setIsCorrectNetwork:(s,n)=>{s.isCorrectNetwork=n.payload},setIsChainSwitching:(s,n)=>{s.isChainSwitching=n.payload},setLastValidChainId:(s,n)=>{s.lastValidChainId=n.payload}}}),{setChainId:di,setIsCorrectNetwork:ci,setIsChainSwitching:mi,setLastValidChainId:fi}=wn.actions,ti=wn.reducer,ni=Pr({reducer:{chain:ti,posts:ta}}),ri=new jr,ai=Cr({chains:[z,ee],transports:{[z.id]:qs(z.rpcUrls.default.http[0]),[ee.id]:qs(ee.rpcUrls.default.http[0])}});Vr.createRoot(document.getElementById("root")).render(e.jsxDEV(W.StrictMode,{children:e.jsxDEV(Ir,{store:ni,children:e.jsxDEV(Sr,{config:ai,children:e.jsxDEV(Fr,{client:ri,children:e.jsxDEV(Ba,{children:e.jsxDEV(ei,{},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:40,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:39,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:37,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:35,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:33,columnNumber:5},void 0)},void 0,!1,{fileName:"/Users/sudhanshu/Downloads/work/astrix/wasserstoff/tribes/src/main.tsx",lineNumber:32,columnNumber:3},void 0));
//# sourceMappingURL=main-b6M8jD0S.js.map
